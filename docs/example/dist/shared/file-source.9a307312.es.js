function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){o(e,t,i[t])}))}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,o){return!o||"object"!==t(o)&&"function"!=typeof o?l(e):o}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}var p={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},f=new(function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.init(t,o)}return a(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||p,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,o,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(o).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,n({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),m=function(){function e(){r(this,e),this.observers={}}return a(e,[{key:"on",value:function(e,t){var o=this;return e.split(" ").forEach((function(e){o.observers[e]=o.observers[e]||[],o.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];if(this.observers[e]){var n=[].concat(this.observers[e]);n.forEach((function(e){e.apply(void 0,o)}))}if(this.observers["*"]){var r=[].concat(this.observers["*"]);r.forEach((function(t){t.apply(t,[e].concat(o))}))}}}]),e}();function g(){var e,t,o=new Promise((function(o,i){e=o,t=i}));return o.resolve=e,o.reject=t,o}function b(e){return null==e?"":""+e}function v(e,t,o){e.forEach((function(e){t[e]&&(o[e]=t[e])}))}function y(e,t,o){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function n(){return!e||"string"==typeof e}for(var r="string"!=typeof t?[].concat(t):t.split(".");r.length>1;){if(n())return{};var s=i(r.shift());!e[s]&&o&&(e[s]=new o),e=e[s]}return n()?{}:{obj:e,k:i(r.shift())}}function w(e,t,o){var i=y(e,t,Object);i.obj[i.k]=o}function E(e,t){var o=y(e,t),i=o.obj,n=o.k;if(i)return i[n]}function x(e,t,o){var i=E(e,o);return void 0!==i?i:E(t,o)}function C(e,t,o){for(var i in t)"__proto__"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?o&&(e[i]=t[i]):C(e[i],t[i],o):e[i]=t[i]);return e}function R(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function S(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return k[e]})):e}var M="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,T=function(e){function t(e){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return r(this,t),o=c(this,u(t).call(this)),M&&m.call(l(o)),o.data=e||{},o.options=i,void 0===o.options.keySeparator&&(o.options.keySeparator="."),o}return h(t,m),a(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,r=[e,t];return o&&"string"!=typeof o&&(r=r.concat(o)),o&&"string"==typeof o&&(r=r.concat(n?o.split(n):o)),e.indexOf(".")>-1&&(r=e.split(".")),E(this.data,r)}},{key:"addResource",value:function(e,t,o,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},r=this.options.keySeparator;void 0===r&&(r=".");var s=[e,t];o&&(s=s.concat(r?o.split(r):o)),e.indexOf(".")>-1&&(i=t,t=(s=e.split("."))[1]),this.addNamespaces(t),w(this.data,s,i),n.silent||this.emit("added",e,t,o,i)}},{key:"addResources",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var n in o)"string"!=typeof o[n]&&"[object Array]"!==Object.prototype.toString.apply(o[n])||this.addResource(e,t,n,o[n],{silent:!0});i.silent||this.emit("added",e,t,o)}},{key:"addResourceBundle",value:function(e,t,o,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(i=o,o=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var l=E(this.data,a)||{};i?C(l,o,r):l=n({},l,o),w(this.data,a,l),s.silent||this.emit("added",e,t,o)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?n({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),L={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,o,i,n){var r=this;return e.forEach((function(e){r.processors[e]&&(t=r.processors[e].process(t,o,i,n))})),t}},A={},D=function(e){function o(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,o),t=c(this,u(o).call(this)),M&&m.call(l(t)),v(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,l(t)),t.options=i,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=f.create("translator"),t}return h(o,m),a(o,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},o=this.resolve(e,t);return o&&void 0!==o.res}},{key:"extractFromKey",value:function(e,t){var o=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===o&&(o=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,n=t.ns||this.options.defaultNS;if(o&&e.indexOf(o)>-1){var r=e.match(this.interpolator.nestingRegexp);if(r&&r.length>0)return{key:e,namespaces:n};var s=e.split(o);(o!==i||o===i&&this.options.ns.indexOf(s[0])>-1)&&(n=s.shift()),e=s.join(i)}return"string"==typeof n&&(n=[n]),{key:e,namespaces:n}}},{key:"translate",value:function(e,o,i){var r=this;if("object"!==t(o)&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),o||(o={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var s=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],o),l=a.key,c=a.namespaces,u=c[c.length-1],d=o.lng||this.language,h=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(h){var p=o.nsSeparator||this.options.nsSeparator;return u+p+l}return l}var f=this.resolve(e,o),m=f&&f.res,g=f&&f.usedKey||l,b=f&&f.exactUsedKey||l,v=Object.prototype.toString.apply(m),y=["[object Number]","[object Function]","[object RegExp]"],w=void 0!==o.joinArrays?o.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,x="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(E&&m&&x&&y.indexOf(v)<0&&("string"!=typeof w||"[object Array]"!==v)){if(!o.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,o):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");if(s){var C="[object Array]"===v,R=C?[]:{},k=C?b:g;for(var S in m)if(Object.prototype.hasOwnProperty.call(m,S)){var M="".concat(k).concat(s).concat(S);R[S]=this.translate(M,n({},o,{joinArrays:!1,ns:c})),R[S]===M&&(R[S]=m[S])}m=R}}else if(E&&"string"==typeof w&&"[object Array]"===v)(m=m.join(w))&&(m=this.extendTranslation(m,e,o,i));else{var T=!1,L=!1;if(!this.isValidLookup(m)&&void 0!==o.defaultValue){if(T=!0,void 0!==o.count){var A=this.pluralResolver.getSuffix(d,o.count);m=o["defaultValue".concat(A)]}m||(m=o.defaultValue)}this.isValidLookup(m)||(L=!0,m=l);var D=o.defaultValue&&o.defaultValue!==m&&this.options.updateMissing;if(L||T||D){if(this.logger.log(D?"updateKey":"missingKey",d,u,l,D?o.defaultValue:m),s){var P=this.resolve(l,n({},o,{keySeparator:!1}));P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var F=[],_=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if("fallback"===this.options.saveMissingTo&&_&&_[0])for(var N=0;N<_.length;N++)F.push(_[N]);else"all"===this.options.saveMissingTo?F=this.languageUtils.toResolveHierarchy(o.lng||this.language):F.push(o.lng||this.language);var O=function(e,t){r.options.missingKeyHandler?r.options.missingKeyHandler(e,u,t,D?o.defaultValue:m,D,o):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,u,t,D?o.defaultValue:m,D,o),r.emit("missingKey",e,u,t,m)};if(this.options.saveMissing){var z=void 0!==o.count&&"string"!=typeof o.count;this.options.saveMissingPlurals&&z?F.forEach((function(e){r.pluralResolver.getPluralFormsOfKey(e,l).forEach((function(t){return O([e],t)}))})):O(F,l)}}m=this.extendTranslation(m,e,o,f,i),L&&m===l&&this.options.appendNamespaceToMissingKey&&(m="".concat(u,":").concat(l)),L&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(e,t,o,i,r){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,o,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(n({},o,{interpolation:n({},this.options.interpolation,o.interpolation)}));var a,l=o.interpolation&&o.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(l){var c=e.match(this.interpolator.nestingRegexp);a=c&&c.length}var u=o.replace&&"string"!=typeof o.replace?o.replace:o;if(this.options.interpolation.defaultVariables&&(u=n({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,o.lng||this.language,o),l){var d=e.match(this.interpolator.nestingRegexp);a<(d&&d.length)&&(o.nest=!1)}!1!==o.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return r&&r[0]===o[0]?(s.logger.warn("It seems you are nesting recursively key: ".concat(o[0]," in key: ").concat(t[0])),null):s.translate.apply(s,o.concat([t]))}),o)),o.interpolation&&this.interpolator.reset()}var h=o.postProcess||this.options.postProcess,p="string"==typeof h?[h]:h;return null!=e&&p&&p.length&&!1!==o.applyPostProcessor&&(e=L.handle(p,e,t,this.options&&this.options.postProcessPassResolved?n({i18nResolved:i},o):o,this)),e}},{key:"resolve",value:function(e){var t,o,i,n,r,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var l=s.extractFromKey(e,a),c=l.key;o=c;var u=l.namespaces;s.options.fallbackNS&&(u=u.concat(s.options.fallbackNS));var d=void 0!==a.count&&"string"!=typeof a.count,h=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,p=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);u.forEach((function(e){s.isValidLookup(t)||(r=e,!A["".concat(p[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(r)&&(A["".concat(p[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(o,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(r,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(o){if(!s.isValidLookup(t)){n=o;var r,l,u=c,p=[u];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(p,c,o,e,a);else d&&(r=s.pluralResolver.getSuffix(o,a.count)),d&&h&&p.push(u+r),h&&p.push(u+="".concat(s.options.contextSeparator).concat(a.context)),d&&p.push(u+=r);for(;l=p.pop();)s.isValidLookup(t)||(i=l,t=s.getResource(o,e,l,a))}})))}))}})),{res:t,usedKey:o,exactUsedKey:i,usedLng:n,usedNS:r}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,o,i):this.resourceStore.getResource(e,t,o,i)}}]),o}();function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}var F=function(){function e(t){r(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=f.create("languageUtils")}return a(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],o=e.split("-");return this.options.lowerCaseLng?o=o.map((function(e){return e.toLowerCase()})):2===o.length?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),t.indexOf(o[1].toLowerCase())>-1&&(o[1]=P(o[1].toLowerCase()))):3===o.length&&(o[0]=o[0].toLowerCase(),2===o[1].length&&(o[1]=o[1].toUpperCase()),"sgn"!==o[0]&&2===o[2].length&&(o[2]=o[2].toUpperCase()),t.indexOf(o[1].toLowerCase())>-1&&(o[1]=P(o[1].toLowerCase())),t.indexOf(o[2].toLowerCase())>-1&&(o[2]=P(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,o=this;return e?(e.forEach((function(e){if(!t){var i=o.formatLanguageCode(e);o.options.supportedLngs&&!o.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=o.getLanguagePartFromCode(e);if(o.isSupportedCode(i))return t=i;t=o.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var o=e[t];return o||(o=e[this.getScriptPartFromCode(t)]),o||(o=e[this.formatLanguageCode(t)]),o||(o=e[this.getLanguagePartFromCode(t)]),o||(o=e.default),o||[]}},{key:"toResolveHierarchy",value:function(e,t){var o=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],r=function(e){e&&(o.isSupportedCode(e)?n.push(e):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(e))):"string"==typeof e&&r(this.formatLanguageCode(e)),i.forEach((function(e){n.indexOf(e)<0&&r(o.formatLanguageCode(e))})),n}}]),e}(),_=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],N={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function O(){var e={};return _.forEach((function(t){t.lngs.forEach((function(o){e[o]={numbers:t.nr,plurals:N[t.fc]}}))})),e}var z=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.languageUtils=t,this.options=o,this.logger=f.create("pluralResolver"),this.rules=O()}return a(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var o=this,i=[],n=this.getRule(e);return n?(n.numbers.forEach((function(n){var r=o.getSuffix(e,n);i.push("".concat(t).concat(r))})),i):i}},{key:"getSuffix",value:function(e,t){var o=this,i=this.getRule(e);if(i){var n=i.noAbs?i.plurals(t):i.plurals(Math.abs(t)),r=i.numbers[n];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var s=function(){return o.options.prepend&&r.toString()?o.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.logger=f.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return a(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:S,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?R(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?R(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?R(t.nestingPrefix):t.nestingPrefixEscaped||R("$t("),this.nestingSuffix=t.nestingSuffix?R(t.nestingSuffix):t.nestingSuffixEscaped||R(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function(e,t,o,i){var n,r,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(a.formatSeparator)<0){var n=x(t,l,e);return a.alwaysFormat?a.format(n,void 0,o):n}var r=e.split(a.formatSeparator),s=r.shift().trim(),c=r.join(a.formatSeparator).trim();return a.format(x(t,l,s),c,o,i)};this.resetRegExp();var d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?c(a.escape(e)):c(e)}}].forEach((function(t){for(s=0;n=t.regex.exec(e);){if(void 0===(r=u(n[1].trim())))if("function"==typeof d){var o=d(e,n,i);r="string"==typeof o?o:""}else{if(h){r=n[0];continue}a.logger.warn("missed to pass in variable ".concat(n[1]," for interpolating ").concat(e)),r=""}else"string"==typeof r||a.useRawValueToEscape||(r=b(r));if(e=e.replace(n[0],t.safeValue(r)),t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var o,i,r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n({},s);function l(e,t){var o=this.nestingOptionsSeparator;if(e.indexOf(o)<0)return e;var i=e.split(new RegExp("".concat(o,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,a)).replace(/'/g,'"');try{a=JSON.parse(r),t&&(a=n({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(o).concat(r)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;o=this.nestingRegexp.exec(e);){var c=[],u=!1;if(o[0].includes(this.formatSeparator)&&!/{.*}/.test(o[1])){var d=o[1].split(this.formatSeparator).map((function(e){return e.trim()}));o[1]=d.shift(),c=d,u=!0}if((i=t(l.call(this,o[1].trim(),a),a))&&o[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=b(i)),i||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(e)),i=""),u&&(i=c.reduce((function(e,t){return r.format(e,t,s.lng,s)}),i.trim())),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e}}]),e}();var j=function(e){function t(e,o,i){var n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r(this,t),n=c(this,u(t).call(this)),M&&m.call(l(n)),n.backend=e,n.store=o,n.services=i,n.languageUtils=i.languageUtils,n.options=s,n.logger=f.create("backendConnector"),n.state={},n.queue=[],n.backend&&n.backend.init&&n.backend.init(i,s.backend,s),n}return h(t,m),a(t,[{key:"queueLoad",value:function(e,t,o,i){var n=this,r=[],s=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!o.reload&&n.store.hasResourceBundle(e,t)?n.state[a]=2:n.state[a]<0||(1===n.state[a]?s.indexOf(a)<0&&s.push(a):(n.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),r.indexOf(a)<0&&r.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(r.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:r,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,o){var i=e.split("|"),n=i[0],r=i[1];t&&this.emit("failedLoading",n,r,t),o&&this.store.addResourceBundle(n,r,o),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(o){var i,a,l,c,u,d;i=o.loaded,a=r,c=y(i,[n],Object),u=c.obj,d=c.k,u[d]=u[d]||[],l&&(u[d]=u[d].concat(a)),l||u[d].push(a),function(e,t){for(var o=e.indexOf(t);-1!==o;)e.splice(o,1),o=e.indexOf(t)}(o.pending,e),t&&o.errors.push(t),0!==o.pending.length||o.done||(Object.keys(o.loaded).forEach((function(e){s[e]||(s[e]=[]),o.loaded[e].length&&o.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),o.done=!0,o.errors.length?o.callback(o.errors):o.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,o){var i=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[o](e,t,(function(a,l){a&&l&&n<5?setTimeout((function(){i.read.call(i,e,t,o,n+1,2*r,s)}),r):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var r=this.queueLoad(e,t,i,n);if(!r.toLoad.length)return r.pending.length||n(),null;r.toLoad.forEach((function(e){o.loadOne(e)}))}},{key:"load",value:function(e,t,o){this.prepareLoading(e,t,{},o)}},{key:"reload",value:function(e,t,o){this.prepareLoading(e,t,{reload:!0},o)}},{key:"loadOne",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),n=i[0],r=i[1];this.read(n,r,"read",void 0,void 0,(function(i,s){i&&t.logger.warn("".concat(o,"loading namespace ").concat(r," for language ").concat(n," failed"),i),!i&&s&&t.logger.log("".concat(o,"loaded namespace ").concat(r," for language ").concat(n),s),t.loaded(e,i,s)}))}},{key:"saveMissing",value:function(e,t,o,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=o&&""!==o&&(this.backend&&this.backend.create&&this.backend.create(e,t,o,i,null,n({},s,{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,o,i))}}]),t}();function B(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var o={};if("object"===t(e[1])&&(o=e[1]),"string"==typeof e[1]&&(o.defaultValue=e[1]),"string"==typeof e[2]&&(o.tDescription=e[2]),"object"===t(e[2])||"object"===t(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(e){o[e]=i[e]}))}return o},interpolation:{escapeValue:!0,format:function(e,t,o,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function I(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function V(){}var W=new(function(e){function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(r(this,o),e=c(this,u(o).call(this)),M&&m.call(l(e)),e.options=I(t),e.services={},e.logger=f,e.modules={external:[]},i&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,i),c(e,l(e));setTimeout((function(){e.init(t,i)}),0)}return e}return h(o,m),a(o,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;function i(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(o=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=n({},B(),this.options,I(t)),this.format=this.options.interpolation.format,o||(o=V),!this.options.isClone){this.modules.logger?f.init(i(this.modules.logger),this.options):f.init(null,this.options);var r=new F(this.options);this.store=new T(this.options.resources,this.options);var s=this.services;s.logger=f,s.resourceStore=this.store,s.languageUtils=r,s.pluralResolver=new z(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new H(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new j(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var o=arguments.length,i=new Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new D(this.services,this.options),this.translator.on("*",(function(t){for(var o=arguments.length,i=new Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];a.forEach((function(t){e[t]=function(){var o;return(o=e.store)[t].apply(o,arguments)}}));var l=g(),c=function(){e.changeLanguage(e.options.lng,(function(t,i){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(i),o(t,i)}))};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}},{key:"loadResources",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,i=o,n="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase())return i();var r=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){r.indexOf(e)<0&&r.push(e)}))};if(n)s(n);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(r,this.options.ns,i)}else i(null)}},{key:"reloadResources",value:function(e,t,o){var i=g();return e||(e=this.languages),t||(t=this.options.ns),o||(o=V),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),o(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&L.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var o=this;this.isLanguageChangingTo=e;var i=g();this.emit("languageChanging",e);var n=function(e){var n="string"==typeof e?e:o.services.languageUtils.getBestMatchFromCodes(e);n&&(o.language||(o.language=n,o.languages=o.services.languageUtils.toResolveHierarchy(n)),o.translator.language||o.translator.changeLanguage(n),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(n)),o.loadResources(n,(function(e){!function(e,n){n?(o.language=n,o.languages=o.services.languageUtils.toResolveHierarchy(n),o.translator.changeLanguage(n),o.isLanguageChangingTo=void 0,o.emit("languageChanged",n),o.logger.log("languageChanged",n)):o.isLanguageChangingTo=void 0,i.resolve((function(){return o.t.apply(o,arguments)})),t&&t(e,(function(){return o.t.apply(o,arguments)}))}(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(n):n(e):n(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,o){var i=this,r=function e(o,r){var s;if("object"!==t(r)){for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];s=i.options.overloadTranslationOptionHandler([o,r].concat(l))}else s=n({},r);return s.lng=s.lng||e.lng,s.lngs=s.lngs||e.lngs,s.ns=s.ns||e.ns,i.t(o,s)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=o,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],n=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,o){var i=t.services.backendConnector.state["".concat(e,"|").concat(o)];return-1===i||2===i};if(o.precheck){var a=o.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||n&&!s(r,e)))}},{key:"loadNamespaces",value:function(e,t){var o=this,i=g();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){o.options.ns.indexOf(e)<0&&o.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var o=g();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],n=e.filter((function(e){return i.indexOf(e)<0}));return n.length?(this.options.preload=i.concat(n),this.loadResources((function(e){o.resolve(),t&&t(e)})),o):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new o(e,t)}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,r=n({},this.options,t,{isClone:!0}),s=new o(r),a=["store","services","language"];return a.forEach((function(t){s[t]=e[t]})),s.services=n({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new D(s.services,s.options),s.translator.on("*",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];s.emit.apply(s,[e].concat(o))})),s.init(r,i),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}}]),o}());const U=function(e,t,o){var i={lng:t,fallbackLng:o,debug:!1,initImmediate:!1,resources:{}};Object.keys(e).forEach((function(t){i.resources[t]={translation:e[t]}}));var n=W.createInstance();return n.init(i),console.assert(n.isInitialized),n}({en:{"error-head":"ERROR: information","is-forbidden":"is forbidden","troubled-server":"troubled server","unknown-problems":"with unknown problems","was-not-found":"was not found","demo-title":"File Upload Demo","required-server":'You need an upload server listening at <a href="{{- url}}"><tt>{{- url}}</tt></a> to receive the files...',intro:"Upload multiple files with the file dialog or by dragging and dropping images onto the dashed region","upload-label":"Select some files","upload-disabled-title":"The file selection is disabled while uploading!","file-source":{"modal-select-files":"Select files","modal-close":"Close dialog","nav-local":"My device"},"file-sink":{"local-intro":"Download {{amount}} file(s) as ZIP-file","local-button":"Download ZIP-file","modal-close":"Close dialog","nav-local":"My device","upload-success-title":"Successful uploaded","upload-success-body":"You have successfully uploaded your files to {{name}}."},"nextcloud-file-picker":{open:"Nextcloud","open-nextcloud-file-picker":"Select files from your {{name}}","folder-last":"Jump to the last directory","folder-up":"Jump to the home directory","select-files":"Select files","refresh-nextcloud-file-picker":"Connect again","loadpath-nextcloud-file-picker":"Loading directory from {{name}}","load-path-link":"Go to {{path}}","auth-progress":"Authentification in progress","last-modified":"Last modified","mime-type":"Type",filename:"Filename",size:"Size","init-text-1":"Chose your files from {{name}}.","init-text-2":"You need to authenticate first.","auth-info":"A new page will open to connect your account.","connect-nextcloud":"Connect {{name}}","open-in-nextcloud":"Open in {{name}}","no-data":"No data avaible in this folder.","select-folder":"Upload in selected folder","webdav-error":"Something went wrong","add-folder":"Add new folder","new-folder-placeholder":"New folder","load-in-folder":"Load into the current directory","load-to-folder":"Upload to the selected folder"}},de:{"error-head":"FEHLER: Information","is-forbidden":"ist verboten","troubled-server":"macht Probleme am Server","unknown-problems":"mit unbekanntem Problem","was-not-found":"wurde nicht gefunden","demo-title":"Datei Abgabe Demo","server-required":'Es wird unter der URL <a href="{{- url}}"><tt>{{- url}}</tt></a> ein Server benötigt um die Dateien zu empfangen.',intro:"Laden Sie mehrere Dateien mit dem Auswahldialog oder durch Ziehen und Fallenlassen in diesem Bereich hoch","upload-label":"Dateiauswahl","upload-disabled-title":"Die Dateiauswahl ist während dem Hochladvorgang gesperrt!","file-source":{"modal-select-files":"Dateien auswählen","modal-close":"Dialog schließen","nav-local":"Lokaler Computer"},"file-sink":{"local-intro":"{{amount}} Datei(en) als ZIP-Datei herunterladen","local-button":"ZIP-Datei herunterladen","modal-close":"Dialog schließen","nav-local":"Lokaler Computer","upload-success-title":"Erfolgreich hochgeladen","upload-success-body":"Sie haben Ihre Dateien erfolgreich in {{name}} hochgeladen."},"nextcloud-file-picker":{open:"Nextcloud","open-nextcloud-file-picker":"Dateien von {{name}} wählen","folder-last":"In das zuletzt ausgewählte Verzeichnis springen","folder-up":"In das übergeordnete Verzeichnis springen","folder-home":"In das Home Verzeichnis springen","select-files":"Dateien auswählen","refresh-nextcloud-file-picker":"Erneut verbinden","loadpath-nextcloud-file-picker":"Das {{name}} Verzeichnis wird geladen","load-path-link":"Gehe zu {{path}}","auth-progress":"Anmeldung läuft","last-modified":"Geändert","mime-type":"Art",filename:"Name",size:"Größe","init-text-1":"Wählen Sie Ihre Dateien von {{name}}.","init-text-2":"Sie müssen sich zuerst authentifizieren.","auth-info":"Eine neue Seite wird geöffnet, um Ihr Konto zu verbinden.","connect-nextcloud":"{{name}} verbinden","open-in-nextcloud":"In {{name}} öffnen","no-data":"In diesem Ordner befinden sich keine Daten vom benötigten Typ.","select-folder":"In diesem Ordner hochladen","webdav-error":"Etwas ist schief gelaufen","add-folder":"Neuen Ordner erstellen","new-folder-placeholder":"Neuer Ordner","load-in-folder":"Ins aktuelle Verzeichnis laden","load-to-folder":"Im ausgewählten Ordner hochladen"}}},"de","en"),G="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,$=(e,t,o=null)=>{for(;t!==o;){const o=t.nextSibling;e.removeChild(t),t=o}},q=`{{lit-${String(Math.random()).slice(2)}}}`,Y=`\x3c!--${q}--\x3e`,K=new RegExp(`${q}|${Y}`);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class X{constructor(e,t){this.parts=[],this.element=t;const o=[],i=[],n=document.createTreeWalker(t.content,133,null,!1);let r=0,s=-1,a=0;const{strings:l,values:{length:c}}=e;for(;a<c;){const e=n.nextNode();if(null!==e){if(s++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:o}=t;let i=0;for(let e=0;e<o;e++)J(t[e].name,"$lit$")&&i++;for(;i-- >0;){const t=l[a],o=ee.exec(t)[2],i=o.toLowerCase()+"$lit$",n=e.getAttribute(i);e.removeAttribute(i);const r=n.split(K);this.parts.push({type:"attribute",index:s,name:o,strings:r}),a+=r.length-1}}"TEMPLATE"===e.tagName&&(i.push(e),n.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(q)>=0){const i=e.parentNode,n=t.split(K),r=n.length-1;for(let t=0;t<r;t++){let o,r=n[t];if(""===r)o=Q();else{const e=ee.exec(r);null!==e&&J(e[2],"$lit$")&&(r=r.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),o=document.createTextNode(r)}i.insertBefore(o,e),this.parts.push({type:"node",index:++s})}""===n[r]?(i.insertBefore(Q(),e),o.push(e)):e.data=n[r],a+=r}}else if(8===e.nodeType)if(e.data===q){const t=e.parentNode;null!==e.previousSibling&&s!==r||(s++,t.insertBefore(Q(),e)),r=s,this.parts.push({type:"node",index:s}),null===e.nextSibling?e.data="":(o.push(e),s--),a++}else{let t=-1;for(;-1!==(t=e.data.indexOf(q,t+1));)this.parts.push({type:"node",index:-1}),a++}}else n.currentNode=i.pop()}for(const e of o)e.parentNode.removeChild(e)}}const J=(e,t)=>{const o=e.length-t.length;return o>=0&&e.slice(o)===t},Z=e=>-1!==e.index,Q=()=>document.createComment(""),ee=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function te(e,t){const{element:{content:o},parts:i}=e,n=document.createTreeWalker(o,133,null,!1);let r=ie(i),s=i[r],a=-1,l=0;const c=[];let u=null;for(;n.nextNode();){a++;const e=n.currentNode;for(e.previousSibling===u&&(u=null),t.has(e)&&(c.push(e),null===u&&(u=e)),null!==u&&l++;void 0!==s&&s.index===a;)s.index=null!==u?-1:s.index-l,r=ie(i,r),s=i[r]}c.forEach(e=>e.parentNode.removeChild(e))}const oe=e=>{let t=11===e.nodeType?0:1;const o=document.createTreeWalker(e,133,null,!1);for(;o.nextNode();)t++;return t},ie=(e,t=-1)=>{for(let o=t+1;o<e.length;o++){const t=e[o];if(Z(t))return o}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ne=new WeakMap,re=e=>(...t)=>{const o=e(...t);return ne.set(o,!0),o},se=e=>"function"==typeof e&&ne.has(e),ae={},le={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class ce{constructor(e,t,o){this.__parts=[],this.template=e,this.processor=t,this.options=o}update(e){let t=0;for(const o of this.__parts)void 0!==o&&o.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=G?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],o=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let n,r=0,s=0,a=i.nextNode();for(;r<o.length;)if(n=o[r],Z(n)){for(;s<n.index;)s++,"TEMPLATE"===a.nodeName&&(t.push(a),i.currentNode=a.content),null===(a=i.nextNode())&&(i.currentNode=t.pop(),a=i.nextNode());if("node"===n.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,n.name,n.strings,this.options));r++}else this.__parts.push(void 0),r++;return G&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const ue=` ${q} `;class de{constructor(e,t,o,i){this.strings=e,this.values=t,this.type=o,this.processor=i}getHTML(){const e=this.strings.length-1;let t="",o=!1;for(let i=0;i<e;i++){const e=this.strings[i],n=e.lastIndexOf("\x3c!--");o=(n>-1||o)&&-1===e.indexOf("--\x3e",n+1);const r=ee.exec(e);t+=null===r?e+(o?ue:Y):e.substr(0,r.index)+r[1]+r[2]+"$lit$"+r[3]+q}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const he=e=>null===e||!("object"==typeof e||"function"==typeof e),pe=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class fe{constructor(e,t,o){this.dirty=!0,this.element=e,this.name=t,this.strings=o,this.parts=[];for(let e=0;e<o.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new me(this)}_getValue(){const e=this.strings,t=e.length-1;let o="";for(let i=0;i<t;i++){o+=e[i];const t=this.parts[i];if(void 0!==t){const e=t.value;if(he(e)||!pe(e))o+="string"==typeof e?e:String(e);else for(const t of e)o+="string"==typeof t?t:String(t)}}return o+=e[t],o}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class me{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===ae||he(e)&&e===this.value||(this.value=e,se(e)||(this.committer.dirty=!0))}commit(){for(;se(this.value);){const e=this.value;this.value=ae,e(this)}this.value!==ae&&this.committer.commit()}}class ge{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Q()),this.endNode=e.appendChild(Q())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=Q()),e.__insert(this.endNode=Q())}insertAfterPart(e){e.__insert(this.startNode=Q()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;se(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=ae,e(this)}const e=this.__pendingValue;e!==ae&&(he(e)?e!==this.value&&this.__commitText(e):e instanceof de?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):pe(e)?this.__commitIterable(e):e===le?(this.value=le,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,o="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=o:this.__commitNode(document.createTextNode(o)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof ce&&this.value.template===t)this.value.update(e.values);else{const o=new ce(t,e.processor,this.options),i=o._clone();o.update(e.values),this.__commitNode(i),this.value=o}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let o,i=0;for(const n of e)o=t[i],void 0===o&&(o=new ge(this.options),t.push(o),0===i?o.appendIntoPart(this):o.insertAfterPart(t[i-1])),o.setValue(n),o.commit(),i++;i<t.length&&(t.length=i,this.clear(o&&o.endNode))}clear(e=this.startNode){$(this.startNode.parentNode,e.nextSibling,this.endNode)}}class be{constructor(e,t,o){if(this.value=void 0,this.__pendingValue=void 0,2!==o.length||""!==o[0]||""!==o[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=o}setValue(e){this.__pendingValue=e}commit(){for(;se(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=ae,e(this)}if(this.__pendingValue===ae)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=ae}}class ve extends fe{constructor(e,t,o){super(e,t,o),this.single=2===o.length&&""===o[0]&&""===o[1]}_createPart(){return new ye(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class ye extends me{}let we=!1;(()=>{try{const e={get capture(){return we=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class Ee{constructor(e,t,o){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=o,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;se(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=ae,e(this)}if(this.__pendingValue===ae)return;const e=this.__pendingValue,t=this.value,o=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),i=null!=e&&(null==t||o);o&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=xe(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=ae}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const xe=e=>e&&(we?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;function Ce(e){let t=Re.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},Re.set(e.type,t));let o=t.stringsArray.get(e.strings);if(void 0!==o)return o;const i=e.strings.join(q);return o=t.keyString.get(i),void 0===o&&(o=new X(e,e.getTemplateElement()),t.keyString.set(i,o)),t.stringsArray.set(e.strings,o),o}const Re=new Map,ke=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Se=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(e,t,o,i){const n=t[0];if("."===n){return new ve(e,t.slice(1),o).parts}if("@"===n)return[new Ee(e,t.slice(1),i.eventContext)];if("?"===n)return[new be(e,t.slice(1),o)];return new fe(e,t,o).parts}handleTextExpression(e){return new ge(e)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const Me=(e,...t)=>new de(e,t,"html",Se)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,Te=(e,t)=>`${e}--${t}`;let Le=!0;void 0===window.ShadyCSS?Le=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Le=!1);const Ae=e=>t=>{const o=Te(t.type,e);let i=Re.get(o);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},Re.set(o,i));let n=i.stringsArray.get(t.strings);if(void 0!==n)return n;const r=t.strings.join(q);if(n=i.keyString.get(r),void 0===n){const o=t.getTemplateElement();Le&&window.ShadyCSS.prepareTemplateDom(o,e),n=new X(t,o),i.keyString.set(r,n)}return i.stringsArray.set(t.strings,n),n},De=["html","svg"],Pe=new Set,Fe=(e,t,o)=>{Pe.add(e);const i=o?o.element:document.createElement("template"),n=t.querySelectorAll("style"),{length:r}=n;if(0===r)return void window.ShadyCSS.prepareTemplateStyles(i,e);const s=document.createElement("style");for(let e=0;e<r;e++){const t=n[e];t.parentNode.removeChild(t),s.textContent+=t.textContent}(e=>{De.forEach(t=>{const o=Re.get(Te(t,e));void 0!==o&&o.keyString.forEach(e=>{const{element:{content:t}}=e,o=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{o.add(e)}),te(e,o)})})})(e);const a=i.content;o?function(e,t,o=null){const{element:{content:i},parts:n}=e;if(null==o)return void i.appendChild(t);const r=document.createTreeWalker(i,133,null,!1);let s=ie(n),a=0,l=-1;for(;r.nextNode();){l++;for(r.currentNode===o&&(a=oe(t),o.parentNode.insertBefore(t,o));-1!==s&&n[s].index===l;){if(a>0){for(;-1!==s;)n[s].index+=a,s=ie(n,s);return}s=ie(n,s)}}}(o,s,a.firstChild):a.insertBefore(s,a.firstChild),window.ShadyCSS.prepareTemplateStyles(i,e);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(o){a.insertBefore(s,a.firstChild);const e=new Set;e.add(s),te(o,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const _e={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},Ne=(e,t)=>t!==e&&(t==t||e==e),Oe={attribute:!0,type:String,converter:_e,reflect:!1,hasChanged:Ne};class ze extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,o)=>{const i=this._attributeNameForProperty(o,t);void 0!==i&&(this._attributeToPropertyMap.set(i,o),e.push(i))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=Oe){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const o="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(o){const i=this[e];this[t]=o,this._requestUpdate(e,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||Oe}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const o of t)this.createProperty(o,e[o])}}static _attributeNameForProperty(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,o=Ne){return o(e,t)}static _propertyValueFromAttribute(e,t){const o=t.type,i=t.converter||_e,n="function"==typeof i?i:i.fromAttribute;return n?n(e,o):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const o=t.type,i=t.converter;return(i&&i.toAttribute||_e.toAttribute)(e,o)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,o){t!==o&&this._attributeToProperty(e,o)}_propertyToAttribute(e,t,o=Oe){const i=this.constructor,n=i._attributeNameForProperty(e,o);if(void 0!==n){const e=i._propertyValueToAttribute(t,o);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(n):this.setAttribute(n,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const o=this.constructor,i=o._attributeToPropertyMap.get(e);if(void 0!==i){const e=o.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=o._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}_requestUpdate(e,t){let o=!0;if(void 0!==e){const i=this.constructor,n=i.getPropertyOptions(e);i._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):o=!1}!this._hasRequestedUpdate&&o&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this._requestUpdate(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}ze.finalized=!0;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const He="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,je=Symbol();class Be{constructor(e,t){if(t!==je)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(He?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const Ie=(e,...t)=>{const o=t.reduce((t,o,i)=>t+(e=>{if(e instanceof Be)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(o)+e[i+1],e[0]);return new Be(o,je)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const Ve={};class We extends ze{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(void 0===e)this._styles=[];else if(Array.isArray(e)){const t=(e,o)=>e.reduceRight((e,o)=>Array.isArray(o)?t(o,e):(e.add(o),e),o),o=t(e,new Set),i=[];o.forEach(e=>i.unshift(e)),this._styles=i}else this._styles=[e]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?He?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==Ve&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return Ve}}We.finalized=!0,We.render=(e,t,o)=>{if(!o||"object"!=typeof o||!o.scopeName)throw new Error("The `scopeName` option is required.");const i=o.scopeName,n=ke.has(t),r=Le&&11===t.nodeType&&!!t.host,s=r&&!Pe.has(i),a=s?document.createDocumentFragment():t;if(((e,t,o)=>{let i=ke.get(t);void 0===i&&($(t,t.firstChild),ke.set(t,i=new ge(Object.assign({templateFactory:Ce},o))),i.appendInto(t)),i.setValue(e),i.commit()})(e,a,Object.assign({templateFactory:Ae(i)},o)),s){const e=ke.get(a);ke.delete(a);const o=e.value instanceof ce?e.value.template:void 0;Fe(i,a,o),$(t,t.firstChild),t.appendChild(a),ke.set(t,e)}!n&&r&&window.ShadyCSS.styleElement(t.host)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Ue=new WeakMap,Ge=re(e=>t=>{if(!(t instanceof ge))throw new Error("unsafeHTML can only be used in text bindings");const o=Ue.get(t);if(void 0!==o&&he(e)&&e===o.value&&t.value===o.fragment)return;const i=document.createElement("template");i.innerHTML=e;const n=document.importNode(i.content,!0);t.setValue(n),Ue.set(t,{value:e,fragment:n})}),$e=new WeakMap;function qe(e,t){const o=function(e){const t=[];let o=e;for(;o;)t.push(o),o=Object.getPrototypeOf(o);return t}(t);for(const t of o)if($e.get(t)===e)return!0;return!1}let Ye=Math.round(1e5*Math.random());const Ke="-|\\.|[0-9]|[a-z]",Xe=new RegExp(`[a-z](${Ke})*-(${Ke})*`),Je=(e,t)=>{const o=`${e}-${Ye+=1}`;return((e,t)=>!!t.get(e))(o,t)?Je(e,t):o};function Ze(e,t=customElements){if(o=e,null===Xe.exec(o))throw new Error("tagName is invalid");var o;return Je(e,t)}const Qe=new Map,et=(e,t)=>Qe.set(t,e),tt=(e,t,o=customElements)=>{et(e,t),o.define(e,class extends t{})},ot=(e,t,o)=>{const i=customElements;if(!(e=>Object.prototype.isPrototypeOf.call(HTMLElement,e))(t))return((e,t,o)=>{const i=Ze(e,t);if(!o)throw new Error("Lazy scoped elements requires the use of tags cache");return o.set(e,i),i})(e,i,o);if(t===customElements.get(e))return et(e,t),e;const n=Ze(e,i);return tt(n,t,i),n};function it(e,t,o){return(e=>Qe.get(e))(t)||o&&o.get(e)||ot(e,t,o)}const nt=new RegExp("<\\/?([a-z](-|\\.|[0-9]|[a-z])*-(-|\\.|[0-9]|[a-z])*)","g"),rt=new Map,st=(e,t,o,i)=>{const n=e.map(e=>{let o=e;const n=(e=>{const t=[];let o;for(;null!==(o=nt.exec(e));)t.push(o);return t})(e);for(let e=n.length-1;e>=0;e-=1){const r=n[e],s=t[r[1]],a=it(r[1],s,i),l=r.index+r[0].length-r[1].length,c=l+r[1].length;o=o.slice(0,l)+a+o.slice(c)}return o});return o.set(e,n),n};let at=!0;const{ShadyCSS:lt}=window;(void 0===lt||void 0===lt.prepareTemplateDom)&&(at=!1);const ct=new WeakMap,ut=new WeakMap,dt=e=>(ut.has(e)||ut.set(e,new Map),ut.get(e)),ht=(e,t,o,i)=>e.map(e=>e instanceof de?pt(e,t,o,i):Array.isArray(e)?ht(e,t,o,i):e),pt=(e,t,o,i)=>new de(function(e,t,o=rt,i){return o.get(e)||st(e,t,o,i)}(e.strings,t,o,i),ht(e.values,t,o,i),e.type,e.processor),ft=(e,t,o,i)=>n=>{const r=pt(n,t,o,i);return(e=>t=>{const o=((e,t)=>`${e}--${t}`)(t.type,e);let i=Re.get(o);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},Re.set(o,i));let n=i.stringsArray.get(t.strings);if(void 0!==n)return n;const r=t.strings.join(q);if(n=i.keyString.get(r),void 0===n){const o=t.getTemplateElement();at&&lt.prepareTemplateDom(o,e),n=new X(t,o),i.keyString.set(r,n)}return i.stringsArray.set(t.strings,n),n})(e)(r)},mt=(gt=e=>class extends e{static get scopedElements(){return{}}static render(e,t,o){if(!o||"object"!=typeof o||!o.scopeName)throw new Error("The `scopeName` option is required.");const{scopeName:i}=o,n=(r=this,ct.has(r)||ct.set(r,new Map),ct.get(r));var r;const s=dt(this),{scopedElements:a}=this;return super.render(e,t,{...o,templateFactory:ft(i,a,n,s)})}defineScopedElement(e,t){return function(e,t,o){const i=o.get(e);i?void 0===customElements.get(i)&&tt(i,t,customElements):o.set(e,it(e,t,o))}(e,t,dt(this.constructor))}static getScopedTagName(e){const t=this.scopedElements[e];return t?it(e,t,dt(this)):dt(this).get(e)}},e=>{if(qe(gt,e))return e;const t=gt(e);return $e.set(t,gt),t});var gt;class bt extends We{_(e){return null===this.shadowRoot?this.querySelector(e):this.shadowRoot.querySelector(e)}}const vt=(e,t,o)=>{if(customElements.get(e)===t)return!0;if(!("attachShadow"in Element.prototype&&"getRootNode"in Element.prototype&&window.customElements)){for(var i=document.getElementsByTagName(e),n=0;n<i.length;n++)i[n].innerHTML="<span style='border: 1px solid red; font-size: 0.8em; opacity: 0.5; padding: 0.2em;'>☹ Your browser is not supported ☹</span>";return!1}return customElements.define(e,t,o),!0},yt=(e,t)=>{let o="";return o=void 0===t?e:"local/"+e+"/"+t,new URL(o,new URL("..",import.meta.url).href).href};async function wt(e,t){for(let o=0;o<e.length;o++)await t(e[o],o,e)}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Et=new WeakMap,xt=re((...e)=>t=>{let o=Et.get(t);void 0===o&&(o={lastRenderedIndex:2147483647,values:[]},Et.set(t,o));const i=o.values;let n=i.length;o.values=e;for(let r=0;r<e.length&&!(r>o.lastRenderedIndex);r++){const s=e[r];if(he(s)||"function"!=typeof s.then){t.setValue(s),o.lastRenderedIndex=r;break}r<n&&s===i[r]||(o.lastRenderedIndex=2147483647,n=0,Promise.resolve(s).then(e=>{const i=o.values.indexOf(s);i>-1&&i<o.lastRenderedIndex&&(o.lastRenderedIndex=i,t.setValue(e),t.commit())}))}}),Ct='\n<svg version="1.1" id="Layer_2_1_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">\n<g>\n\t<path d="M38.2,98.7c-1.1,0-2.2-0.6-2.8-1.6c-0.5-0.8-0.6-1.8-0.3-2.6l8.9-37.8H24.5c-1.2,0-2.2-0.6-2.8-1.5c-0.6-1-0.7-2.2-0.1-3.2\n\t\tl0.2-0.3L54.9,3.1c0.9-1.6,2.3-1.8,2.8-1.8c1.1,0,2.2,0.6,2.8,1.6c0.5,0.8,0.6,1.7,0.3,2.6l-6.9,30.4L75.6,36\n\t\tc1.1,0,2.2,0.6,2.8,1.5c0.6,1,0.7,2.2,0.1,3.2l-0.2,0.3L40.8,97.4l-0.2,0.2C40.3,97.9,39.5,98.7,38.2,98.7z M28.6,51.2h18.1\n\t\tc1.8,0,3.2,1.5,3.2,3.4v0.3l-6.8,29l28.2-42.4l-20.3-0.1c-1.8,0-3.2-1.5-3.2-3.4v-0.3l5-21.9L28.6,51.2z M75.5,41.5\n\t\tC75.5,41.5,75.5,41.5,75.5,41.5L75.5,41.5z M51.1,35.9L51.1,35.9C51.2,35.9,51.1,35.9,51.1,35.9z"/>\n</g>\n</svg>\n';function Rt(e){return yt("dbp-common","icons/"+encodeURI(e)+".svg")}const kt={};async function St(e){if(void 0===kt[e]){let t=async function(e){const t=Rt(e),o=await fetch(t);if(!o.ok)return Ge(Ct);let i=await o.text();return-1===i.indexOf("<svg")?Ge(Ct):(i=i.slice(i.indexOf("<svg")),Ge(i))}(e);return kt[e]=t,t}return kt[e]}class Mt extends We{constructor(){super(),this.name="bolt"}static get properties(){return{name:{type:String}}}static get styles(){return Ie`
            :host {
                display: inline-block;
                height: 1em;
                top: .125em;
                position: relative;
            }

            svg {
                height: 100%;
            }

            svg * {
                fill: currentColor;
            }
        `}render(){let e=St(this.name);return Me`
            ${xt(e)}
        `}}class Tt extends We{constructor(){super(),this.text=""}static get properties(){return{text:{type:String}}}static get styles(){return Ie`
        .outer {
            display: inline-block;
        }
        .inner {
            display: flex;
        }
        .ring {
          display: inline-block;
          position: relative;
          width: 1em;
          height: 1em;
        }
        .ring div {
          box-sizing: border-box;
          display: block;
          position: absolute;
          width: 100%;
          height: 100%;
          border: 0.2em solid currentColor;
          border-radius: 50%;
          animation: ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
          border-color: currentColor transparent transparent transparent;
        }
        .ring div:nth-child(1) {
          animation-delay: -0.45s;
        }
        .ring div:nth-child(2) {
          animation-delay: -0.3s;
        }
        .ring div:nth-child(3) {
          animation-delay: -0.15s;
        }
        @keyframes ring {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }
        .text {
            display: inline-block;
            margin-left: 0.5em;
            font-size: 0.7em;
        }`}render(){const e=""!==this.text?Me`<div class="text">${this.text}</div>`:Me``;return Me`<div class="outer"><div class="inner"><div class="ring"><div></div><div></div><div></div><div></div></div>${e}</div></div>`}}function Lt(){return Ie`
        :host {
            --dbp-primary-bg-color: var(--dbp-override-primary-bg-color, #007bff);
            --dbp-primary-text-color: var(--dbp-override-primary-text-color, #fff);
            --dbp-primary-button-border: var(--dbp-override-primary-button-border, #007bff);
            --dbp-secondary-bg-color: var(--dbp-override-secondary-bg-color, #6c757d);
            --dbp-secondary-text-color: var(--dbp-override-secondary-text-color, #fff);
            --dbp-info-bg-color: var(--dbp-override-info-bg-color, #17a2b8);
            --dbp-info-text-color: var(--dbp-override-info-text-color, #fff);
            --dbp-success-bg-color: var(--dbp-override-success-bg-color, #28a745);
            --dbp-success-text-color: var(--dbp-override-success-text-color, #fff);
            --dbp-warning-bg-color: var(--dbp-override-warning-bg-color, #ffc107);
            --dbp-warning-text-color: var(--dbp-override-warning-text-color, #343a40);
            --dbp-danger-bg-color: var(--dbp-override-danger-bg-color, #dc3545);
            --dbp-danger-text-color: var(--dbp-override-danger-text-color, #fff);
            --dbp-light: var(--dbp-override-light, #f8f9fa);
            --dbp-dark: var(--dbp-override-dark, #343a40);
            --dbp-muted-text: var(--dbp-override-muted-text, #6c757d);
            --dbp-border-radius: var(--dbp-override-border-radius, 0px);
            --dbp-border-width: var(--dbp-override-border-width, 1px);
            --dbp-placeholder-color: #777; 
        }
    `}function At(e=!0){const t=e?Ie`
        blockquote, body, dd, dl, dt, fieldset, figure, h1, h2, h3, h4, h5, h6, hr, html, iframe, legend, li, ol, p, pre, textarea, ul {
            margin: 0;
            padding: 0;
        }
    `:Ie``;return Ie`
        h2 {
            font-weight: 300;
        }

        code {
            background-color: var(--dbp-light);
            color: var(--dbp-danger-bg-color);
            font-size: 1em;
            line-height: 1.5em;
            font-weight: normal;
            padding: 0.25em 0.5em 0.25em;
        }

        .field:not(:last-child) {
            margin-bottom: 0.75rem;
        }

        .field.has-addons {
            display: flex;
            justify-content: flex-start;
        }

        .input, .textarea, .select select {
            border: solid 1px #aaa;
            border-radius: var(--dbp-border-radius);
            padding-bottom: calc(.375em - 1px);
            padding-left: calc(.625em - 1px);
            padding-right: calc(.625em - 1px);
            padding-top: calc(.375em - 1px);
        }

        .input::placeholder, .textarea::placeholder, .select select::placeholder {
            color: var(--dbp-placeholder-color);
        }

        input, ::placeholder, textarea, select, .select select {
            font-size: inherit;
            font-family: inherit;
        }

        .control {
            box-sizing: border-box;
            clear: both;
            font-size: 1rem;
            position: relative;
            text-align: left;
        }

        .label {
            margin-bottom: .5em;
            display: block;
            font-weight: 600;
        }

        .hidden { display: none; }

        a {
            color: var(--dbp-override-muted-text);
            cursor: pointer;
            text-decoration: none;
        }

        a.is-download {
            border-bottom: 1px solid rgba(0,0,0,0.4);
            transition: background-color 0.15s, color 0.15s;
        }

        a.is-download:hover {
            color: #fff;
            background-color: #000;
        }

        /* Inline SVG don't work in our web-components */
        /*
        a.is-download:after, a.is-download:hover:after {
            content: "\\00a0\\00a0\\00a0\\00a0";
            background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%228.3021mm%22%20width%3D%228.2977mm%22%20version%3D%221.1%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20viewBox%3D%220%200%2029.401607%2029.41681%22%3E%3Cg%20style%3D%22stroke-width%3A2.1%22%20transform%3D%22translate(-271.68%20-367.92)%22%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A2.1%3Bfill%3Anone%22%20d%3D%22m300.13%20390.41v2.3918c0%201.9813-1.6064%203.5877-3.5877%203.5877h-20.326c-1.9813%200-3.5877-1.6064-3.5877-3.5877v-2.3918%22%2F%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A2.1%3Bfill%3Anone%22%20d%3D%22m286.38%20390.27v-21.384%22%2F%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A2.1%3Bfill%3Anone%22%20d%3D%22m295.13%20381.52-8.7501%208.7462-8.7501-8.7462%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center center;
            margin: 0 0.25% 0 1.5%;
            font-size: 94%;
        }
        */

        .title {
            color: #363636;
            font-size: 2rem;
            font-weight: 600;
            line-height: 1.125;
        }

        ${t}

        .button[disabled], .file-cta[disabled], .file-name[disabled], .input[disabled], .pagination-ellipsis[disabled],
        .pagination-link[disabled], .pagination-next[disabled], .pagination-previous[disabled], .select fieldset[disabled] select,
        .select select[disabled], .textarea[disabled], fieldset[disabled] .button, fieldset[disabled] .file-cta,
        fieldset[disabled] .file-name, fieldset[disabled] .input, fieldset[disabled] .pagination-ellipsis,
        fieldset[disabled] .pagination-link, fieldset[disabled] .pagination-next, fieldset[disabled] .pagination-previous,
        fieldset[disabled] .select select, fieldset[disabled] .textarea {
            cursor: not-allowed;
        }

        .input, .select select, .textarea {
            background-color: #fff;
            border-color: var(--dbp-muted);
            border-radius: var(--dbp-border-radius);
            color: var(--dbp-muted);
        }

        *, ::after, ::before {
            box-sizing: inherit;
        }

        select:not(.select) {
            -moz-appearance: none;
            -webkit-appearance: none;
            background: calc(100% - 0.2rem) center no-repeat url("${o=Rt("chevron-down"),new Be(String(o),je)}");
            background-size: 25%;
            border-color: black;
            border-width: 1px;
            border-radius: var(--dbp-border-radius);
            color: black;
            padding: 0.14rem 1.0rem 0.14rem 0.14rem;
            border-style: solid;
        }
    `;var o}function Dt(){return Ie`
        button.button, .button, button.dt-button {
            border-style: solid;
            border-color: black;
            border-width: 1px;
            border-radius: var(--dbp-border-radius);
            color: black;
            cursor: pointer;
            justify-content: center;
            padding-bottom: calc(0.375em - 1px);
            padding-left: 0.75em;
            padding-right: 0.75em;
            padding-top: calc(0.375em - 1px);
            text-align: center;
            white-space: nowrap;
            font-size: inherit;
            font-family: inherit;
            transition: background-color 0.15s ease 0s, color 0.15s ease 0s;
            background: none;
        }

        button.button:hover, .button:hover, button.dt-button:hover, button.dt-button:hover:not(.disabled) {
            color: white;
            background: none;
            background-color: black;
        }

        button.button.is-small, .button.is-small {
            border-radius: calc(var(--dbp-border-radius) / 2);
            font-size: .75rem;
        }

        button.button.is-primary, .button.is-primary {
            background-color: var(--dbp-primary-bg-color);
            border: var(--dbp-primary-button-border);
            color: var(--dbp-primary-text-color);
        }

        button.button.is-info, .button.is-info {
            background-color: var(--dbp-info-bg-color);
            color: var(--dbp-info-text-color);
        }

        button.button.is-success, .button.is-success {
            background-color: var(--dbp-success-bg-color);
            color: var(--dbp-success-text-color);
        }

        button.button.is-warning, .button.is-warning {
            background-color: var(--dbp-warning-bg-color);
            color: var(--dbp-warning-text-color);
        }

        .button.button.is-danger, .button.is-danger {
            background-color: var(--dbp-danger-bg-color);
            color: var(--dbp-danger-text-color);
        }

        button.button[disabled], .button[disabled], fieldset[disabled] .button {
            opacity: .5;
            cursor: not-allowed;
        }
    `}mt(We);var Pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ft(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return _t(null==t&&o.path)}},o.exports),o.exports}function _t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Nt=Ft((function(e,t){window,e.exports=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=26)}([function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(11),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function l(e){return null!==e&&"object"===i(e)}function c(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!=e)if("object"!==i(e)&&(e=[e]),s(e))for(var o=0,n=e.length;o<n;o++)t.call(null,e[o],o,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function o(o,n){"object"===i(t[n])&&"object"===i(o)?t[n]=e(t[n],o):t[n]=o}for(var n=0,r=arguments.length;n<r;n++)u(arguments[n],o);return t},deepMerge:function e(){var t={};function o(o,n){"object"===i(t[n])&&"object"===i(o)?t[n]=e(t[n],o):"object"===i(o)?t[n]=e({},o):t[n]=o}for(var n=0,r=arguments.length;n<r;n++)u(arguments[n],o);return t},extend:function(e,t,o){return u(t,(function(t,i){e[i]=o&&"function"==typeof t?n(t,o):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(10),r=o(43),s=o(44),a=o(4).merge;e.exports={axios:n,encodePath:function(e){var t=e.replace(/\//g,"__PATH_SEPARATOR_POSIX__").replace(/\\\\/g,"__PATH_SEPARATOR_WINDOWS__");return encodeURIComponent(t).split("__PATH_SEPARATOR_WINDOWS__").join("\\\\").split("__PATH_SEPARATOR_POSIX__").join("/")},joinURL:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(t.reduce((function(e,t,o){return(0===o||"/"!==t||"/"===t&&"/"!==e[e.length-1])&&e.push(t),e}),[]))},prepareRequestOptions:function(e,t){t.httpAgent&&(e.httpAgent=t.httpAgent),t.httpsAgent&&(e.httpsAgent=t.httpsAgent),t.data&&(e.data=t.data),t.headers&&"object"===i(t.headers)&&(e.headers=a(e.headers||{},t.headers)),"boolean"==typeof t.withCredentials&&(e.withCredentials=t.withCredentials),t.maxContentLength&&(e.maxContentLength=t.maxContentLength),t.onUploadProgress&&"function"==typeof t.onUploadProgress&&(e.onUploadProgress=t.onUploadProgress),t._digest&&(e._digest=t._digest,e.validateStatus=function(e){return e>=200&&e<300||401==e})},request:function(e){return s(e)}}},function(e,t,o){var i=o(58);e.exports={handleResponseCode:function(e){var t,o=parseInt(e.status,10);if(o>=400)throw(t=new Error("Invalid response: "+o+" "+e.statusText)).status=o,t;return e},processGlobFilter:function(e,t){return e.filter((function(e){return i(e.filename,t,{matchBase:!0})}))},processResponsePayload:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o?{data:t,headers:e.headers||{}}:t}}},function(e,t,o){var i="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+i+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,o){if(t)for(var i=Object.keys(t),n=i.length,r=0;r<n;r++)e[i[r]]="strict"===o?[t[i[r]]]:t[i[r]]},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,o){var i={};if(!e)return t;for(var n=0;n<o.length;n++)void 0!==e[o[n]]?i[o[n]]=e[o[n]]:i[o[n]]=t[o[n]];return i},t.isName=function(e){return!(null==n.exec(e))},t.getAllMatches=function(e,t){for(var o=[],i=t.exec(e);i;){for(var n=[],r=i.length,s=0;s<r;s++)n.push(i[s]);o.push(n),i=t.exec(e)}return o},t.nameRegexp=i},function(e,t){function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if("object"!==n(e)||null===e||"[object Object]"!=Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e)?Object.assign({},e):Object.setPrototypeOf(Object.assign({},e),Object.getPrototypeOf(e))}function s(e,t){var i=r(e);return Object.keys(t).forEach((function(e){i.hasOwnProperty(e)?Array.isArray(t[e])?i[e]=Array.isArray(i[e])?[].concat(o(i[e]),o(t[e])):o(t[e]):"object"===n(t[e])&&t[e]?i[e]="object"===n(i[e])&&i[e]?s(i[e],t[e]):r(t[e]):i[e]=t[e]:i[e]=t[e]})),i}e.exports={merge:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(var i=null,n=[].concat(t);n.length>0;){var a=n.shift();i=i?s(i,a):r(a)}return i}}},function(e,t,o){var i=o(47),n=i.decode,r=i.encode;e.exports={decodeHTMLEntities:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},fromBase64:function(e){return n(e)},toBase64:function(e){return r(e)}}},function(e,t,o){var i=o(3),n=o(3).buildOptions,r=o(64),s="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,i.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};t.defaultOptions=a;var l=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function c(e,t,o){var i=e[7]||o,n=e[12];return n&&(t.trimValues&&(n=n.trim()),n=h(n=t.tagValueProcessor(n,i),t.parseNodeValue,t.parseTrueNumberOnly)),n}function u(e){return"]]>"===e[4]?4:"/"===e[10]?2:void 0!==e[8]&&"/"===e[8].substr(e[8].length-1)?3:1}function d(e,t){if(t.ignoreNameSpace){var o=e.split(":"),i="/"===e.charAt(0)?"/":"";if("xmlns"===o[0])return"";2===o.length&&(e=i+o[1])}return e}function h(e,t,o){var n;return t&&"string"==typeof e?(""===e.trim()||isNaN(e)?n="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?n=Number.parseInt(e,16):-1!==e.indexOf(".")?(n=Number.parseFloat(e),e=e.replace(/0+$/,"")):n=Number.parseInt(e,10),o&&(n=String(n)===e?n:e)),n):i.isExist(e)?e:""}t.props=l;var p=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function f(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");for(var o=i.getAllMatches(e,p),n=o.length,r={},s=0;s<n;s++){var a=d(o[s][1],t);a.length&&(void 0!==o[s][4]?(t.trimValues&&(o[s][4]=o[s][4].trim()),o[s][4]=t.attrValueProcessor(o[s][4],a),r[t.attributeNamePrefix+a]=h(o[s][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(r[t.attributeNamePrefix+a]=!0))}if(!Object.keys(r).length)return;if(t.attrNodeName){var l={};return l[t.attrNodeName]=r,l}return r}}t.getTraversalObj=function(e,t){t=n(t,a,l),e=e.replace(/<!--[\s\S]*?-->/g,"");for(var o=new r("!xml"),d=o,h=new RegExp(s,"g"),p=h.exec(e),m=h.exec(e);p;){var g=u(p);if(2===g)d.parent&&p[12]&&(d.parent.val=i.getValue(d.parent.val)+""+c(p,t,d.parent.tagname)),t.stopNodes.length&&t.stopNodes.includes(d.tagname)&&(d.child=[],null==d.attrsMap&&(d.attrsMap={}),d.val=e.substr(d.startIndex+1,p.index-d.startIndex-1)),d=d.parent;else if(4===g)if(t.cdataTagName){var b=new r(t.cdataTagName,d,p[3]);b.attrsMap=f(p[8],t),d.addChild(b),d.val=i.getValue(d.val)+t.cdataPositionChar,p[12]&&(d.val+=c(p,t))}else d.val=(d.val||"")+(p[3]||"")+c(p,t);else if(3===g){d&&p[12]&&(d.val=i.getValue(d.val)+""+c(p,t));var v=new r(t.ignoreNameSpace?p[7]:p[5],d,"");p[8]&&p[8].length>0&&(p[8]=p[8].substr(0,p[8].length-1)),v.attrsMap=f(p[8],t),d.addChild(v)}else{var y=new r(t.ignoreNameSpace?p[7]:p[5],d,c(p,t));t.stopNodes.length&&t.stopNodes.includes(y.tagname)&&(y.startIndex=p.index+p[1].length),y.attrsMap=f(p[8],t),d.addChild(y),d=y}p=m,m=h.exec(e)}return o}},function(e,t){var o,i,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(o===setTimeout)return setTimeout(e,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];c.push(new f(e,t)),1!==c.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,o){var i=o(51);function n(e){var t=e;return"/"!==t[0]&&(t="/"+t),/^.+\/$/.test(t)&&(t=t.substr(0,t.length-1)),decodeURIComponent(t)}e.exports={extractURLPath:function(e){var t=new i(e).pathname;return t.length<=0&&(t="/"),n(t)},normaliseHREF:function(e){return e.replace(/^https?:\/\/[^\/]+/,"")},normalisePath:n}},function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(62),r=o(69),s=o(5).decodeHTMLEntities;function a(e,t,o){var i=r.get(e,t);return"array"===o&&!1===Array.isArray(i)?[i]:"object"===o&&Array.isArray(i)?i[0]:i}e.exports={parseXML:function(e){return new Promise((function(t){t(function(e){var t=e.multistatus;if(!t)throw new Error("Invalid response: No root multistatus found");var o={};return o.multistatus=Array.isArray(t)?t[0]:t,r.set(o,"multistatus.response",a(o,"multistatus.response","array")),r.set(o,"multistatus.response",r.get(o,"multistatus.response").map((function(e){return function(e){var t=Object.assign({},e);return r.set(t,"propstat",a(t,"propstat","object")),r.set(t,"propstat.prop",a(t,"propstat.prop","object")),t}(e)}))),o}(n.parse(e,{arrayMode:!1,ignoreNameSpace:!0})))}))},prepareFileFromProps:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o(24),a=e.getlastmodified,l=void 0===a?null:a,c=e.getcontentlength,u=void 0===c?"0":c,d=e.resourcetype,h=void 0===d?null:d,p=e.getcontenttype,f=void 0===p?null:p,m=e.getetag,g=void 0===m?null:m,b=h&&"object"===i(h)&&void 0!==h.collection?"directory":"file",v=s(t),y={filename:v,basename:r.basename(v),lastmod:l,size:parseInt(u,10),type:b,etag:"string"==typeof g?g.replace(/"/g,""):null};return"file"===b&&(y.mime=f&&"string"==typeof f?f.split(";")[0]:""),n&&(y.props=e),y},translateDiskSpace:function(e){switch(e.toString()){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(e,10)}}}},function(e,t,o){e.exports=o(27)},function(e,t,o){e.exports=function(e,t){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return e.apply(t,o)}}},function(e,t,o){var i=o(0);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,o){if(!t)return e;var r;if(o)r=o(t);else if(i.isURLSearchParams(t))r=t.toString();else{var s=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+"="+n(e))})))})),r=s.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},function(e,t,o){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,o){(function(t){var i=o(0),n=o(32),r={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=o(15)),a),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(r)})),e.exports=l}).call(this,o(7))},function(e,t,o){var i=o(0),n=o(33),r=o(12),s=o(35),a=o(38),l=o(39),c=o(16);e.exports=function(e){return new Promise((function(t,u){var d=e.data,h=e.headers;i.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password||"";h.Authorization="Basic "+btoa(f+":"+m)}var g=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),r(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:o,config:e,request:p};n(t,u,i),p=null}},p.onabort=function(){p&&(u(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){u(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(c(t,e,"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var b=o(40),v=(e.withCredentials||l(g))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&i.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),u(e),p=null)})),void 0===d&&(d=null),p.send(d)}))}},function(e,t,o){var i=o(34);e.exports=function(e,t,o,n,r){var s=new Error(e);return i(s,t,o,n,r)}},function(e,t,o){var i=o(0);e.exports=function(e,t){t=t||{};var o={},n=["url","method","params","data"],r=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(n,(function(e){void 0!==t[e]&&(o[e]=t[e])})),i.forEach(r,(function(n){i.isObject(t[n])?o[n]=i.deepMerge(e[n],t[n]):void 0!==t[n]?o[n]=t[n]:i.isObject(e[n])?o[n]=i.deepMerge(e[n]):void 0!==e[n]&&(o[n]=e[n])})),i.forEach(s,(function(i){void 0!==t[i]?o[i]=t[i]:void 0!==e[i]&&(o[i]=e[i])}));var a=n.concat(r).concat(s),l=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return i.forEach(l,(function(i){void 0!==t[i]?o[i]=t[i]:void 0!==e[i]&&(o[i]=e[i])})),o}},function(e,t,o){function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,o){var i=o(45),n=null;e.exports={getPatcher:function(){return n||(n=new i),n}}},function(e,t,o){var i=o(5).toBase64,n=o(49),r=n.md5,s=n.ha1Compute;e.exports={generateBasicAuthHeader:function(e,t){var o=i("".concat(e,":").concat(t));return"Basic ".concat(o)},generateTokenAuthHeader:function(e){return"".concat(e.token_type," ").concat(e.access_token)},generateDigestAuthHeader:function(e,t){var o=e.url.replace("//",""),i=-1==o.indexOf("/")?"/":o.slice(o.indexOf("/")),n=e.method?e.method.toUpperCase():"GET",a=!!/(^|,)\s*auth\s*($|,)/.test(t.qop)&&"auth",l="00000000".concat(t.nc).slice(-8),c=(t.cnonce,s(t.algorithm,t.username,t.realm,t.password,t.nonce,t.cnonce)),u=r("".concat(n,":").concat(i)),d=r(a?"".concat(c,":").concat(t.nonce,":").concat(l,":").concat(t.cnonce,":").concat(a,":").concat(u):"".concat(c,":").concat(t.nonce,":").concat(u)),h={username:t.username,realm:t.realm,nonce:t.nonce,uri:i,qop:a,response:d,nc:l,cnonce:t.cnonce,algorithm:t.algorithm,opaque:t.opaque},p=[];for(var f in h)h[f]&&("qop"===f||"nc"===f||"algorithm"===f?p.push("".concat(f,"=").concat(h[f])):p.push("".concat(f,'="').concat(h[f],'"')));return"Digest ".concat(p.join(", "))}}},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(i=window)}e.exports=i},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){},function(e,t,o){(function(t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(55),r=function(e){return"string"==typeof e};function s(e,t){for(var o=[],i=0;i<e.length;i++){var n=e[i];n&&"."!==n&&(".."===n?o.length&&".."!==o[o.length-1]?o.pop():t&&o.push(".."):o.push(n))}return o}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,l={};function c(e){return a.exec(e).slice(1)}l.resolve=function(){for(var e="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var n=i>=0?arguments[i]:t.cwd();if(!r(n))throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,o="/"===n.charAt(0))}return(o?"/":"")+(e=s(e.split("/"),!o).join("/"))||"."},l.normalize=function(e){var t=l.isAbsolute(e),o="/"===e.substr(-1);return(e=s(e.split("/"),!t).join("/"))||t||(e="."),e&&o&&(e+="/"),(t?"/":"")+e},l.isAbsolute=function(e){return"/"===e.charAt(0)},l.join=function(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];if(!r(o))throw new TypeError("Arguments to path.join must be strings");o&&(e+=e?"/"+o:o)}return l.normalize(e)},l.relative=function(e,t){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var o=e.length-1;o>=0&&""===e[o];o--);return t>o?[]:e.slice(t,o+1)}e=l.resolve(e).substr(1),t=l.resolve(t).substr(1);for(var i=o(e.split("/")),n=o(t.split("/")),r=Math.min(i.length,n.length),s=r,a=0;a<r;a++)if(i[a]!==n[a]){s=a;break}var c=[];for(a=s;a<i.length;a++)c.push("..");return(c=c.concat(n.slice(s))).join("/")},l._makeLong=function(e){return e},l.dirname=function(e){var t=c(e),o=t[0],i=t[1];return o||i?(i&&(i=i.substr(0,i.length-1)),o+i):"."},l.basename=function(e,t){var o=c(e)[2];return t&&o.substr(-1*t.length)===t&&(o=o.substr(0,o.length-t.length)),o},l.extname=function(e){return c(e)[3]},l.format=function(e){if(!n.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+i(e));var t=e.root||"";if(!r(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+i(e.root));return(e.dir?e.dir+l.sep:"")+(e.base||"")},l.parse=function(e){if(!r(e))throw new TypeError("Parameter 'pathString' must be a string, not "+i(e));var t=c(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,t[1].length-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},l.sep="/",l.delimiter=":",e.exports=l}).call(this,o(7))},function(e,t,o){o(4).merge;var i=o(2),n=i.handleResponseCode,r=i.processResponsePayload,s=o(9),a=s.parseXML,l=s.prepareFileFromProps,c=o(8),u=o(1),d=u.encodePath,h=u.joinURL,p=u.prepareRequestOptions,f=u.request;function m(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null;try{i=e.multistatus.response[0]}catch(e){}if(!i)throw new Error("Failed getting item stat: bad response");var n=i,r=n.propstat.prop,s=c.normalisePath(t);return l(r,s,o)}e.exports={getStat:function(e,t){var o={url:h(t.remoteURL,d(e)),method:"PROPFIND",headers:{Accept:"text/plain",Depth:0},responseType:"text"},i=null;return p(o,t),f(o).then(n).then((function(e){return i=e,e.data})).then(a).then((function(o){return m(o,e,t.details)})).then((function(e){return r(i,e,t.details)}))},parseStat:m}},function(e,t,o){var i=o(1).axios,n=o(50).createClient,r=o(19).getPatcher;e.exports={axios:i,createClient:n,getPatcher:r}},function(e,t,o){var i=o(0),n=o(11),r=o(28),s=o(17);function a(e){var t=new r(e),o=n(r.prototype.request,t);return i.extend(o,r.prototype,t),i.extend(o,t),o}var l=a(o(14));l.Axios=r,l.create=function(e){return a(s(l.defaults,e))},l.Cancel=o(18),l.CancelToken=o(41),l.isCancel=o(13),l.all=function(e){return Promise.all(e)},l.spread=o(42),e.exports=l,e.exports.default=l},function(e,t,o){var i=o(0),n=o(12),r=o(29),s=o(30),a=o(17);function l(e){this.defaults=e,this.interceptors={request:new r,response:new r}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)o=o.then(t.shift(),t.shift());return o},l.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,o){return this.request(i.merge(o||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,o,n){return this.request(i.merge(n||{},{method:e,url:t,data:o}))}})),e.exports=l},function(e,t,o){var i=o(0);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,o){var i=o(0),n=o(31),r=o(13),s=o(14);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return r(t)||(a(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,o){var i=o(0);e.exports=function(e,t,o){return i.forEach(o,(function(o){e=o(e,t)})),e}},function(e,t,o){var i=o(0);e.exports=function(e,t){i.forEach(e,(function(o,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[i])}))}},function(e,t,o){var i=o(16);e.exports=function(e,t,o){var n=o.config.validateStatus;!n||n(o.status)?e(o):t(i("Request failed with status code "+o.status,o.config,null,o.request,o))}},function(e,t,o){e.exports=function(e,t,o,i,n){return e.config=t,o&&(e.code=o),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,o){var i=o(36),n=o(37);e.exports=function(e,t){return e&&!i(t)?n(e,t):t}},function(e,t,o){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,o){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,o){var i=o(0),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,o,r,s={};return e?(i.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=i.trim(e.substr(0,r)).toLowerCase(),o=i.trim(e.substr(r+1)),t){if(s[t]&&n.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([o]):s[t]?s[t]+", "+o:o}})),s):s}},function(e,t,o){var i=o(0);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function n(e){var i=e;return t&&(o.setAttribute("href",i),i=o.href),o.setAttribute("href",i),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return e=n(window.location.href),function(t){var o=i.isString(t)?n(t):t;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0}},function(e,t,o){var i=o(0);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,o,n,r,s){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(o)&&a.push("expires="+new Date(o).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,o){var i=o(18);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var o=this;e((function(e){o.reason||(o.reason=new i(e),t(o.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,o){e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,o){var i,n,r;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var o=e.shift();e[0]=o+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var i=0;i<e.length;i++){var n=e[i];if("string"!=typeof n)throw new TypeError("Url must be a string. Received "+n);""!==n&&(i>0&&(n=n.replace(/^[\/]+/,"")),n=i<e.length-1?n.replace(/[\/]+$/,""):n.replace(/[\/]+$/,"/"),t.push(n))}var r=t.join("/"),s=(r=r.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return s.shift()+(s.length>0?"?":"")+s.join("&")}return function(){return e("object"===s(arguments[0])?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():void 0===(n="function"==typeof(i=r)?i.call(t,o,t,e):i)||(e.exports=n)},function(e,t,o){var i=o(10),n=o(4).merge,r=o(19).getPatcher,s=o(20).generateDigestAuthHeader;function a(e){return r().patchInline("request",(function(e){return i(e)}),e)}e.exports=function(e){if(!e._digest)return a(e);var t=e._digest;return delete e._digest,t.hasDigestAuth&&(e=n(e,{headers:{Authorization:s(e,t)}})),a(e).then((function(o){if(401==o.status){if(t.hasDigestAuth=function(e,t){var o=e.headers["www-authenticate"]||"";if("digest"!==o.split(/\s/)[0].toLowerCase())return!1;for(var i=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var n=i.exec(o);if(!n)break;t[n[1]]=n[2]||n[3]}return t.nc++,t.cnonce=function(){for(var e="",t=0;t<32;++t)e+="abcdef0123456789"[Math.floor(Math.random()*"abcdef0123456789".length)];return e}(),!0}(o,t),t.hasDigestAuth)return a(e=n(e,{headers:{Authorization:s(e,t)}})).then((function(e){return 401==e.status?t.hasDigestAuth=!1:t.nc++,e}))}else t.nc++;return o}))}},function(e,t,o){function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var n=o(46).sequence,r=function(){};function s(e){return{original:e,methods:[e],final:!1}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configuration={registry:{},getEmptyAction:"null"},this.__type__="@@HOTPATCHER"}var t;return(t=[{key:"control",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"@@HOTPATCHER"!==e.__type__)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(e.configuration.registry).forEach((function(i){t.configuration.registry.hasOwnProperty(i)?o&&(t.configuration.registry[i]=Object.assign({},e.configuration.registry[i])):t.configuration.registry[i]=Object.assign({},e.configuration.registry[i])})),e._configuration=this.configuration,this}},{key:"execute",value:function(e){for(var t=this.get(e)||r,o=arguments.length,i=new Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];return t.apply(void 0,i)}},{key:"get",value:function(e){var t=this.configuration.registry[e];if(!t)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: ".concat(e));default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: ".concat(this.getEmptyAction))}return n.apply(void 0,function(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.methods))}},{key:"isPatched",value:function(e){return!!this.configuration.registry[e]}},{key:"patch",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.chain,n=void 0!==i&&i;if(this.configuration.registry[e]&&this.configuration.registry[e].final)throw new Error("Failed patching '".concat(e,"': Method marked as being final"));if("function"!=typeof t)throw new Error("Failed patching '".concat(e,"': Provided method is not a function"));if(n)this.configuration.registry[e]?this.configuration.registry[e].methods.push(t):this.configuration.registry[e]=s(t);else if(this.isPatched(e)){var r=this.configuration.registry[e].original;this.configuration.registry[e]=Object.assign(s(t),{original:r})}else this.configuration.registry[e]=s(t);return this}},{key:"patchInline",value:function(e,t){this.isPatched(e)||this.patch(e,t);for(var o=arguments.length,i=new Array(o>2?o-2:0),n=2;n<o;n++)i[n-2]=arguments[n];return this.execute.apply(this,[e].concat(i))}},{key:"plugin",value:function(e){for(var t=this,o=arguments.length,i=new Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];return i.forEach((function(o){t.patch(e,o,{chain:!0})})),this}},{key:"restore",value:function(e){if(!this.isPatched(e))throw new Error("Failed restoring method: No method present for key: ".concat(e));if("function"!=typeof this.configuration.registry[e].original)throw new Error("Failed restoring method: Original method not found or of invalid type for key: ".concat(e));this.configuration.registry[e].methods=[this.configuration.registry[e].original]}},{key:"setFinal",value:function(e){if(!this.configuration.registry.hasOwnProperty(e))throw new Error("Failed marking '".concat(e,"' as final: No method found for key"));return this.configuration.registry[e].final=!0,this}},{key:"configuration",get:function(){return this._configuration}},{key:"getEmptyAction",get:function(){return this.configuration.getEmptyAction},set:function(e){this.configuration.getEmptyAction=e}}])&&function(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();e.exports=a},function(e,t){e.exports={sequence:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(0===t.length)throw new Error("Failed creating sequence: No functions provided");return function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];for(var n=o,r=this;t.length>0;){var s=t.shift();n=[s.apply(r,n)]}return n[0]}}}},function(e,t,o){(function(e,i){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(s){var a="object"==r(t)&&t,l="object"==r(e)&&e&&e.exports==a&&e,c="object"==(void 0===i?"undefined":r(i))&&i;c.global!==c&&c.window!==c||(s=c);var u=function(e){this.message=e};(u.prototype=new Error).name="InvalidCharacterError";var d=function(e){throw new u(e)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&d("The string to be encoded contains characters outside of the Latin1 range.");for(var t,o,i,n,r=e.length%3,s="",a=-1,l=e.length-r;++a<l;)t=e.charCodeAt(a)<<16,o=e.charCodeAt(++a)<<8,i=e.charCodeAt(++a),s+=h.charAt((n=t+o+i)>>18&63)+h.charAt(n>>12&63)+h.charAt(n>>6&63)+h.charAt(63&n);return 2==r?(t=e.charCodeAt(a)<<8,o=e.charCodeAt(++a),s+=h.charAt((n=t+o)>>10)+h.charAt(n>>4&63)+h.charAt(n<<2&63)+"="):1==r&&(n=e.charCodeAt(a),s+=h.charAt(n>>2)+h.charAt(n<<4&63)+"=="),s},decode:function(e){var t=(e=String(e).replace(p,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&d("Invalid character: the string to be decoded is not correctly encoded.");for(var o,i,n=0,r="",s=-1;++s<t;)i=h.indexOf(e.charAt(s)),o=n%4?64*o+i:i,n++%4&&(r+=String.fromCharCode(255&o>>(-2*n&6)));return r},version:"0.1.0"};if("object"==r(o(22))&&o(22))void 0===(n=function(){return f}.call(t,o,t,e))||(e.exports=n);else if(a&&!a.nodeType)if(l)l.exports=f;else for(var m in f)f.hasOwnProperty(m)&&(a[m]=f[m]);else s.base64=f}(this)}).call(this,o(48)(e),o(21))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,o){var i=o(23).createHash;function n(e){return i("md5").update(e).digest("hex")}e.exports={md5:n,ha1Compute:function(e,t,o,i,r,s){var a=n("".concat(t,":").concat(o,":").concat(i));return e&&"md5-sess"===e.toLowerCase()?n("".concat(a,":").concat(r,":").concat(s)):a}}},function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(20),r=o(8),s=o(4).merge,a=o(54),l=o(70),c=o(71),u=o(72),d=o(73),h=o(74),p=o(75),f=o(76),m=o(77),g=o(78),b=o(25);e.exports={createClient:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"object"!==i(t))throw new Error("Options must be an object, if specified");var o=t.username,v=t.password,y=t.httpAgent,w=t.httpsAgent,E=t.token,x=void 0===E?null:E,C=t.digest,R=void 0!==C&&C,k={headers:{},remotePath:r.extractURLPath(e),remoteURL:e,httpAgent:y,httpsAgent:w};return R?k._digest={username:o,password:v,nc:0,algorithm:"md5",hasDigestAuth:!1}:o?k.headers.Authorization=n.generateBasicAuthHeader(o,v):x&&"object"===i(x)&&(k.headers.Authorization=n.generateTokenAuthHeader(x)),{copyFile:function(e,t,o){var i=s(k,o||{});return m.copyFile(e,t,i)},createDirectory:function(e,t){var o=s(k,t||{});return l.createDirectory(e,o)},createReadStream:function(e,t){throw new Error("createReadStream not implemented in web environment")},createWriteStream:function(e,t){throw new Error("createWriteStream not implemented in web environment")},customRequest:function(e,t,o){var i=s(k,o||{});return c.customRequest(e,t,i)},deleteFile:function(e,t){var o=s(k,t||{});return u.deleteFile(e,o)},exists:function(e,t){var o=s(k,t||{});return d.pathExists(e,o)},getDirectoryContents:function(e,t){var o=s(k,t||{});return a.getDirectoryContents(e,o)},getFileContents:function(e,t){var o=s(k,t||{});if(o.format=o.format||"binary",["binary","text"].indexOf(o.format)<0)throw new Error("Unknown format: "+o.format);return"text"===o.format?h.getFileContentsString(e,o):h.getFileContentsBuffer(e,o)},getFileDownloadLink:function(e,t){var o=s(k,t||{});return h.getFileLink(e,o)},getFileUploadLink:function(e,t){var o=s(k,t||{});return g.getFileUploadLink(e,o)},getQuota:function(e){var t=s(k,e||{});return p.getQuota(t)},moveFile:function(e,t,o){var i=s(k,o||{});return f.moveFile(e,t,i)},putFileContents:function(e,t,o){var i=s(k,o||{});return g.putFileContents(e,t,i)},stat:function(e,t){var o=s(k,t||{});return b.getStat(e,o)}}}}},function(e,t,o){(function(t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(52),r=o(53),s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(l,"")}var u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function h(e){var o,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},r={},a=i(e=e||n);if("blob:"===e.protocol)r=new f(unescape(e.pathname),{});else if("string"===a)for(o in r=new f(e,{}),d)delete r[o];else if("object"===a){for(o in e)o in d||(r[o]=e[o]);void 0===r.slashes&&(r.slashes=s.test(e.href))}return r}function p(e){e=c(e);var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function f(e,t,o){if(e=c(e),!(this instanceof f))return new f(e,t,o);var s,a,l,d,m,g,b=u.slice(),v=i(t),y=this,w=0;for("object"!==v&&"string"!==v&&(o=t,t=null),o&&"function"!=typeof o&&(o=r.parse),t=h(t),s=!(a=p(e||"")).protocol&&!a.slashes,y.slashes=a.slashes||s&&t.slashes,y.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(b[3]=[/(.*)/,"pathname"]);w<b.length;w++)"function"!=typeof(d=b[w])?(l=d[0],g=d[1],l!=l?y[g]=e:"string"==typeof l?~(m=e.indexOf(l))&&("number"==typeof d[2]?(y[g]=e.slice(0,m),e=e.slice(m+d[2])):(y[g]=e.slice(m),e=e.slice(0,m))):(m=l.exec(e))&&(y[g]=m[1],e=e.slice(0,m.index)),y[g]=y[g]||s&&d[3]&&t[g]||"",d[4]&&(y[g]=y[g].toLowerCase())):e=d(e);o&&(y.query=o(y.query)),s&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var o=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=o.length,n=o[i-1],r=!1,s=0;i--;)"."===o[i]?o.splice(i,1):".."===o[i]?(o.splice(i,1),s++):s&&(0===i&&(r=!0),o.splice(i,1),s--);return r&&o.unshift(""),"."!==n&&".."!==n||o.push(""),o.join("/")}(y.pathname,t.pathname)),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(d=y.auth.split(":"),y.username=d[0]||"",y.password=d[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}f.prototype={set:function(e,t,o){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(o||r.parse)(t)),i[e]=t;break;case"port":i[e]=t,n(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!o;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";i[e]=t.charAt(0)!==s?s+t:t}else i[e]=t;break;default:i[e]=t}for(var a=0;a<u.length;a++){var l=u[a];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,o=this,n=o.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var s=n+(o.slashes?"//":"");return o.username&&(s+=o.username,o.password&&(s+=":"+o.password),s+="@"),s+=o.host+o.pathname,(t="object"===i(o.query)?e(o.query):o.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),o.hash&&(s+=o.hash),s}},f.extractProtocol=p,f.location=h,f.trimLeft=c,f.qs=r,e.exports=f}).call(this,o(21))},function(e,t,o){e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,o){var i=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var o,n,r=[];for(n in"string"!=typeof t&&(t="?"),e)if(i.call(e,n)){if((o=e[n])||null!=o&&!isNaN(o)||(o=""),n=encodeURIComponent(n),o=encodeURIComponent(o),null===n||null===o)continue;r.push(n+"="+o)}return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,o=/([^=?&]+)=?([^&]*)/g,i={};t=o.exec(e);){var r=n(t[1]),s=n(t[2]);null===r||null===s||r in i||(i[r]=s)}return i}},function(e,t,o){var i=o(24),n=(o(4).merge,o(2)),r=n.handleResponseCode,s=n.processGlobFilter,a=n.processResponsePayload,l=o(8),c=l.normaliseHREF,u=l.normalisePath,d=o(9),h=d.parseXML,p=d.prepareFileFromProps,f=o(1),m=f.encodePath,g=f.joinURL,b=f.prepareRequestOptions,v=f.request;e.exports={getDirectoryContents:function(e,t){var o={url:g(t.remoteURL,m(e),"/"),method:"PROPFIND",headers:{Accept:"text/plain",Depth:t.deep?"infinity":1},responseType:"text"},n=null;return b(o,t),v(o).then(r).then((function(e){return n=e,e.data})).then(h).then((function(o){return function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=i.join(t,o,"/"),s=i.join(t,"/"),a=e.multistatus.response;return a.filter((function(e){var t=e.href;return(t=i.join(u(c(t)),"/"))!==s&&t!==r})).map((function(e){var t=c(e.href),o=e.propstat.prop,r=u("/"===s?t:i.relative(s,t));return p(o,r,n)}))}(o,t.remotePath,e,t.details)})).then((function(e){return a(n,e,t.details)})).then((function(e){return t.glob?s(e,t.glob):e}))}}},function(e,t,o){(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),o={},i=0;i<t.length;i++)o[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return o},r=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],o=0;o<arguments.length;o++)t.push(l(arguments[o]));return t.join(" ")}o=1;for(var i=arguments,n=i.length,s=String(e).replace(r,(function(e){if("%%"===e)return"%";if(o>=n)return e;switch(e){case"%s":return String(i[o++]);case"%d":return Number(i[o++]);case"%j":try{return JSON.stringify(i[o++])}catch(e){return"[Circular]"}default:return e}})),a=i[o];o<n;a=i[++o])g(a)||!E(a)?s+=" "+a:s+=" "+l(a);return s},t.deprecate=function(o,i){if(void 0!==e&&!0===e.noDeprecation)return o;if(void 0===e)return function(){return t.deprecate(o,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),n=!0}return o.apply(this,arguments)}};var s,a={};function l(e,o){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(o)?i.showHidden=o:o&&t._extend(i,o),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),d(i,e,i.depth)}function c(e,t){var o=l.styles[t];return o?"["+l.colors[o][0]+"m"+e+"["+l.colors[o][1]+"m":e}function u(e,t){return e}function d(e,o,i){if(e.customInspect&&o&&R(o.inspect)&&o.inspect!==t.inspect&&(!o.constructor||o.constructor.prototype!==o)){var n=o.inspect(i,e);return v(n)||(n=d(e,n,i)),n}var r=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var o="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(o,"string")}return b(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,o);if(r)return r;var s=Object.keys(o),a=function(e){var t={};return e.forEach((function(e,o){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(o)),C(o)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(o);if(0===s.length){if(R(o)){var l=o.name?": "+o.name:"";return e.stylize("[Function"+l+"]","special")}if(w(o))return e.stylize(RegExp.prototype.toString.call(o),"regexp");if(x(o))return e.stylize(Date.prototype.toString.call(o),"date");if(C(o))return h(o)}var c,u="",E=!1,k=["{","}"];return f(o)&&(E=!0,k=["[","]"]),R(o)&&(u=" [Function"+(o.name?": "+o.name:"")+"]"),w(o)&&(u=" "+RegExp.prototype.toString.call(o)),x(o)&&(u=" "+Date.prototype.toUTCString.call(o)),C(o)&&(u=" "+h(o)),0!==s.length||E&&0!=o.length?i<0?w(o)?e.stylize(RegExp.prototype.toString.call(o),"regexp"):e.stylize("[Object]","special"):(e.seen.push(o),c=E?function(e,t,o,i,n){for(var r=[],s=0,a=t.length;s<a;++s)L(t,String(s))?r.push(p(e,t,o,i,String(s),!0)):r.push("");return n.forEach((function(n){n.match(/^\d+$/)||r.push(p(e,t,o,i,n,!0))})),r}(e,o,i,a,s):s.map((function(t){return p(e,o,i,a,t,E)})),e.seen.pop(),function(e,t,o){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?o[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+o[1]:o[0]+t+" "+e.join(", ")+" "+o[1]}(c,u,k)):k[0]+u+k[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,o,i,n,r){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),L(i,n)||(s="["+n+"]"),a||(e.seen.indexOf(l.value)<0?(a=g(o)?d(e,l.value,null):d(e,l.value,o-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(r&&n.match(/^\d+$/))return a;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function w(e){return E(e)&&"[object RegExp]"===k(e)}function E(e){return"object"===i(e)&&null!==e}function x(e){return E(e)&&"[object Date]"===k(e)}function C(e){return E(e)&&("[object Error]"===k(e)||e instanceof Error)}function R(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(o){if(y(s)&&(s=e.env.NODE_DEBUG||""),o=o.toUpperCase(),!a[o])if(new RegExp("\\b"+o+"\\b","i").test(s)){var i=e.pid;a[o]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",o,i,e)}}else a[o]=function(){};return a[o]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=v,t.isSymbol=function(e){return"symbol"===i(e)},t.isUndefined=y,t.isRegExp=w,t.isObject=E,t.isDate=x,t.isError=C,t.isFunction=R,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===i(e)||void 0===e},t.isBuffer=o(56);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=o(57),t._extend=function(e,t){if(!t||!E(t))return e;for(var o=Object.keys(t),i=o.length;i--;)e[o[i]]=t[o[i]];return e};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var o=new Error("Promise was rejected with a falsy value");o.reason=e,e=o}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!=typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,o,i=new Promise((function(e,i){t=e,o=i})),n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);n.push((function(e,i){e?o(e):t(i)}));try{e.apply(this,n)}catch(e){o(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=A,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function o(){for(var o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);var n=o.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var r=this,s=function(){return n.apply(r,arguments)};t.apply(this,o).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(D,t,s)}))}return Object.setPrototypeOf(o,Object.getPrototypeOf(t)),Object.defineProperties(o,n(t)),o}}).call(this,o(7))},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return e&&"object"===o(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},function(e,t,o){e.exports=u,u.Minimatch=d;var i={sep:"/"};try{i=o(23)}catch(e){}var n=u.GLOBSTAR=d.GLOBSTAR={},r=o(59),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),l=/\/+/;function c(e,t){e=e||{},t=t||{};var o={};return Object.keys(t).forEach((function(e){o[e]=t[e]})),Object.keys(e).forEach((function(t){o[t]=e[t]})),o}function u(e,t,o){if("string"!=typeof t)throw new TypeError("glob pattern string required");return o||(o={}),!(!o.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new d(t,o).match(e))}function d(e,t){if(!(this instanceof d))return new d(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function h(e,t){if(t||(t=this instanceof d?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:r(e)}u.filter=function(e,t){return t=t||{},function(o,i,n){return u(o,e,t)}},u.defaults=function(e){if(!e||!Object.keys(e).length)return u;var t=u,o=function(o,i,n){return t.minimatch(o,i,c(e,n))};return o.Minimatch=function(o,i){return new t.Minimatch(o,c(e,i))},o},d.defaults=function(e){return e&&Object.keys(e).length?u.defaults(e).Minimatch:d},d.prototype.debug=function(){},d.prototype.make=function(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var o=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,o),o=this.globParts=o.map((function(e){return e.split(l)})),this.debug(this.pattern,o),o=o.map((function(e,t,o){return e.map(this.parse,this)}),this),this.debug(this.pattern,o),o=o.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,o),this.set=o}else this.empty=!0;else this.comment=!0}},d.prototype.parseNegate=function(){var e=this.pattern,t=!1,o=0;if(!this.options.nonegate){for(var i=0,n=e.length;i<n&&"!"===e.charAt(i);i++)t=!t,o++;o&&(this.pattern=e.substr(o)),this.negate=t}},u.braceExpand=function(e,t){return h(e,t)},d.prototype.braceExpand=h,d.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var o=this.options;if(!o.noglobstar&&"**"===e)return n;if(""===e)return"";var i,r="",l=!!o.nocase,c=!1,u=[],d=[],h=!1,f=-1,m=-1,g="."===e.charAt(0)?"":o.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function v(){if(i){switch(i){case"*":r+="[^/]*?",l=!0;break;case"?":r+="[^/]",l=!0;break;default:r+="\\"+i}b.debug("clearStateChar %j %j",i,r),i=!1}}for(var y,w=0,E=e.length;w<E&&(y=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,r,y),c&&a[y])r+="\\"+y,c=!1;else switch(y){case"/":return!1;case"\\":v(),c=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,r,y),h){this.debug("  in class"),"!"===y&&w===m+1&&(y="^"),r+=y;continue}b.debug("call clearStateChar %j",i),v(),i=y,o.noext&&v();continue;case"(":if(h){r+="(";continue}if(!i){r+="\\(";continue}u.push({type:i,start:w-1,reStart:r.length,open:s[i].open,close:s[i].close}),r+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,r),i=!1;continue;case")":if(h||!u.length){r+="\\)";continue}v(),l=!0;var x=u.pop();r+=x.close,"!"===x.type&&d.push(x),x.reEnd=r.length;continue;case"|":if(h||!u.length||c){r+="\\|",c=!1;continue}v(),r+="|";continue;case"[":if(v(),h){r+="\\"+y;continue}h=!0,m=w,f=r.length,r+=y;continue;case"]":if(w===m+1||!h){r+="\\"+y,c=!1;continue}if(h){var C=e.substring(m+1,w);try{RegExp("["+C+"]")}catch(e){var R=this.parse(C,p);r=r.substr(0,f)+"\\["+R[0]+"\\]",l=l||R[1],h=!1;continue}}l=!0,h=!1,r+=y;continue;default:v(),c?c=!1:!a[y]||"^"===y&&h||(r+="\\"),r+=y}for(h&&(C=e.substr(m+1),R=this.parse(C,p),r=r.substr(0,f)+"\\["+R[0],l=l||R[1]),x=u.pop();x;x=u.pop()){var k=r.slice(x.reStart+x.open.length);this.debug("setting tail",r,x),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,o){return o||(o="\\"),t+t+o+"|"})),this.debug("tail=%j\n   %s",k,k,x,r);var S="*"===x.type?"[^/]*?":"?"===x.type?"[^/]":"\\"+x.type;l=!0,r=r.slice(0,x.reStart)+S+"\\("+k}v(),c&&(r+="\\\\");var M=!1;switch(r.charAt(0)){case".":case"[":case"(":M=!0}for(var T=d.length-1;T>-1;T--){var L=d[T],A=r.slice(0,L.reStart),D=r.slice(L.reStart,L.reEnd-8),P=r.slice(L.reEnd-8,L.reEnd),F=r.slice(L.reEnd);P+=F;var _=A.split("(").length-1,N=F;for(w=0;w<_;w++)N=N.replace(/\)[+*?]?/,"");var O="";""===(F=N)&&t!==p&&(O="$"),r=A+D+F+O+P}if(""!==r&&l&&(r="(?=.)"+r),M&&(r=g+r),t===p)return[r,l];if(!l)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var z=o.nocase?"i":"";try{var H=new RegExp("^"+r+"$",z)}catch(e){return new RegExp("$.")}return H._glob=e,H._src=r,H};var p={};u.makeRe=function(e,t){return new d(e,t||{}).makeRe()},d.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,o=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",r=e.map((function(e){return e.map((function(e){return e===n?o:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{this.regexp=new RegExp(r,i)}catch(e){this.regexp=!1}return this.regexp},u.match=function(e,t,o){var i=new d(t,o=o||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},d.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var o=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(l),this.debug(this.pattern,"split",e);var n,r,s=this.set;for(this.debug(this.pattern,"set",s),r=e.length-1;r>=0&&!(n=e[r]);r--);for(r=0;r<s.length;r++){var a=s[r],c=e;if(o.matchBase&&1===a.length&&(c=[n]),this.matchOne(c,a,t))return!!o.flipNegate||!this.negate}return!o.flipNegate&&this.negate},d.prototype.matchOne=function(e,t,o){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var r=0,s=0,a=e.length,l=t.length;r<a&&s<l;r++,s++){this.debug("matchOne loop");var c,u=t[s],d=e[r];if(this.debug(t,u,d),!1===u)return!1;if(u===n){this.debug("GLOBSTAR",[t,u,d]);var h=r,p=s+1;if(p===l){for(this.debug("** at the end");r<a;r++)if("."===e[r]||".."===e[r]||!i.dot&&"."===e[r].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),o))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!i.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!o||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof u?(c=i.nocase?d.toLowerCase()===u.toLowerCase():d===u,this.debug("string match",u,d,c)):(c=d.match(u),this.debug("pattern match",u,d,c)),!c)return!1}if(r===a&&s===l)return!0;if(r===a)return o;if(s===l)return r===a-1&&""===e[r];throw new Error("wtf?")}},function(e,t,o){var i=o(60),n=o(61);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),function e(t,o){var r=[],s=n("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var l,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),g=c||d,b=s.body.indexOf(",")>=0;if(!g&&!b)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];if(g)l=s.body.split(/\.\./);else if(1===(l=function e(t){if(!t)return[""];var o=[],i=n("{","}",t);if(!i)return t.split(",");var r=i.pre,s=i.body,a=i.post,l=r.split(",");l[l.length-1]+="{"+s+"}";var c=e(a);return a.length&&(l[l.length-1]+=c.shift(),l.push.apply(l,c)),o.push.apply(o,l),o}(s.body)).length&&1===(l=e(l[0],!1).map(h)).length)return(w=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+l[0]+e}));var v,y=s.pre,w=s.post.length?e(s.post,!1):[""];if(g){var E=u(l[0]),x=u(l[1]),C=Math.max(l[0].length,l[1].length),R=3==l.length?Math.abs(u(l[2])):1,k=f;x<E&&(R*=-1,k=m);var S=l.some(p);v=[];for(var M=E;k(M,x);M+=R){var T;if(d)"\\"===(T=String.fromCharCode(M))&&(T="");else if(T=String(M),S){var L=C-T.length;if(L>0){var A=new Array(L+1).join("0");T=M<0?"-"+A+T.slice(1):A+T}}v.push(T)}}else v=i(l,(function(t){return e(t,!1)}));for(var D=0;D<v.length;D++)for(var P=0;P<w.length;P++){var F=y+v[D]+w[P];(!o||g||F)&&r.push(F)}return r}(function(e){return e.split("\\\\").join(r).split("\\{").join(s).split("\\}").join(a).split("\\,").join(l).split("\\.").join(c)}(e),!0).map(d)):[]};var r="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",l="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(r).join("\\").split(s).join("{").split(a).join("}").split(l).join(",").split(c).join(".")}function h(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=t(e[n],n);o(r)?i.push.apply(i,r):i.push(r)}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,o){function i(e,t,o){e instanceof RegExp&&(e=n(e,o)),t instanceof RegExp&&(t=n(t,o));var i=r(e,t,o);return i&&{start:i[0],end:i[1],pre:o.slice(0,i[0]),body:o.slice(i[0]+e.length,i[1]),post:o.slice(i[1]+t.length)}}function n(e,t){var o=t.match(e);return o?o[0]:null}function r(e,t,o){var i,n,r,s,a,l=o.indexOf(e),c=o.indexOf(t,l+1),u=l;if(l>=0&&c>0){for(i=[],r=o.length;u>=0&&!a;)u==l?(i.push(u),l=o.indexOf(e,u+1)):1==i.length?a=[i.pop(),c]:((n=i.pop())<r&&(r=n,s=c),c=o.indexOf(t,u+1)),u=l<c&&l>=0?l:c;i.length&&(a=[r,s])}return a}e.exports=i,i.range=r},function(e,t,o){var i=o(63),n=o(6),r=o(6),s=o(3).buildOptions,a=o(65);t.parse=function(e,t,o){if(o){!0===o&&(o={});var l=a.validate(e,o);if(!0!==l)throw Error(l.err.msg)}return t=s(t,r.defaultOptions,r.props),i.convertToJson(n.getTraversalObj(e,t),t)},t.convertTonimn=o(66).convert2nimn,t.getTraversalObj=n.getTraversalObj,t.convertToJson=i.convertToJson,t.convertToJsonString=o(67).convertToJsonString,t.validate=a.validate,t.j2xParser=o(68),t.parseToNimn=function(e,o,i){return t.convertTonimn(t.getTraversalObj(e,i),o,i)}},function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(3);t.convertToJson=function e(t,o){var r={};if(!(t.child&&!n.isEmptyObject(t.child)||t.attrsMap&&!n.isEmptyObject(t.attrsMap)))return n.isExist(t.val)?t.val:"";n.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==o.cdataPositionChar)&&("strict"===o.arrayMode?r[o.textNodeName]=[t.val]:r[o.textNodeName]=t.val),n.merge(r,t.attrsMap,o.arrayMode);for(var s=Object.keys(t.child),a=0;a<s.length;a++){var l=s[a];if(t.child[l]&&t.child[l].length>1)for(var c in r[l]=[],t.child[l])r[l].push(e(t.child[l][c],o));else if(!0===o.arrayMode){var u=e(t.child[l][0],o);"object"===i(u)?r[l]=[u]:r[l]=u}else"strict"===o.arrayMode?r[l]=[e(t.child[l][0],o)]:r[l]=e(t.child[l][0],o)}return r}},function(e,t,o){e.exports=function(e,t,o){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=o,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},function(e,t,o){var i=o(3),n={allowBooleanAttributes:!1},r=["allowBooleanAttributes"];function s(e,t){for(var o=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var i=e.substr(o,t-o);if(t>5&&"xml"===i)return h("InvalidXml","XML declaration allowed only at the start of the document.",f(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){var o=1;for(t+=8;t<e.length;t++)if("<"===e[t])o++;else if(">"===e[t]&&0==--o)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function l(e,t){for(var o="",i="",n=!1;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===i)i=e[t];else{if(i!==e[t])continue;i=""}else if(">"===e[t]&&""===i){n=!0;break}o+=e[t]}return""===i&&{value:o,index:t,tagClosed:n}}t.validate=function(e,t){t=i.buildOptions(t,n,r);var o,c=[],p=!1,m=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(var g=0;g<e.length;g++){if("<"!==e[g]){if(" "===e[g]||"\t"===e[g]||"\n"===e[g]||"\r"===e[g])continue;return h("InvalidChar","char '".concat(e[g],"' is not expected."),f(e,g))}if("?"===e[++g]){if((g=s(e,++g)).err)return g}else{if("!"===e[g]){g=a(e,g);continue}var b=!1;"/"===e[g]&&(b=!0,g++);for(var v="";g<e.length&&">"!==e[g]&&" "!==e[g]&&"\t"!==e[g]&&"\n"!==e[g]&&"\r"!==e[g];g++)v+=e[g];if("/"===(v=v.trim())[v.length-1]&&(v=v.substring(0,v.length-1),g--),o=v,!i.isName(o))return h("InvalidTag",0===v.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '".concat(v,"' is an invalid name."),f(e,g));var y=l(e,g);if(!1===y)return h("InvalidAttr","Attributes for '".concat(v,"' have open quote."),f(e,g));var w=y.value;if(g=y.index,"/"===w[w.length-1]){var E=u(w=w.substring(0,w.length-1),t);if(!0!==E)return h(E.err.code,E.err.msg,f(e,g-w.length+E.err.line));p=!0}else if(b){if(!y.tagClosed)return h("InvalidTag","Closing tag '".concat(v,"' doesn't have proper closing."),f(e,g));if(w.trim().length>0)return h("InvalidTag","Closing tag '".concat(v,"' can't have attributes or invalid starting."),f(e,g));var x=c.pop();if(v!==x)return h("InvalidTag","Closing tag '".concat(x,"' is expected inplace of '").concat(v,"'."),f(e,g));0==c.length&&(m=!0)}else{var C=u(w,t);if(!0!==C)return h(C.err.code,C.err.msg,f(e,g-w.length+C.err.line));if(!0===m)return h("InvalidXml","Multiple possible root nodes found.",f(e,g));c.push(v),p=!0}for(g++;g<e.length;g++){if("<"===e[g]){if("!"===e[g+1]){g=a(e,++g);continue}break}if("&"===e[g]){var R=d(e,g);if(-1==R)return h("InvalidChar","char '&' is not expected.",f(e,g));g=R}}"<"===e[g]&&g--}}return p?!(c.length>0)||h("InvalidXml","Invalid '".concat(JSON.stringify(c,null,4).replace(/\r?\n/g,""),"' found."),1):h("InvalidXml","Start tag expected.",1)};var c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function u(e,t){for(var o=i.getAllMatches(e,c),n={},r=0;r<o.length;r++){if(0===o[r][1].length)return h("InvalidAttr","Attribute '".concat(o[r][2],"' has no space in starting."),m(e,o[r][0]));if(void 0===o[r][3]&&!t.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '".concat(o[r][2],"' is not allowed."),m(e,o[r][0]));var s=o[r][2];if(!p(s))return h("InvalidAttr","Attribute '".concat(s,"' is an invalid name."),m(e,o[r][0]));if(n.hasOwnProperty(s))return h("InvalidAttr","Attribute '".concat(s,"' is repeated."),m(e,o[r][0]));n[s]=1}return!0}function d(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){var o=/\d/;for("x"===e[t]&&(t++,o=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(o))break}return-1}(e,++t);for(var o=0;t<e.length;t++,o++)if(!(e[t].match(/\w/)&&o<20)){if(";"===e[t])break;return-1}return t}function h(e,t,o){return{err:{code:e,msg:t,line:o}}}function p(e){return i.isName(e)}function f(e,t){return e.substring(0,t).split(/\r?\n/).length}function m(e,t){return e.indexOf(t)+t.length}},function(e,t,o){var i=function(e){return String.fromCharCode(e)},n={nilChar:i(176),missingChar:i(201),nilPremitive:i(175),missingPremitive:i(200),emptyChar:i(178),emptyValue:i(177),boundryChar:i(179),objStart:i(198),arrStart:i(204),arrayEnd:i(185)},r=[n.nilChar,n.nilPremitive,n.missingChar,n.missingPremitive,n.boundryChar,n.emptyChar,n.emptyValue,n.arrayEnd,n.objStart,n.arrStart],s=function(e){switch(e){case void 0:return n.missingPremitive;case null:return n.nilPremitive;case"":return n.emptyValue;default:return e}},a=function(e,t){return l(t[0])||l(e[e.length-1])||(e+=n.boundryChar),e+t},l=function(e){return-1!==r.indexOf(e)},c=o(6),u=o(3).buildOptions;t.convert2nimn=function(e,t,o){return function e(t,o,i){if("string"==typeof o)return t&&t[0]&&void 0!==t[0].val?s(t[0].val):s(t);var r,l=void 0===(r=t)?n.missingChar:null===r?n.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||n.emptyChar;if(!0===l){var c="";if(Array.isArray(o)){c+=n.arrStart;var u=o[0],d=t.length;if("string"==typeof u)for(var h=0;h<d;h++){var p=s(t[h].val);c=a(c,p)}else for(var f=0;f<d;f++){var m=e(t[f],u,i);c=a(c,m)}c+=n.arrayEnd}else{c+=n.objStart;var g=Object.keys(o);for(var b in Array.isArray(t)&&(t=t[0]),g){var v,y=g[b];v=!i.ignoreAttributes&&t.attrsMap&&t.attrsMap[y]?e(t.attrsMap[y],o[y],i):y===i.textNodeName?e(t.val,o[y],i):e(t.child[y],o[y],i),c=a(c,v)}}return c}return l}(e,t,o=u(o,c.defaultOptions,c.props))}},function(e,t,o){var i=o(3),n=o(3).buildOptions,r=o(6);t.convertToJsonString=function(e,t){return(t=n(t,r.defaultOptions,r.props)).indentBy=t.indentBy||"",function e(t,o,n){for(var r,s="{",a=Object.keys(t.child),l=0;l<a.length;l++){var c=a[l];if(t.child[c]&&t.child[c].length>1){for(var u in s+='"'+c+'" : [ ',t.child[c])s+=e(t.child[c][u],o)+" , ";s=s.substr(0,s.length-1)+" ] "}else s+='"'+c+'" : '+e(t.child[c][0],o)+" ,"}return i.merge(s,t.attrsMap),i.isEmptyObject(s)?i.isExist(t.val)?t.val:"":(i.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==o.cdataPositionChar)&&(s+='"'+o.textNodeName+'" : '+(!0!==(r=t.val)&&!1!==r&&isNaN(r)?'"'+r+'"':r)),","===s[s.length-1]&&(s=s.substr(0,s.length-2)),s+"}")}(e,t)}},function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=o(3).buildOptions,r={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},s=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function a(e){this.options=n(e,r,s),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=m),this.options.cdataTagName?this.isCDATA=g:this.isCDATA=function(){return!1},this.replaceCDATAstr=l,this.replaceCDATAarr=c,this.options.format?(this.indentate=f,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=p,this.buildObjNode=d):(this.buildTextNode=h,this.buildObjNode=u),this.buildTextValNode=h,this.buildObjectNode=u}function l(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function c(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(var o in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[o]+"]]>");return e+this.newLine}function u(e,t,o,i){return o&&!e.includes("<")?this.indentate(i)+"<"+t+o+">"+e+"</"+t+this.tagEndChar:this.indentate(i)+"<"+t+o+this.tagEndChar+e+this.indentate(i)+"</"+t+this.tagEndChar}function d(e,t,o,i){return""!==e?this.buildObjectNode(e,t,o,i):this.indentate(i)+"<"+t+o+"/"+this.tagEndChar}function h(e,t,o,i){return this.indentate(i)+"<"+t+o+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function p(e,t,o,i){return""!==e?this.buildTextValNode(e,t,o,i):this.indentate(i)+"<"+t+o+"/"+this.tagEndChar}function f(e){return this.options.indentBy.repeat(e)}function m(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function g(e){return e===this.options.cdataTagName}a.prototype.parse=function(e){return this.j2x(e,0).val},a.prototype.j2x=function(e,t){for(var o="",n="",r=Object.keys(e),s=r.length,a=0;a<s;a++){var l=r[a];if(void 0===e[l]);else if(null===e[l])n+=this.indentate(t)+"<"+l+"/"+this.tagEndChar;else if(e[l]instanceof Date)n+=this.buildTextNode(e[l],l,"",t);else if("object"!==i(e[l])){var c=this.isAttribute(l);c?o+=" "+c+'="'+this.options.attrValueProcessor(""+e[l])+'"':this.isCDATA(l)?e[this.options.textNodeName]?n+=this.replaceCDATAstr(e[this.options.textNodeName],e[l]):n+=this.replaceCDATAstr("",e[l]):l===this.options.textNodeName?e[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+e[l])):n+=this.buildTextNode(e[l],l,"",t)}else if(Array.isArray(e[l]))if(this.isCDATA(l))n+=this.indentate(t),e[this.options.textNodeName]?n+=this.replaceCDATAarr(e[this.options.textNodeName],e[l]):n+=this.replaceCDATAarr("",e[l]);else for(var u=e[l].length,d=0;d<u;d++){var h=e[l][d];if(void 0===h);else if(null===h)n+=this.indentate(t)+"<"+l+"/"+this.tagEndChar;else if("object"===i(h)){var p=this.j2x(h,t+1);n+=this.buildObjNode(p.val,l,p.attrStr,t)}else n+=this.buildTextNode(h,l,"",t)}else if(this.options.attrNodeName&&l===this.options.attrNodeName)for(var f=Object.keys(e[l]),m=f.length,g=0;g<m;g++)o+=" "+f[g]+'="'+this.options.attrValueProcessor(""+e[l][f[g]])+'"';else{var b=this.j2x(e[l],t+1);n+=this.buildObjNode(b.val,l,b.attrStr,t)}}return{attrStr:o,val:n}},e.exports=a},function(e,t,o){
/**
* @license nested-property https://github.com/cosmosio/nested-property
*
* The MIT License (MIT)
*
* Copyright (c) 2014-2020 Olivier Scherrer <pode.fr@gmail.com>
*/
function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports={set:function(e,t,o){if(e&&"object"==i(e)){if("string"==typeof t&&""!==t){var n=t.split(".");return n.reduce((function(e,t,i){var r=Number.isInteger(Number(n[i+1]));return e[t]=e[t]||(r?[]:{}),n.length==i+1&&(e[t]=o),e[t]}),e)}return"number"==typeof t?(e[t]=o,e[t]):e}return e},get:function(e,t){return e&&"object"==i(e)?"string"==typeof t&&""!==t?t.split(".").reduce((function(e,t){return e&&e[t]}),e):"number"==typeof t?e[t]:e:e},has:function(e,t,o){return o=o||{},!(!e||"object"!=i(e))&&("string"==typeof t&&""!==t?t.split(".").reduce((function(e,t,n,r){return n==r.length-1?o.own?!(!e||!e.hasOwnProperty(t)):!(null===e||"object"!=i(e)||!(t in e)):e&&e[t]}),e):"number"==typeof t&&t in e)},hasOwn:function(e,t,o){return this.has(e,t,o||{own:!0})},isIn:function(e,t,o,n){if(n=n||{},e&&"object"==i(e)){if("string"==typeof t&&""!==t){var r,s=t.split("."),a=!1;return r=!!s.reduce((function(e,t){return a=a||e===o||!!e&&e[t]===o,e&&e[t]}),e),n.validPath?a&&r:a}return!1}return!1}}},function(e,t,o){var i=o(2),n=o(1),r=n.encodePath,s=n.joinURL,a=n.prepareRequestOptions,l=n.request;e.exports={createDirectory:function(e,t){var o={url:s(t.remoteURL,r(e)),method:"MKCOL"};return a(o,t),l(o).then(i.handleResponseCode)}}},function(e,t,o){var i=o(2).handleResponseCode,n=o(1),r=n.encodePath,s=n.joinURL,a=n.prepareRequestOptions,l=n.request;e.exports={customRequest:function(e,t,o){return t.url||(t.url=s(o.remoteURL,r(e),"/")),a(t,o),l(t).then(i)}}},function(e,t,o){var i=o(2),n=o(1),r=n.encodePath,s=n.joinURL,a=n.prepareRequestOptions,l=n.request;e.exports={deleteFile:function(e,t){var o={url:s(t.remoteURL,r(e)),method:"DELETE"};return a(o,t),l(o).then(i.handleResponseCode)}}},function(e,t,o){var i=o(25).getStat;e.exports={pathExists:function(e,t){return i(e,t).then((function(){return!0})).catch((function(e){if(e.response&&404===e.response.status)return!1;throw e}))}}},function(e,t,o){var i=o(2),n=i.handleResponseCode,r=i.processResponsePayload,s=o(1),a=s.encodePath,l=s.joinURL,c=s.prepareRequestOptions,u=s.request,d=o(5).fromBase64;e.exports={getFileContentsBuffer:function(e,t){var o={url:l(t.remoteURL,a(e)),method:"GET",responseType:"arraybuffer"};return c(o,t),u(o).then(n).then((function(e){return r(e,e.data,t.details)}))},getFileContentsString:function(e,t){var o={url:l(t.remoteURL,a(e)),method:"GET",responseType:"text"};return c(o,t),u(o).then(n).then((function(e){return r(e,e.data,t.details)}))},getFileLink:function(e,t){var o=l(t.remoteURL,a(e)),i=/^https:/i.test(o)?"https":"http";if(t.headers&&t.headers.Authorization){if(!1===/^Basic /i.test(t.headers.Authorization))throw new Error("Failed retrieving download link: Invalid authorisation method");var n=t.headers.Authorization.replace(/^Basic /i,"").trim(),r=d(n);o=o.replace(/^https?:\/\//,"".concat(i,"://").concat(r,"@"))}return o}}},function(e,t,o){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!t||o.length!==t);i=!0);}catch(e){n=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var r=o(2),s=r.handleResponseCode,a=r.processResponsePayload,l=o(1),c=(l.encodePath,l.joinURL),u=l.prepareRequestOptions,d=l.request,h=o(9),p=h.parseXML,f=h.translateDiskSpace;function m(e){try{var t=i(e.multistatus.response,1)[0].propstat.prop,o=t["quota-used-bytes"],n=t["quota-available-bytes"];return void 0!==o&&void 0!==n?{used:parseInt(o,10),available:f(n)}:null}catch(e){}return null}e.exports={getQuota:function(e){var t={url:c(e.remoteURL,"/"),method:"PROPFIND",headers:{Accept:"text/plain",Depth:0},responseType:"text"},o=null;return u(t,e),d(t).then(s).then((function(e){return o=e,e.data})).then(p).then(m).then((function(t){return a(o,t,e.details)}))}}},function(e,t,o){var i=o(2),n=o(1),r=n.encodePath,s=n.joinURL,a=n.prepareRequestOptions,l=n.request;e.exports={moveFile:function(e,t,o){var n={url:s(o.remoteURL,r(e)),method:"MOVE",headers:{Destination:s(o.remoteURL,r(t))}};return a(n,o),l(n).then(i.handleResponseCode)}}},function(e,t,o){var i=o(2),n=o(1),r=n.encodePath,s=n.joinURL,a=n.prepareRequestOptions,l=n.request;e.exports={copyFile:function(e,t,o){var n={url:s(o.remoteURL,r(e)),method:"COPY",headers:{Destination:s(o.remoteURL,r(t))}};return a(n,o),l(n).then(i.handleResponseCode)}}},function(e,t,o){var i=o(4).merge,n=o(2),r=o(1),s=r.encodePath,a=r.joinURL,l=r.prepareRequestOptions,c=r.request,u=o(5).fromBase64;e.exports={getFileUploadLink:function(e,t){var o=a(t.remoteURL,s(e)),i=/^https:/i.test(o+="?Content-Type=application/octet-stream")?"https":"http";if(t.headers&&t.headers.Authorization){if(!1===/^Basic /i.test(t.headers.Authorization))throw new Error("Failed retrieving download link: Invalid authorisation method");var n=t.headers.Authorization.replace(/^Basic /i,"").trim(),r=u(n);o=o.replace(/^https?:\/\//,"".concat(i,"://").concat(r,"@"))}return o},putFileContents:function(e,t,o){var r={"Content-Length":t.length},u=i({headers:{"Content-Type":"application/octet-stream"},overwrite:!0},{headers:r},o||{});!1===u.overwrite&&(u.headers["If-None-Match"]="*");var d={url:a(o.remoteURL,s(e)),method:"PUT",headers:u.headers,data:t};return l(d,o),c(d).then(n.handleResponseCode)}}}])}));
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class Ot{constructor(e){this.classes=new Set,this.changed=!1,this.element=e;const t=(e.getAttribute("class")||"").split(/\s+/);for(const e of t)this.classes.add(e)}add(e){this.classes.add(e),this.changed=!0}remove(e){this.classes.delete(e),this.changed=!0}commit(){if(this.changed){let e="";this.classes.forEach(t=>e+=t+" "),this.element.setAttribute("class",e)}}}const zt=new WeakMap,Ht=re(e=>t=>{if(!(t instanceof me)||t instanceof ye||"class"!==t.committer.name||t.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:o}=t,{element:i}=o;let n=zt.get(t);void 0===n&&(i.setAttribute("class",o.strings.join(" ")),zt.set(t,n=new Set));const r=i.classList||new Ot(i);n.forEach(t=>{t in e||(r.remove(t),n.delete(t))});for(const t in e){const o=e[t];o!=n.has(t)&&(o?(r.add(t),n.add(t)):(r.remove(t),n.delete(t)))}"function"==typeof r.commit&&r.commit()});var jt=Ft((function(t,o){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,i){"object"===n(o)?t.exports=i():e.Tabulator=i()}(Pt,(function(){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var r=t[n];if(e.call(i,r,n,t))return n;n++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var r=t[n];if(e.call(i,r,n,t))return r;n++}}}),String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0===i)return!1;var n,r,s=0|t,a=Math.max(s>=0?s:i-Math.abs(s),0);for(;a<i;){if((n=o[a])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;a++}return!1}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o},writable:!0,configurable:!0});var t=function(e){this.table=e,this.blockHozScrollEvent=!1,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)};t.prototype.createHeadersElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e},t.prototype.createHeaderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-header"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e},t.prototype.initialize=function(){},t.prototype.setRowManager=function(e){this.rowManager=e},t.prototype.getElement=function(){return this.element},t.prototype.getHeadersElement=function(){return this.headersElement},t.prototype.scrollHorizontal=function(e){var t=0,o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=e,e>o?(t=e-o,this.element.style.marginLeft=-t+"px"):this.element.style.marginLeft=0,this.scrollLeft=e,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()},t.prototype.generateColumnsFromRowData=function(e){var t,o,i=[];if(e&&e.length){for(var r in t=e[0]){var s={field:r,title:r},a=t[r];switch(void 0===a?"undefined":n(a)){case"undefined":o="string";break;case"boolean":o="boolean";break;case"object":o=Array.isArray(a)?"array":"string";break;default:o=isNaN(a)||""===a?a.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}s.sorter=o,i.push(s)}this.table.options.columns=i,this.setColumns(this.table.options.columns)}},t.prototype.setColumns=function(e,t){for(var o=this;o.headersElement.firstChild;)o.headersElement.removeChild(o.headersElement.firstChild);o.columns=[],o.columnsByIndex=[],o.columnsByField={},o.table.modExists("frozenColumns")&&o.table.modules.frozenColumns.reset(),e.forEach((function(e,t){o._addColumn(e)})),o._reIndexColumns(),o.table.options.responsiveLayout&&o.table.modExists("responsiveLayout",!0)&&o.table.modules.responsiveLayout.initialize(),o.redraw(!0)},t.prototype._addColumn=function(e,t,o){var i=new r(e,this),n=i.getElement(),s=o?this.findColumnIndex(o):o;if(o&&s>-1){var a=this.columns.indexOf(o.getTopColumn()),l=o.getElement();t?(this.columns.splice(a,0,i),l.parentNode.insertBefore(n,l)):(this.columns.splice(a+1,0,i),l.parentNode.insertBefore(n,l.nextSibling))}else t?(this.columns.unshift(i),this.headersElement.insertBefore(i.getElement(),this.headersElement.firstChild)):(this.columns.push(i),this.headersElement.appendChild(i.getElement())),i.columnRendered();return i},t.prototype.registerColumnField=function(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)},t.prototype.registerColumnPosition=function(e){this.columnsByIndex.push(e)},t.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach((function(e){e.reRegisterPosition()}))},t.prototype._verticalAlignHeaders=function(){var e=this,t=0;e.columns.forEach((function(e){var o;e.clearVerticalAlign(),(o=e.getHeight())>t&&(t=o)})),e.columns.forEach((function(o){o.verticalAlign(e.table.options.columnHeaderVertAlign,t)})),e.rowManager.adjustTableSize()},t.prototype.findColumn=function(e){return"object"!=(void 0===e?"undefined":n(e))?this.columnsByField[e]||!1:e instanceof r?e:e instanceof o?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&this.columns.find((function(t){return t.element===e}))||!1},t.prototype.getColumnByField=function(e){return this.columnsByField[e]},t.prototype.getColumnsByFieldRoot=function(e){var t=this,o=[];return Object.keys(this.columnsByField).forEach((function(i){i.split(".")[0]===e&&o.push(t.columnsByField[i])})),o},t.prototype.getColumnByIndex=function(e){return this.columnsByIndex[e]},t.prototype.getFirstVisibileColumn=function(e){return(e=this.columnsByIndex.findIndex((function(e){return e.visible})))>-1&&this.columnsByIndex[e]},t.prototype.getColumns=function(){return this.columns},t.prototype.findColumnIndex=function(e){return this.columnsByIndex.findIndex((function(t){return e===t}))},t.prototype.getRealColumns=function(){return this.columnsByIndex},t.prototype.traverse=function(e){this.columnsByIndex.forEach((function(t,o){e(t,o)}))},t.prototype.getDefinitions=function(e){var t=[];return this.columnsByIndex.forEach((function(o){(!e||e&&o.visible)&&t.push(o.getDefinition())})),t},t.prototype.getDefinitionTree=function(){var e=[];return this.columns.forEach((function(t){e.push(t.getDefinition(!0))})),e},t.prototype.getComponents=function(e){var t=[];return(e?this.columns:this.columnsByIndex).forEach((function(e){t.push(e.getComponent())})),t},t.prototype.getWidth=function(){var e=0;return this.columnsByIndex.forEach((function(t){t.visible&&(e+=t.getWidth())})),e},t.prototype.moveColumn=function(e,t,o){this.moveColumnActual(e,t,o),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t.element.parentNode.insertBefore(e.element,t.element),o&&t.element.parentNode.insertBefore(t.element,e.element),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},t.prototype.moveColumnActual=function(e,t,o){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,t,o):this._moveColumnInArray(this.columns,e,t,o),this._moveColumnInArray(this.columnsByIndex,e,t,o,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,e.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},t.prototype._moveColumnInArray=function(e,t,o,i,n){var r,s=e.indexOf(t);s>-1&&(e.splice(s,1),(r=e.indexOf(o))>-1?i&&(r+=1):r=s,e.splice(r,0,t),n&&this.table.rowManager.rows.forEach((function(e){if(e.cells.length){var t=e.cells.splice(s,1)[0];e.cells.splice(r,0,t)}})))},t.prototype.scrollToColumn=function(e,t,o){var i=this,n=0,r=0,s=0,a=e.getElement();return new Promise((function(l,c){if(void 0===t&&(t=i.table.options.scrollToColumnPosition),void 0===o&&(o=i.table.options.scrollToColumnIfVisible),e.visible){switch(t){case"middle":case"center":s=-i.element.clientWidth/2;break;case"right":s=a.clientWidth-i.headersElement.clientWidth}if(!o&&(r=a.offsetLeft)>0&&r+a.offsetWidth<i.element.clientWidth)return!1;n=a.offsetLeft+i.element.scrollLeft+s,n=Math.max(Math.min(n,i.table.rowManager.element.scrollWidth-i.table.rowManager.element.clientWidth),0),i.table.rowManager.scrollHorizontal(n),i.scrollHorizontal(n),l()}else console.warn("Scroll Error - Column not visible"),c("Scroll Error - Column not visible")}))},t.prototype.generateCells=function(e){var t=[];return this.columnsByIndex.forEach((function(o){t.push(o.generateCell(e))})),t},t.prototype.getFlexBaseWidth=function(){var e=this,t=e.table.element.clientWidth,o=0;return e.rowManager.element.scrollHeight>e.rowManager.element.clientHeight&&(t-=e.rowManager.element.offsetWidth-e.rowManager.element.clientWidth),this.columnsByIndex.forEach((function(i){var n,r,s;i.visible&&(n=i.definition.width||0,r=void 0===i.minWidth?e.table.options.columnMinWidth:parseInt(i.minWidth),s="string"==typeof n?n.indexOf("%")>-1?t/100*parseInt(n):parseInt(n):n,o+=s>r?s:r)})),o},t.prototype.addColumn=function(e,t,o){var i=this;return new Promise((function(n,r){var s=i._addColumn(e,t,o);i._reIndexColumns(),i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout",!0)&&i.table.modules.responsiveLayout.initialize(),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.recalc(i.table.rowManager.activeRows),i.redraw(),"fitColumns"!=i.table.modules.layout.getMode()&&s.reinitializeWidth(),i._verticalAlignHeaders(),i.table.rowManager.reinitialize(),n(s)}))},t.prototype.deregisterColumn=function(e){var t,o=e.getField();o&&delete this.columnsByField[o],(t=this.columnsByIndex.indexOf(e))>-1&&this.columnsByIndex.splice(t,1),(t=this.columns.indexOf(e))>-1&&this.columns.splice(t,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.redraw()},t.prototype.redraw=function(e){e&&(h.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())>-1||e?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),e&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var o=function(e){this._column=e,this.type="ColumnComponent"};o.prototype.getElement=function(){return this._column.getElement()},o.prototype.getDefinition=function(){return this._column.getDefinition()},o.prototype.getField=function(){return this._column.getField()},o.prototype.getCells=function(){var e=[];return this._column.cells.forEach((function(t){e.push(t.getComponent())})),e},o.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._column.visible},o.prototype.isVisible=function(){return this._column.visible},o.prototype.show=function(){this._column.isGroup?this._column.columns.forEach((function(e){e.show()})):this._column.show()},o.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach((function(e){e.hide()})):this._column.hide()},o.prototype.toggle=function(){this._column.visible?this.hide():this.show()},o.prototype.delete=function(){return this._column.delete()},o.prototype.getSubColumns=function(){var e=[];return this._column.columns.length&&this._column.columns.forEach((function(t){e.push(t.getComponent())})),e},o.prototype.getParentColumn=function(){return this._column.parent instanceof r&&this._column.parent.getComponent()},o.prototype._getSelf=function(){return this._column},o.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},o.prototype.getTable=function(){return this._column.table},o.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},o.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},o.prototype.getHeaderFilterValue=function(){if(this._column.table.modExists("filter",!0))return this._column.table.modules.filter.getHeaderFilterValue(this._column)},o.prototype.setHeaderFilterValue=function(e){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,e)},o.prototype.move=function(e,t){var o=this._column.table.columnManager.findColumn(e);o?this._column.table.columnManager.moveColumn(this._column,o,t):console.warn("Move Error - No matching column found:",o)},o.prototype.getNextColumn=function(){var e=this._column.nextColumn();return!!e&&e.getComponent()},o.prototype.getPrevColumn=function(){var e=this._column.prevColumn();return!!e&&e.getComponent()},o.prototype.updateDefinition=function(e){return this._column.updateDefinition(e)},o.prototype.getWidth=function(){return this._column.getWidth()},o.prototype.setWidth=function(e){return!0===e?this._column.reinitializeWidth(!0):this._column.setWidth(e)},o.prototype.validate=function(){return this._column.validate()};var r=function e(t,o){var i=this;this.table=o.table,this.definition=t,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.setField(this.definition.field),this.table.options.invalidOptionWarnings&&this.checkDefinition(),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1},this.width=null,this.widthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this._mapDepricatedFunctionality(),t.columns?(this.isGroup=!0,t.columns.forEach((function(t,o){var n=new e(t,i);i.attachColumn(n)})),i.checkColumnVisibility()):o.registerColumnField(this),t.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader(),this.bindModuleColumns()};r.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e},r.prototype.createGroupElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e},r.prototype.checkDefinition=function(){var e=this;Object.keys(this.definition).forEach((function(t){-1===e.defaultOptionList.indexOf(t)&&console.warn("Invalid column definition option in '"+(e.field||e.definition.title)+"' column:",t)}))},r.prototype.setField=function(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData},r.prototype.registerColumnPosition=function(e){this.parent.registerColumnPosition(e)},r.prototype.registerColumnField=function(e){this.parent.registerColumnField(e)},r.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach((function(e){e.reRegisterPosition()})):this.registerColumnPosition(this)},r.prototype._mapDepricatedFunctionality=function(){void 0!==this.definition.hideInHtml&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput")),void 0!==this.definition.align&&(this.definition.hozAlign=this.definition.align,console.warn("align column definition property is deprecated, you should now use hozAlign")),void 0!==this.definition.downloadTitle&&(this.definition.titleDownload=this.definition.downloadTitle,console.warn("downloadTitle definition property is deprecated, you should now use titleDownload"))},r.prototype.setTooltip=function(){var e=this,t=e.definition,o=t.headerTooltip||!1===t.tooltip?t.headerTooltip:e.table.options.tooltipsHeader;o?!0===o?t.field?e.table.modules.localize.bind("columns|"+t.field,(function(o){e.element.setAttribute("title",o||t.title)})):e.element.setAttribute("title",t.title):("function"==typeof o&&!1===(o=o(e.getComponent()))&&(o=""),e.element.setAttribute("title",o)):e.element.setAttribute("title","")},r.prototype._buildHeader=function(){for(var e=this,t=e.definition;e.element.firstChild;)e.element.removeChild(e.element.firstChild);t.headerVertical&&(e.element.classList.add("tabulator-col-vertical"),"flip"===t.headerVertical&&e.element.classList.add("tabulator-col-vertical-flip")),e.contentElement=e._bindEvents(),e.contentElement=e._buildColumnHeaderContent(),e.element.appendChild(e.contentElement),e.isGroup?e._buildGroupHeader():e._buildColumnHeader(),e.setTooltip(),e.table.options.resizableColumns&&e.table.modExists("resizeColumns")&&e.table.modules.resizeColumns.initializeColumn("header",e,e.element),t.headerFilter&&e.table.modExists("filter")&&e.table.modExists("edit")&&(void 0!==t.headerFilterPlaceholder&&t.field&&e.table.modules.localize.setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),e.table.modules.filter.initializeColumn(e)),e.table.modExists("frozenColumns")&&e.table.modules.frozenColumns.initializeColumn(e),e.table.options.movableColumns&&!e.isGroup&&e.table.modExists("moveColumn")&&e.table.modules.moveColumn.initializeColumn(e),(t.topCalc||t.bottomCalc)&&e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.initializeColumn(e),e.table.modExists("persistence")&&e.table.modules.persistence.config.columns&&e.table.modules.persistence.initializeColumn(e),e.element.addEventListener("mouseenter",(function(t){e.setTooltip()}))},r.prototype._bindEvents=function(){var e,t,o,i=this,n=i.definition;"function"==typeof n.headerClick&&i.element.addEventListener("click",(function(e){n.headerClick(e,i.getComponent())})),"function"==typeof n.headerDblClick&&i.element.addEventListener("dblclick",(function(e){n.headerDblClick(e,i.getComponent())})),"function"==typeof n.headerContext&&i.element.addEventListener("contextmenu",(function(e){n.headerContext(e,i.getComponent())})),"function"==typeof n.headerTap&&(o=!1,i.element.addEventListener("touchstart",(function(e){o=!0}),{passive:!0}),i.element.addEventListener("touchend",(function(e){o&&n.headerTap(e,i.getComponent()),o=!1}))),"function"==typeof n.headerDblTap&&(e=null,i.element.addEventListener("touchend",(function(t){e?(clearTimeout(e),e=null,n.headerDblTap(t,i.getComponent())):e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),"function"==typeof n.headerTapHold&&(t=null,i.element.addEventListener("touchstart",(function(e){clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,o=!1,n.headerTapHold(e,i.getComponent())}),1e3)}),{passive:!0}),i.element.addEventListener("touchend",(function(e){clearTimeout(t),t=null}))),"function"==typeof n.cellClick&&(i.cellEvents.cellClick=n.cellClick),"function"==typeof n.cellDblClick&&(i.cellEvents.cellDblClick=n.cellDblClick),"function"==typeof n.cellContext&&(i.cellEvents.cellContext=n.cellContext),"function"==typeof n.cellMouseEnter&&(i.cellEvents.cellMouseEnter=n.cellMouseEnter),"function"==typeof n.cellMouseLeave&&(i.cellEvents.cellMouseLeave=n.cellMouseLeave),"function"==typeof n.cellMouseOver&&(i.cellEvents.cellMouseOver=n.cellMouseOver),"function"==typeof n.cellMouseOut&&(i.cellEvents.cellMouseOut=n.cellMouseOut),"function"==typeof n.cellMouseMove&&(i.cellEvents.cellMouseMove=n.cellMouseMove),"function"==typeof n.cellTap&&(i.cellEvents.cellTap=n.cellTap),"function"==typeof n.cellDblTap&&(i.cellEvents.cellDblTap=n.cellDblTap),"function"==typeof n.cellTapHold&&(i.cellEvents.cellTapHold=n.cellTapHold),"function"==typeof n.cellEdited&&(i.cellEvents.cellEdited=n.cellEdited),"function"==typeof n.cellEditing&&(i.cellEvents.cellEditing=n.cellEditing),"function"==typeof n.cellEditCancelled&&(i.cellEvents.cellEditCancelled=n.cellEditCancelled)},r.prototype._buildColumnHeader=function(){var e=this,t=e.definition,o=e.table;(o.modExists("sort")&&o.modules.sort.initializeColumn(e,e.contentElement),(t.headerContextMenu||t.headerMenu)&&o.modExists("menu")&&o.modules.menu.initializeColumnHeader(e),o.modExists("format")&&o.modules.format.initializeColumn(e),void 0!==t.editor&&o.modExists("edit")&&o.modules.edit.initializeColumn(e),void 0!==t.validator&&o.modExists("validate")&&o.modules.validate.initializeColumn(e),o.modExists("mutator")&&o.modules.mutator.initializeColumn(e),o.modExists("accessor")&&o.modules.accessor.initializeColumn(e),n(o.options.responsiveLayout)&&o.modExists("responsiveLayout")&&o.modules.responsiveLayout.initializeColumn(e),void 0!==t.visible&&(t.visible?e.show(!0):e.hide(!0)),t.cssClass)&&t.cssClass.split(" ").forEach((function(t){e.element.classList.add(t)}));t.field&&this.element.setAttribute("tabulator-field",t.field),e.setMinWidth(void 0===t.minWidth?e.table.options.columnMinWidth:parseInt(t.minWidth)),e.reinitializeWidth(),e.tooltip=e.definition.tooltip||!1===e.definition.tooltip?e.definition.tooltip:e.table.options.tooltips,e.hozAlign=void 0===e.definition.hozAlign?e.table.options.cellHozAlign:e.definition.hozAlign,e.vertAlign=void 0===e.definition.vertAlign?e.table.options.cellVertAlign:e.definition.vertAlign},r.prototype._buildColumnHeaderContent=function(){this.definition,this.table;var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleElement=this._buildColumnHeaderTitle(),e.appendChild(this.titleElement),e},r.prototype._buildColumnHeaderTitle=function(){var e=this,t=e.definition,o=e.table,i=document.createElement("div");if(i.classList.add("tabulator-col-title"),t.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor"),n.addEventListener("click",(function(e){e.stopPropagation(),n.focus()})),n.addEventListener("change",(function(){t.title=n.value,o.options.columnTitleChanged.call(e.table,e.getComponent())})),i.appendChild(n),t.field?o.modules.localize.bind("columns|"+t.field,(function(e){n.value=e||t.title||"&nbsp;"})):n.value=t.title||"&nbsp;"}else t.field?o.modules.localize.bind("columns|"+t.field,(function(o){e._formatColumnHeaderTitle(i,o||t.title||"&nbsp;")})):e._formatColumnHeaderTitle(i,t.title||"&nbsp;");return i},r.prototype._formatColumnHeaderTitle=function(e,t){var o,i,r,s,a,l=this;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(o=this.table.modules.format.getFormatter(this.definition.titleFormatter),a=function(e){l.titleFormatterRendered=e},s={getValue:function(){return t},getElement:function(){return e}},r="function"==typeof(r=this.definition.titleFormatterParams||{})?r():r,void 0===(i=o.call(this.table.modules.format,s,r,a))?"undefined":n(i)){case"object":i instanceof Node?e.appendChild(i):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=i}else e.innerHTML=t},r.prototype._buildGroupHeader=function(){var e=this;(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass)&&this.definition.cssClass.split(" ").forEach((function(t){e.element.classList.add(t)}));(this.definition.headerContextMenu||this.definition.headerMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeColumnHeader(this),this.element.appendChild(this.groupElement)},r.prototype._getFlatData=function(e){return e[this.field]},r.prototype._getNestedData=function(e){for(var t,o=e,i=this.fieldStructure,n=i.length,r=0;r<n&&(t=o=o[i[r]],o);r++);return t},r.prototype._setFlatData=function(e,t){this.field&&(e[this.field]=t)},r.prototype._setNestedData=function(e,t){for(var o=e,i=this.fieldStructure,n=i.length,r=0;r<n;r++)if(r==n-1)o[i[r]]=t;else{if(!o[i[r]]){if(void 0===t)break;o[i[r]]={}}o=o[i[r]]}},r.prototype.attachColumn=function(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},r.prototype.verticalAlign=function(e,t){var o=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=o+"px",this.isGroup&&(this.groupElement.style.minHeight=o-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===e||(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach((function(t){t.verticalAlign(e)}))},r.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach((function(e){e.clearVerticalAlign()}))},r.prototype.bindModuleColumns=function(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)},r.prototype.getElement=function(){return this.element},r.prototype.getGroupElement=function(){return this.groupElement},r.prototype.getField=function(){return this.field},r.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},r.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},r.prototype.getColumns=function(){return this.columns},r.prototype.getCells=function(){return this.cells},r.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},r.prototype.getDefinition=function(e){var t=[];return this.isGroup&&e&&(this.columns.forEach((function(e){t.push(e.getDefinition(!0))})),this.definition.columns=t),this.definition},r.prototype.checkColumnVisibility=function(){var e=!1;this.columns.forEach((function(t){t.visible&&(e=!0)})),e?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},r.prototype.show=function(e,t){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(e){e.show()})),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),e||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths())},r.prototype.hide=function(e,t){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(e){e.hide()})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),e||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths())},r.prototype.matchChildWidths=function(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach((function(t){t.visible&&(e+=t.getWidth())})),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())},r.prototype.setWidth=function(e){this.widthFixed=!0,this.setWidthActual(e)},r.prototype.setWidthActual=function(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach((function(e){e.setWidth()})),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},r.prototype.checkCellHeights=function(){var e=[];this.cells.forEach((function(t){t.row.heightInitialized&&(null!==t.row.getElement().offsetParent?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)})),e.forEach((function(e){e.calcHeight()})),e.forEach((function(e){e.setCellHeight()}))},r.prototype.getWidth=function(){var e=0;return this.isGroup?this.columns.forEach((function(t){t.visible&&(e+=t.getWidth())})):e=this.width,e},r.prototype.getHeight=function(){return this.element.offsetHeight},r.prototype.setMinWidth=function(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach((function(e){e.setMinWidth()}))},r.prototype.delete=function(){var e=this;return new Promise((function(t,o){e.isGroup&&e.columns.forEach((function(e){e.delete()})),e.table.modExists("edit")&&e.table.modules.edit.currentCell.column===e&&e.table.modules.edit.cancelEdit();for(var i=e.cells.length,n=0;n<i;n++)e.cells[0].delete();e.element.parentNode.removeChild(e.element),e.table.columnManager.deregisterColumn(e),t()}))},r.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()},r.prototype.validate=function(){var e=[];return this.cells.forEach((function(t){t.validate()||e.push(t.getComponent())})),!e.length||e},r.prototype.generateCell=function(e){var t=new u(this,e);return this.cells.push(t),t},r.prototype.nextColumn=function(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)},r.prototype._nextVisibleColumn=function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._nextVisibleColumn(e+1)},r.prototype.prevColumn=function(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)},r.prototype._prevVisibleColumn=function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._prevVisibleColumn(e-1)},r.prototype.reinitializeWidth=function(e){this.widthFixed=!1,void 0===this.definition.width||e||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},r.prototype.fitToData=function(){this.widthFixed||(this.element.style.width="",this.cells.forEach((function(e){e.clearWidth()})));var e=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach((function(t){var o=t.getWidth();o>e&&(e=o)})),e&&this.setWidthActual(e+1))},r.prototype.updateDefinition=function(e){var t=this;return new Promise((function(o,i){var n;t.isGroup?(console.warn("Column Update Error - The updateDefintion function is only available on columns, not column groups"),i("Column Update Error - The updateDefintion function is only available on columns, not column groups")):(n=Object.assign({},t.getDefinition()),n=Object.assign(n,e),t.table.columnManager.addColumn(n,!1,t).then((function(e){n.field==t.field&&(t.field=!1),t.delete().then((function(){o(e.getComponent())})).catch((function(e){i(e)}))})).catch((function(e){i(e)})))}))},r.prototype.deleteCell=function(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)},r.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams","titlePrint","titleClipboard","titleHtmlOutput","titleDownload"],r.prototype.getComponent=function(){return this.component||(this.component=new o(this)),this.component};var s=function(e){this.table=e,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[],this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1};s.prototype.createHolderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-tableHolder"),e.setAttribute("tabindex",0),e},s.prototype.createTableElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e},s.prototype.getElement=function(){return this.element},s.prototype.getTableElement=function(){return this.tableElement},s.prototype.getRowPosition=function(e,t){return t?this.activeRows.indexOf(e):this.rows.indexOf(e)},s.prototype.setColumnManager=function(e){this.columnManager=e},s.prototype.initialize=function(){var e=this;e.setRenderMode(),e.element.appendChild(e.tableElement),e.firstRender=!0,e.element.addEventListener("scroll",(function(){var t=e.element.scrollLeft;e.scrollLeft!=t&&(e.columnManager.scrollHorizontal(t),e.table.options.groupBy&&e.table.modules.groupRows.scrollHeaders(t),e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.scrollHorizontal(t),e.table.options.scrollHorizontal(t)),e.scrollLeft=t})),"virtual"===this.renderMode&&e.element.addEventListener("scroll",(function(){var t=e.element.scrollTop,o=e.scrollTop>t;e.scrollTop!=t?(e.scrollTop=t,e.scrollVertical(o),"scroll"==e.table.options.ajaxProgressiveLoad&&e.table.modules.ajax.nextPage(e.element.scrollHeight-e.element.clientHeight-t),e.table.options.scrollVertical(t)):e.scrollTop=t}))},s.prototype.findRow=function(e){var t=this;return"object"!=(void 0===e?"undefined":n(e))?null!=e&&(t.rows.find((function(o){return o.data[t.table.options.index]==e}))||!1):e instanceof l?e:e instanceof a?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.rows.find((function(t){return t.element===e}))||!1},s.prototype.getRowFromDataObject=function(e){return this.rows.find((function(t){return t.data===e}))||!1},s.prototype.getRowFromPosition=function(e,t){return t?this.activeRows[e]:this.rows[e]},s.prototype.scrollToRow=function(e,t,o){var i,n=this,r=this.getDisplayRows().indexOf(e),s=e.getElement(),a=0;return new Promise((function(e,l){if(r>-1){if(void 0===t&&(t=n.table.options.scrollToRowPosition),void 0===o&&(o=n.table.options.scrollToRowIfVisible),"nearest"===t)switch(n.renderMode){case"classic":i=h.prototype.helpers.elOffset(s).top,t=Math.abs(n.element.scrollTop-i)>Math.abs(n.element.scrollTop+n.element.clientHeight-i)?"bottom":"top";break;case"virtual":t=Math.abs(n.vDomTop-r)>Math.abs(n.vDomBottom-r)?"bottom":"top"}if(!o&&h.prototype.helpers.elVisible(s)&&(a=h.prototype.helpers.elOffset(s).top-h.prototype.helpers.elOffset(n.element).top)>0&&a<n.element.clientHeight-s.offsetHeight)return!1;switch(n.renderMode){case"classic":n.element.scrollTop=h.prototype.helpers.elOffset(s).top-h.prototype.helpers.elOffset(n.element).top+n.element.scrollTop;break;case"virtual":n._virtualRenderFill(r,!0)}switch(t){case"middle":case"center":n.element.scrollHeight-n.element.scrollTop==n.element.clientHeight?n.element.scrollTop=n.element.scrollTop+(s.offsetTop-n.element.scrollTop)-(n.element.scrollHeight-s.offsetTop)/2:n.element.scrollTop=n.element.scrollTop-n.element.clientHeight/2;break;case"bottom":n.element.scrollHeight-n.element.scrollTop==n.element.clientHeight?n.element.scrollTop=n.element.scrollTop-(n.element.scrollHeight-s.offsetTop)+s.offsetHeight:n.element.scrollTop=n.element.scrollTop-n.element.clientHeight+s.offsetHeight}e()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")}))},s.prototype.setData=function(e,t,o){var i=this,n=this;return new Promise((function(r,s){t&&i.getDisplayRows().length?n.table.options.pagination?n._setDataActual(e,!0):i.reRenderInPosition((function(){n._setDataActual(e)})):(i.table.options.autoColumns&&o&&i.table.columnManager.generateColumnsFromRowData(e),i.resetScroll(),i._setDataActual(e)),r()}))},s.prototype._setDataActual=function(e,t){var o=this;o.table.options.dataLoading.call(this.table,e),this._wipeElements(),this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(e)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(e),e.forEach((function(e,t){if(e&&"object"===(void 0===e?"undefined":n(e))){var i=new l(e,o);o.rows.push(i)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",e)})),o.refreshActiveData(!1,!1,t),o.table.options.dataLoaded.call(this.table,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===e?"undefined":n(e),"\nData:     ",e)},s.prototype._wipeElements=function(){this.rows.forEach((function(e){e.wipe()})),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe(),this.rows=[],this.adjustTableSize()},s.prototype.deleteRow=function(e,t){var o=this.rows.indexOf(e),i=this.activeRows.indexOf(e);i>-1&&this.activeRows.splice(i,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator((function(t){var o=t.indexOf(e);o>-1&&t.splice(o,1)})),t||this.reRenderInPosition(),this.regenerateRowNumbers(),this.table.options.rowDeleted.call(this.table,e.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},s.prototype.addRow=function(e,t,o,i){var n=this.addRowActual(e,t,o,i);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",n,{data:e,pos:t,index:o}),n},s.prototype.addRows=function(e,t,o){var i=this,n=this,r=[];return new Promise((function(s,a){t=i.findAddRowPos(t),Array.isArray(e)||(e=[e]),e.length-1,(void 0===o&&t||void 0!==o&&!t)&&e.reverse(),e.forEach((function(e,i){var s=n.addRow(e,t,o,!0);r.push(s)})),i.table.options.groupBy&&i.table.modExists("groupRows")?i.table.modules.groupRows.updateGroupRows(!0):i.table.options.pagination&&i.table.modExists("page")?i.refreshActiveData(!1,!1,!0):i.reRenderInPosition(),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.recalc(i.table.rowManager.activeRows),i.regenerateRowNumbers(),s(r)}))},s.prototype.findAddRowPos=function(e){return void 0===e&&(e=this.table.options.addRowPos),"pos"===e&&(e=!0),"bottom"===e&&(e=!1),e},s.prototype.addRowActual=function(e,t,o,i){var n,r,s=e instanceof l?e:new l(e||{},this),a=this.findAddRowPos(t),c=-1;if(!o&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(r=this.getDisplayRows(),a?r.length?o=r[0]:this.activeRows.length&&(o=this.activeRows[this.activeRows.length-1],a=!1):r.length&&(o=r[r.length-1],a=!(r.length<this.table.modules.page.getPageSize()))),void 0!==o&&(o=this.findRow(o)),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(s);var u=s.getGroup().rows;u.length>1&&(!o||o&&-1==u.indexOf(o)?a?u[0]!==s&&(o=u[0],this._moveRowInArray(s.getGroup().rows,s,o,!a)):u[u.length-1]!==s&&(o=u[u.length-1],this._moveRowInArray(s.getGroup().rows,s,o,!a)):this._moveRowInArray(s.getGroup().rows,s,o,!a))}return o&&(c=this.rows.indexOf(o)),o&&c>-1?(n=this.activeRows.indexOf(o),this.displayRowIterator((function(e){var t=e.indexOf(o);t>-1&&e.splice(a?t:t+1,0,s)})),n>-1&&this.activeRows.splice(a?n:n+1,0,s),this.rows.splice(a?c:c+1,0,s)):a?(this.displayRowIterator((function(e){e.unshift(s)})),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator((function(e){e.push(s)})),this.activeRows.push(s),this.rows.push(s)),this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,s.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),i||this.reRenderInPosition(),s},s.prototype.moveRow=function(e,t,o){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",e,{posFrom:this.getRowPosition(e),posTo:this.getRowPosition(t),to:t,after:o}),this.moveRowActual(e,t,o),this.regenerateRowNumbers(),this.table.options.rowMoved.call(this.table,e.getComponent())},s.prototype.moveRowActual=function(e,t,o){var i=this;if(this._moveRowInArray(this.rows,e,t,o),this._moveRowInArray(this.activeRows,e,t,o),this.displayRowIterator((function(n){i._moveRowInArray(n,e,t,o)})),this.table.options.groupBy&&this.table.modExists("groupRows")){!o&&t instanceof D&&(t=this.table.rowManager.prevDisplayRow(e)||t);var n=t.getGroup(),r=e.getGroup();n===r?this._moveRowInArray(n.rows,e,t,o):(r&&r.removeRow(e),n.insertRow(e,t,o))}},s.prototype._moveRowInArray=function(e,t,o,i){var n,r,s;if(t!==o&&((n=e.indexOf(t))>-1&&(e.splice(n,1),(r=e.indexOf(o))>-1?i?e.splice(r+1,0,t):e.splice(r,0,t):e.splice(n,0,t)),e===this.getDisplayRows())){s=r>n?r:n+1;for(var a=n<r?n:r;a<=s;a++)e[a]&&this.styleRow(e[a],a)}},s.prototype.clearData=function(){this.setData([])},s.prototype.getRowIndex=function(e){return this.findRowIndex(e,this.rows)},s.prototype.getDisplayRowIndex=function(e){var t=this.getDisplayRows().indexOf(e);return t>-1&&t},s.prototype.nextDisplayRow=function(e,t){var o=this.getDisplayRowIndex(e),i=!1;return!1!==o&&o<this.displayRowsCount-1&&(i=this.getDisplayRows()[o+1]),!i||i instanceof l&&"row"==i.type?i:this.nextDisplayRow(i,t)},s.prototype.prevDisplayRow=function(e,t){var o=this.getDisplayRowIndex(e),i=!1;return o&&(i=this.getDisplayRows()[o-1]),!t||!i||i instanceof l&&"row"==i.type?i:this.prevDisplayRow(i,t)},s.prototype.findRowIndex=function(e,t){var o;return!!((e=this.findRow(e))&&(o=t.indexOf(e))>-1)&&o},s.prototype.getData=function(e,t){var o=[];return this.getRows(e).forEach((function(e){"row"==e.type&&o.push(e.getData(t||"data"))})),o},s.prototype.getComponents=function(e){var t=[];return this.getRows(e).forEach((function(e){t.push(e.getComponent())})),t},s.prototype.getDataCount=function(e){return this.getRows(e).length},s.prototype._genRemoteRequest=function(){var e=this,t=this.table,o=t.options,i={};if(t.modExists("page")){if(o.ajaxSorting){var n=this.table.modules.sort.getSort();n.forEach((function(e){delete e.column})),i[this.table.modules.page.paginationDataSentNames.sorters]=n}if(o.ajaxFiltering){var r=this.table.modules.filter.getFilters(!0,!0);i[this.table.modules.page.paginationDataSentNames.filters]=r}this.table.modules.ajax.setParams(i,!0)}t.modules.ajax.sendRequest().then((function(t){e._setDataActual(t,!0)})).catch((function(e){}))},s.prototype.filterRefresh=function(){var e=this.table,t=e.options,o=this.scrollLeft;t.ajaxFiltering?"remote"==t.pagination&&e.modExists("page")?(e.modules.page.reset(!0),e.modules.page.setPage(1).then((function(){})).catch((function(){}))):t.ajaxProgressiveLoad?e.modules.ajax.loadData().then((function(){})).catch((function(){})):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(o)},s.prototype.sorterRefresh=function(e){var t=this.table,o=this.table.options,i=this.scrollLeft;o.ajaxSorting?("remote"==o.pagination||o.progressiveLoad)&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then((function(){})).catch((function(){}))):o.ajaxProgressiveLoad?t.modules.ajax.loadData().then((function(){})).catch((function(){})):this._genRemoteRequest():this.refreshActiveData(e?"filter":"sort"),this.scrollHorizontal(i)},s.prototype.scrollHorizontal=function(e){this.scrollLeft=e,this.element.scrollLeft=e,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(e),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(e)},s.prototype.refreshActiveData=function(e,t,o){var i,n=this.table,r=["all","filter","sort","display","freeze","group","tree","page"];if(this.redrawBlock)(!this.redrawBlockRestoreConfig||r.indexOf(e)<r.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:e,skipStage:t,renderInPosition:o});else{switch(this.table.modExists("edit")&&this.table.modules.edit.cancelEdit(),e||(e="all"),n.options.selectable&&!n.options.selectablePersistence&&n.modExists("selectRow")&&n.modules.selectRow.deselectRows(),e){case"all":case"filter":t?t=!1:n.modExists("filter")?this.setActiveRows(n.modules.filter.filter(this.rows)):this.setActiveRows(this.rows.slice(0));case"sort":t?t=!1:n.modExists("sort")&&n.modules.sort.sort(this.activeRows),this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":t?t=!1:this.table.modExists("frozenRows")&&n.modules.frozenRows.isFrozen()&&(n.modules.frozenRows.getDisplayIndex()||n.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.frozenRows.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.frozenRows.getRows(this.getDisplayRows(i-1)),i))&&n.modules.frozenRows.setDisplayIndex(i));case"group":t?t=!1:n.options.groupBy&&n.modExists("groupRows")&&(n.modules.groupRows.getDisplayIndex()||n.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.groupRows.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.groupRows.getRows(this.getDisplayRows(i-1)),i))&&n.modules.groupRows.setDisplayIndex(i));case"tree":t?t=!1:n.options.dataTree&&n.modExists("dataTree")&&(n.modules.dataTree.getDisplayIndex()||n.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.dataTree.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.dataTree.getRows(this.getDisplayRows(i-1)),i))&&n.modules.dataTree.setDisplayIndex(i)),n.options.pagination&&n.modExists("page")&&!o&&"local"==n.modules.page.getMode()&&n.modules.page.reset();case"page":t?t=!1:n.options.pagination&&n.modExists("page")&&(n.modules.page.getDisplayIndex()||n.modules.page.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.page.getDisplayIndex(),"local"==n.modules.page.getMode()&&n.modules.page.setMaxRows(this.getDisplayRows(i-1).length),!0!==(i=this.setDisplayRows(n.modules.page.getRows(this.getDisplayRows(i-1)),i))&&n.modules.page.setDisplayIndex(i))}h.prototype.helpers.elVisible(this.element)&&(o?this.reRenderInPosition():(this.renderTable(),n.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),n.modExists("columnCalcs")&&n.modules.columnCalcs.recalc(this.activeRows)}},s.prototype.regenerateRowNumbers=function(){var e=this;this.rowNumColumn&&this.activeRows.forEach((function(t){var o=t.getCell(e.rowNumColumn);o&&o._generateContents()}))},s.prototype.setActiveRows=function(e){this.activeRows=e,this.activeRowsCount=this.activeRows.length},s.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},s.prototype.getNextDisplayIndex=function(){return this.displayRows.length},s.prototype.setDisplayRows=function(e,t){var o=!0;return t&&void 0!==this.displayRows[t]?(this.displayRows[t]=e,o=!0):(this.displayRows.push(e),o=t=this.displayRows.length-1),t==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o},s.prototype.getDisplayRows=function(e){return void 0===e?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]},s.prototype.getVisibleRows=function(e){var t=this.element.scrollTop,o=this.element.clientHeight+t,i=!1,n=0,r=0,s=this.getDisplayRows();if(e){this.getDisplayRows();for(var a=this.vDomTop;a<=this.vDomBottom;a++)if(s[a])if(i){if(!(o-s[a].getElement().offsetTop>=0))break;r=a}else if(t-s[a].getElement().offsetTop>=0)n=a;else{if(i=!0,!(o-s[a].getElement().offsetTop>=0))break;r=a}}else n=this.vDomTop,r=this.vDomBottom;return s.slice(n,r+1)},s.prototype.displayRowIterator=function(e){this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},s.prototype.getRows=function(e){var t;switch(e){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!0);break;default:t=this.rows}return t},s.prototype.reRenderInPosition=function(e){if("virtual"==this.getRenderMode())if(this.redrawBlock)e?e():this.redrawBlockRederInPosition=!0;else{for(var t=this.element.scrollTop,o=!1,i=!1,n=this.scrollLeft,r=this.getDisplayRows(),s=this.vDomTop;s<=this.vDomBottom;s++)if(r[s]){var a=t-r[s].getElement().offsetTop;if(!(!1===i||Math.abs(a)<i))break;i=a,o=s}e&&e(),this._virtualRenderFill(!1===o?this.displayRowsCount-1:o,!0,i||0),this.scrollHorizontal(n)}else this.renderTable(),e&&e()},s.prototype.setRenderMode=function(){this.table.options.virtualDom?(this.renderMode="virtual",this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):this.renderMode="classic"},s.prototype.getRenderMode=function(){return this.renderMode},s.prototype.renderTable=function(){switch(this.table.options.renderStarted.call(this.table),this.element.scrollTop=0,this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill()}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll()),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.displayRowsCount||this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"),this.table.options.renderComplete.call(this.table)},s.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},s.prototype.checkClassicModeGroupHeaderWidth=function(){var e=this,t=this.tableElement,o=!0;e.getDisplayRows().forEach((function(i,n){e.styleRow(i,n),t.appendChild(i.getElement()),i.initialize(!0),"group"!==i.type&&(o=!1)})),t.style.minWidth=o?e.table.columnManager.getWidth()+"px":""},s.prototype.renderEmptyScroll=function(){this.table.options.placeholder?this.tableElement.style.display="none":(this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px",this.tableElement.style.minHeight="1px",this.tableElement.style.visibility="hidden")},s.prototype._clearVirtualDom=function(){var e=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},s.prototype.styleRow=function(e,t){var o=e.getElement();t%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))},s.prototype._virtualRenderFill=function(e,t,o){var i=this.tableElement,n=this.element,r=0,s=0,a=0,l=0,c=!0,u=this.getDisplayRows();if(o=o||0,e=e||0){for(;i.firstChild;)i.removeChild(i.firstChild);var d=(this.displayRowsCount-e+1)*this.vDomRowHeight;d<this.height&&(e-=Math.ceil((this.height-d)/this.vDomRowHeight))<0&&(e=0),e-=r=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e)}else this._clearVirtualDom();if(this.displayRowsCount&&h.prototype.helpers.elVisible(this.element)){for(this.vDomTop=e,this.vDomBottom=e-1;(s<=this.height+this.vDomWindowBuffer||l<this.vDomWindowMinTotalRows)&&this.vDomBottom<this.displayRowsCount-1;){var p,f=this.vDomBottom+1,m=u[f];this.styleRow(m,f),i.appendChild(m.getElement()),m.initialized?m.heightInitialized||m.normalizeHeight(!0):m.initialize(!0),p=m.getHeight(),l<r?a+=p:s+=p,p>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*p),"group"!==m.type&&(c=!1),this.vDomBottom++,l++}e?(this.vDomTopPad=t?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-a,this.vDomBottomPad=this.vDomBottom==this.displayRowsCount-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-s-a,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((s+a)/l),this.vDomBottomPad=this.vDomRowHeight*(this.displayRowsCount-this.vDomBottom-1),this.vDomScrollHeight=a+s+this.vDomBottomPad-this.height),i.style.paddingTop=this.vDomTopPad+"px",i.style.paddingBottom=this.vDomBottomPad+"px",t&&(this.scrollTop=this.vDomTopPad+a+o-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&t&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,n.scrollTop=this.scrollTop,i.style.minWidth=c?this.table.columnManager.getWidth()+"px":"",this.table.options.groupBy&&"fitDataFill"!=this.table.modules.layout.getMode()&&this.displayRowsCount==this.table.modules.groupRows.countGroups()&&(this.tableElement.style.minWidth=this.table.columnManager.getWidth())}else this.renderEmptyScroll();this.fixedHeight||this.adjustTableSize()},s.prototype.scrollVertical=function(e){var t=this.scrollTop-this.vDomScrollPosTop,o=this.scrollTop-this.vDomScrollPosBottom,i=2*this.vDomWindowBuffer;if(-t>i||o>i){var n=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(n)}else e?(t<0&&this._addTopRow(-t),o<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(-o):this.vDomScrollPosBottom=this.scrollTop)):(t>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(t):this.vDomScrollPosTop=this.scrollTop),o>=0&&this._addBottomRow(o))},s.prototype._addTopRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.tableElement,i=this.getDisplayRows();if(this.vDomTop){var n=this.vDomTop-1,r=i[n],s=r.getHeight()||this.vDomRowHeight;e>=s&&(this.styleRow(r,n),o.insertBefore(r.getElement(),o.firstChild),r.initialized&&r.heightInitialized||(this.vDomTopNewRows.push(r),r.heightInitialized||r.clearCellHeight()),r.initialize(),this.vDomTopPad-=s,this.vDomTopPad<0&&(this.vDomTopPad=n*this.vDomRowHeight),n||(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=s,this.vDomTop--),e=-(this.scrollTop-this.vDomScrollPosTop),r.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*r.getHeight()),t<this.vDomMaxRenderChain&&this.vDomTop&&e>=(i[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(e,t+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},s.prototype._removeTopRow=function(e){var t=this.tableElement,o=this.getDisplayRows()[this.vDomTop],i=o.getHeight()||this.vDomRowHeight;if(e>=i){var n=o.getElement();n.parentNode.removeChild(n),this.vDomTopPad+=i,t.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?i:i+this.vDomWindowBuffer,this.vDomTop++,e=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(e)}},s.prototype._addBottomRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.tableElement,i=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var n=this.vDomBottom+1,r=i[n],s=r.getHeight()||this.vDomRowHeight;e>=s&&(this.styleRow(r,n),o.appendChild(r.getElement()),r.initialized&&r.heightInitialized||(this.vDomBottomNewRows.push(r),r.heightInitialized||r.clearCellHeight()),r.initialize(),this.vDomBottomPad-=s,(this.vDomBottomPad<0||n==this.displayRowsCount-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=s,this.vDomBottom++),e=this.scrollTop-this.vDomScrollPosBottom,r.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*r.getHeight()),t<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&e>=(i[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(e,t+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},s.prototype._removeBottomRow=function(e){var t=this.tableElement,o=this.getDisplayRows()[this.vDomBottom],i=o.getHeight()||this.vDomRowHeight;if(e>=i){var n=o.getElement();n.parentNode&&n.parentNode.removeChild(n),this.vDomBottomPad+=i,this.vDomBottomPad<0&&(this.vDomBottomPad=0),t.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=i,this.vDomBottom--,e=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(e)}},s.prototype._quickNormalizeRowHeight=function(e){e.forEach((function(e){e.calcHeight()})),e.forEach((function(e){e.setCellHeight()})),e.length=0},s.prototype.normalizeHeight=function(){this.activeRows.forEach((function(e){e.normalizeHeight()}))},s.prototype.adjustTableSize=function(){var e,t=this.element.clientHeight;if("virtual"===this.renderMode){var o=this.columnManager.getElement().offsetHeight+(this.table.footerManager&&!this.table.footerManager.external?this.table.footerManager.getElement().offsetHeight:0);this.fixedHeight?(this.element.style.minHeight="calc(100% - "+o+"px)",this.element.style.height="calc(100% - "+o+"px)",this.element.style.maxHeight="calc(100% - "+o+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-o+"px",this.element.scrollTop=this.scrollTop),this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height,this.fixedHeight||t==this.element.clientHeight||((e=this.table.modExists("resizeTable"))&&!this.table.modules.resizeTable.autoResize||!e)&&this.redraw()}},s.prototype.reinitialize=function(){this.rows.forEach((function(e){e.reinitialize()}))},s.prototype.blockRedraw=function(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1},s.prototype.restoreRedraw=function(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1},s.prototype.redraw=function(e){var t=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():("classic"==this.renderMode?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(t)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},s.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))};var a=function(e){this._row=e};a.prototype.getData=function(e){return this._row.getData(e)},a.prototype.getElement=function(){return this._row.getElement()},a.prototype.getCells=function(){var e=[];return this._row.getCells().forEach((function(t){e.push(t.getComponent())})),e},a.prototype.getCell=function(e){var t=this._row.getCell(e);return!!t&&t.getComponent()},a.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},a.prototype.getPosition=function(e){return this._row.table.rowManager.getRowPosition(this._row,e)},a.prototype.delete=function(){return this._row.delete()},a.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},a.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)},a.prototype.move=function(e,t){this._row.moveToRow(e,t)},a.prototype.update=function(e){return this._row.updateData(e)},a.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},a.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},a.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},a.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},a.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},a.prototype._getSelf=function(){return this._row},a.prototype.validate=function(){return this._row.validate()},a.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},a.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},a.prototype.isFrozen=function(){return!!this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.rows.indexOf(this._row)>-1},a.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},a.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},a.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},a.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},a.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row)},a.prototype.addTreeChild=function(e,t,o){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.addTreeChildRow(this._row,e,t,o)},a.prototype.reformat=function(){return this._row.reinitialize()},a.prototype.getGroup=function(){return this._row.getGroup().getComponent()},a.prototype.getTable=function(){return this._row.table},a.prototype.getNextRow=function(){var e=this._row.nextRow();return e?e.getComponent():e},a.prototype.getPrevRow=function(){var e=this._row.prevRow();return e?e.getComponent():e};var l=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"row";this.table=t.table,this.parent=t,this.data={},this.type=o,this.element=this.createElement(),this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.setData(e),this.generateElement()};l.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.setAttribute("role","row"),e},l.prototype.getElement=function(){return this.element},l.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},l.prototype.generateElement=function(){var e,t,o,i=this;!1!==i.table.options.selectable&&i.table.modExists("selectRow")&&i.table.modules.selectRow.initializeRow(this),!1!==i.table.options.movableRows&&i.table.modExists("moveRow")&&i.table.modules.moveRow.initializeRow(this),!1!==i.table.options.dataTree&&i.table.modExists("dataTree")&&i.table.modules.dataTree.initializeRow(this),"collapse"===i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout")&&i.table.modules.responsiveLayout.initializeRow(this),i.table.options.rowContextMenu&&this.table.modExists("menu")&&i.table.modules.menu.initializeRow(this),i.table.options.rowClick&&i.element.addEventListener("click",(function(e){i.table.options.rowClick(e,i.getComponent())})),i.table.options.rowDblClick&&i.element.addEventListener("dblclick",(function(e){i.table.options.rowDblClick(e,i.getComponent())})),i.table.options.rowContext&&i.element.addEventListener("contextmenu",(function(e){i.table.options.rowContext(e,i.getComponent())})),i.table.options.rowMouseEnter&&i.element.addEventListener("mouseenter",(function(e){i.table.options.rowMouseEnter(e,i.getComponent())})),i.table.options.rowMouseLeave&&i.element.addEventListener("mouseleave",(function(e){i.table.options.rowMouseLeave(e,i.getComponent())})),i.table.options.rowMouseOver&&i.element.addEventListener("mouseover",(function(e){i.table.options.rowMouseOver(e,i.getComponent())})),i.table.options.rowMouseOut&&i.element.addEventListener("mouseout",(function(e){i.table.options.rowMouseOut(e,i.getComponent())})),i.table.options.rowMouseMove&&i.element.addEventListener("mousemove",(function(e){i.table.options.rowMouseMove(e,i.getComponent())})),i.table.options.rowTap&&(o=!1,i.element.addEventListener("touchstart",(function(e){o=!0}),{passive:!0}),i.element.addEventListener("touchend",(function(e){o&&i.table.options.rowTap(e,i.getComponent()),o=!1}))),i.table.options.rowDblTap&&(e=null,i.element.addEventListener("touchend",(function(t){e?(clearTimeout(e),e=null,i.table.options.rowDblTap(t,i.getComponent())):e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),i.table.options.rowTapHold&&(t=null,i.element.addEventListener("touchstart",(function(e){clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,o=!1,i.table.options.rowTapHold(e,i.getComponent())}),1e3)}),{passive:!0}),i.element.addEventListener("touchend",(function(e){clearTimeout(t),t=null})))},l.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},l.prototype.initialize=function(e){var t=this;if(!t.initialized||e){for(t.deleteCells();t.element.firstChild;)t.element.removeChild(t.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),t.cells.forEach((function(e){t.element.appendChild(e.getElement()),e.cellRendered()})),e&&t.normalizeHeight(),t.table.options.dataTree&&t.table.modExists("dataTree")&&t.table.modules.dataTree.layoutRow(this),"collapse"===t.table.options.responsiveLayout&&t.table.modExists("responsiveLayout")&&t.table.modules.responsiveLayout.layoutRow(this),t.table.options.rowFormatter&&t.table.options.rowFormatter(t.getComponent()),t.table.options.resizableRows&&t.table.modExists("resizeRows")&&t.table.modules.resizeRows.initializeRow(t),t.initialized=!0}},l.prototype.reinitializeHeight=function(){this.heightInitialized=!1,null!==this.element.offsetParent&&this.normalizeHeight(!0)},l.prototype.reinitialize=function(){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),null!==this.element.offsetParent&&this.initialize(!0)},l.prototype.calcHeight=function(e){var t=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach((function(e){var o=e.getHeight();o>t&&(t=o)})),this.height=e?Math.max(t,o):this.manualHeight?this.height:Math.max(t,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight},l.prototype.setCellHeight=function(){this.cells.forEach((function(e){e.setHeight()})),this.heightInitialized=!0},l.prototype.clearCellHeight=function(){this.cells.forEach((function(e){e.clearHeight()}))},l.prototype.normalizeHeight=function(e){e&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()},l.prototype.setHeight=function(e,t){(this.height!=e||t)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},l.prototype.getHeight=function(){return this.outerHeight},l.prototype.getWidth=function(){return this.element.offsetWidth},l.prototype.deleteCell=function(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)},l.prototype.setData=function(e){this.table.modExists("mutator")&&(e=this.table.modules.mutator.transformRow(e,"data")),this.data=e,this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)},l.prototype.updateData=function(e){var t,o=this,i=h.prototype.helpers.elVisible(this.element),n={};return new Promise((function(r,s){for(var a in"string"==typeof e&&(e=JSON.parse(e)),o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)&&o.table.modules.reactiveData.block(),o.table.modExists("mutator")?(n=Object.assign(n,o.data),n=Object.assign(n,e),t=o.table.modules.mutator.transformRow(n,"data",e)):t=e,t)o.data[a]=t[a];for(var a in o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)&&o.table.modules.reactiveData.unblock(),e){o.table.columnManager.getColumnsByFieldRoot(a).forEach((function(e){var n=o.getCell(e.getField());if(n){var r=e.getFieldValue(t);n.getValue()!=r&&(n.setValueProcessData(r),i&&n.cellRendered())}}))}i?(o.normalizeHeight(!0),o.table.options.rowFormatter&&o.table.options.rowFormatter(o.getComponent())):(o.initialized=!1,o.height=0,o.heightStyled=""),!1!==o.table.options.dataTree&&o.table.modExists("dataTree")&&o.table.modules.dataTree.redrawNeeded(e)&&(o.table.modules.dataTree.initializeRow(o),o.table.modules.dataTree.layoutRow(o),o.table.rowManager.refreshActiveData("tree",!1,!0)),o.table.options.rowUpdated.call(o.table,o.getComponent()),r()}))},l.prototype.getData=function(e){return e?this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this.data,e):void 0:this.data},l.prototype.getCell=function(e){return e=this.table.columnManager.findColumn(e),this.cells.find((function(t){return t.column===e}))},l.prototype.getCellIndex=function(e){return this.cells.findIndex((function(t){return t===e}))},l.prototype.findNextEditableCell=function(e){var t=!1;if(e<this.cells.length-1)for(var o=e+1;o<this.cells.length;o++){var i=this.cells[o];if(i.column.modules.edit&&h.prototype.helpers.elVisible(i.getElement())){var n=!0;if("function"==typeof i.column.modules.edit.check&&(n=i.column.modules.edit.check(i.getComponent())),n){t=i;break}}}return t},l.prototype.findPrevEditableCell=function(e){var t=!1;if(e>0)for(var o=e-1;o>=0;o--){var i=this.cells[o],n=!0;if(i.column.modules.edit&&h.prototype.helpers.elVisible(i.getElement())&&("function"==typeof i.column.modules.edit.check&&(n=i.column.modules.edit.check(i.getComponent())),n)){t=i;break}}return t},l.prototype.getCells=function(){return this.cells},l.prototype.nextRow=function(){return this.table.rowManager.nextDisplayRow(this,!0)||!1},l.prototype.prevRow=function(){return this.table.rowManager.prevDisplayRow(this,!0)||!1},l.prototype.moveToRow=function(e,t){var o=this.table.rowManager.findRow(e);o?(this.table.rowManager.moveRowActual(this,o,!t),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)},l.prototype.validate=function(){var e=[];return this.cells.forEach((function(t){t.validate()||e.push(t.getComponent())})),!e.length||e},l.prototype.delete=function(){var e=this;return new Promise((function(t,o){var i,n;e.table.options.history&&e.table.modExists("history")&&(e.table.options.groupBy&&e.table.modExists("groupRows")?(i=(n=e.getGroup().rows).indexOf(e))&&(i=n[i-1]):(i=e.table.rowManager.getRowIndex(e))&&(i=e.table.rowManager.rows[i-1]),e.table.modules.history.action("rowDelete",e,{data:e.getData(),pos:!i,index:i})),e.deleteActual(),t()}))},l.prototype.deleteActual=function(e){this.table.rowManager.getRowIndex(this);this.detatchModules(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0),this.modules.group&&this.modules.group.removeRow(this),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.rowDelete(this),this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},l.prototype.detatchModules=function(){this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.modExists("edit")&&this.table.modules.edit.currentCell.row===this&&this.table.modules.edit.cancelEdit(),this.table.modExists("frozenRows")&&this.table.modules.frozenRows.detachRow(this)},l.prototype.deleteCells=function(){for(var e=this.cells.length,t=0;t<e;t++)this.cells[0].delete()},l.prototype.wipe=function(){for(this.detatchModules(),this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element=!1,this.modules={},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},l.prototype.getGroup=function(){return this.modules.group||!1},l.prototype.getComponent=function(){return this.component||(this.component=new a(this)),this.component};var c=function(e){this._cell=e};c.prototype.getValue=function(){return this._cell.getValue()},c.prototype.getOldValue=function(){return this._cell.getOldValue()},c.prototype.getElement=function(){return this._cell.getElement()},c.prototype.getRow=function(){return this._cell.row.getComponent()},c.prototype.getData=function(){return this._cell.row.getData()},c.prototype.getField=function(){return this._cell.column.getField()},c.prototype.getColumn=function(){return this._cell.column.getComponent()},c.prototype.setValue=function(e,t){void 0===t&&(t=!0),this._cell.setValue(e,t)},c.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},c.prototype.edit=function(e){return this._cell.edit(e)},c.prototype.cancelEdit=function(){this._cell.cancelEdit()},c.prototype.isEdited=function(){return!!this._cell.modules.edit&&this._cell.modules.edit.edited},c.prototype.clearEdited=function(){self.table.modExists("edit",!0)&&this._cell.table.modules.edit.clearEdited(this._cell)},c.prototype.isValid=function(){return!this._cell.modules.validate||!this._cell.modules.validate.invalid},c.prototype.validate=function(){return this._cell.validate()},c.prototype.clearValidation=function(){self.table.modExists("validate",!0)&&this._cell.table.modules.validate.clearValidation(this._cell)},c.prototype.nav=function(){return this._cell.nav()},c.prototype.checkHeight=function(){this._cell.checkHeight()},c.prototype.getTable=function(){return this._cell.table},c.prototype._getSelf=function(){return this._cell};var u=function(e,t){this.table=e.table,this.column=e,this.row=t,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.build()};u.prototype.build=function(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data))},u.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},u.prototype._configureCell=function(){var e=this,t=e.column.cellEvents,o=e.element,i=this.column.getField();(o.style.textAlign=e.column.hozAlign,e.column.vertAlign&&(o.style.display="inline-flex",o.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[e.column.vertAlign]||"",e.column.hozAlign&&(o.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[e.column.hozAlign]||"")),i&&o.setAttribute("tabulator-field",i),e.column.definition.cssClass)&&e.column.definition.cssClass.split(" ").forEach((function(e){o.classList.add(e)}));"hover"===this.table.options.tooltipGenerationMode&&o.addEventListener("mouseenter",(function(t){e._generateTooltip()})),e._bindClickEvents(t),e._bindTouchEvents(t),e._bindMouseEvents(t),e.column.modules.edit&&e.table.modules.edit.bindEditor(e),e.column.definition.rowHandle&&!1!==e.table.options.movableRows&&e.table.modExists("moveRow")&&e.table.modules.moveRow.initializeCell(e),e.column.visible||e.hide()},u.prototype._bindClickEvents=function(e){var t=this,o=t.element;(e.cellClick||t.table.options.cellClick)&&o.addEventListener("click",(function(o){var i=t.getComponent();e.cellClick&&e.cellClick.call(t.table,o,i),t.table.options.cellClick&&t.table.options.cellClick.call(t.table,o,i)})),e.cellDblClick||this.table.options.cellDblClick?o.addEventListener("dblclick",(function(o){var i=t.getComponent();e.cellDblClick&&e.cellDblClick.call(t.table,o,i),t.table.options.cellDblClick&&t.table.options.cellDblClick.call(t.table,o,i)})):o.addEventListener("dblclick",(function(e){if(!t.table.modExists("edit")||t.table.modules.edit.currentCell!==t){e.preventDefault();try{if(document.selection)(o=document.body.createTextRange()).moveToElementText(t.element),o.select();else if(window.getSelection){var o;(o=document.createRange()).selectNode(t.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(o)}}catch(e){}}})),(e.cellContext||this.table.options.cellContext)&&o.addEventListener("contextmenu",(function(o){var i=t.getComponent();e.cellContext&&e.cellContext.call(t.table,o,i),t.table.options.cellContext&&t.table.options.cellContext.call(t.table,o,i)}))},u.prototype._bindMouseEvents=function(e){var t=this,o=t.element;(e.cellMouseEnter||t.table.options.cellMouseEnter)&&o.addEventListener("mouseenter",(function(o){var i=t.getComponent();e.cellMouseEnter&&e.cellMouseEnter.call(t.table,o,i),t.table.options.cellMouseEnter&&t.table.options.cellMouseEnter.call(t.table,o,i)})),(e.cellMouseLeave||t.table.options.cellMouseLeave)&&o.addEventListener("mouseleave",(function(o){var i=t.getComponent();e.cellMouseLeave&&e.cellMouseLeave.call(t.table,o,i),t.table.options.cellMouseLeave&&t.table.options.cellMouseLeave.call(t.table,o,i)})),(e.cellMouseOver||t.table.options.cellMouseOver)&&o.addEventListener("mouseover",(function(o){var i=t.getComponent();e.cellMouseOver&&e.cellMouseOver.call(t.table,o,i),t.table.options.cellMouseOver&&t.table.options.cellMouseOver.call(t.table,o,i)})),(e.cellMouseOut||t.table.options.cellMouseOut)&&o.addEventListener("mouseout",(function(o){var i=t.getComponent();e.cellMouseOut&&e.cellMouseOut.call(t.table,o,i),t.table.options.cellMouseOut&&t.table.options.cellMouseOut.call(t.table,o,i)})),(e.cellMouseMove||t.table.options.cellMouseMove)&&o.addEventListener("mousemove",(function(o){var i=t.getComponent();e.cellMouseMove&&e.cellMouseMove.call(t.table,o,i),t.table.options.cellMouseMove&&t.table.options.cellMouseMove.call(t.table,o,i)}))},u.prototype._bindTouchEvents=function(e){var t,o,i,n=this,r=n.element;(e.cellTap||this.table.options.cellTap)&&(i=!1,r.addEventListener("touchstart",(function(e){i=!0}),{passive:!0}),r.addEventListener("touchend",(function(t){if(i){var o=n.getComponent();e.cellTap&&e.cellTap.call(n.table,t,o),n.table.options.cellTap&&n.table.options.cellTap.call(n.table,t,o)}i=!1}))),(e.cellDblTap||this.table.options.cellDblTap)&&(t=null,r.addEventListener("touchend",(function(o){if(t){clearTimeout(t),t=null;var i=n.getComponent();e.cellDblTap&&e.cellDblTap.call(n.table,o,i),n.table.options.cellDblTap&&n.table.options.cellDblTap.call(n.table,o,i)}else t=setTimeout((function(){clearTimeout(t),t=null}),300)}))),(e.cellTapHold||this.table.options.cellTapHold)&&(o=null,r.addEventListener("touchstart",(function(t){clearTimeout(o),o=setTimeout((function(){clearTimeout(o),o=null,i=!1;var r=n.getComponent();e.cellTapHold&&e.cellTapHold.call(n.table,t,r),n.table.options.cellTapHold&&n.table.options.cellTapHold.call(n.table,t,r)}),1e3)}),{passive:!0}),r.addEventListener("touchend",(function(e){clearTimeout(o),o=null})))},u.prototype._generateContents=function(){var e;switch(void 0===(e=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":n(e)){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",null!=e&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=e}},u.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},u.prototype._generateTooltip=function(){var e=this.column.tooltip;e?(!0===e?e=this.value:"function"==typeof e&&!1===(e=e(this.getComponent()))&&(e=""),void 0===e&&(e=""),this.element.setAttribute("title",e)):this.element.setAttribute("title","")},u.prototype.getElement=function(){return this.element},u.prototype.getValue=function(){return this.value},u.prototype.getOldValue=function(){return this.oldValue},u.prototype.setValue=function(e,t){var o;this.setValueProcessData(e,t)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),o=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,o),this.cellRendered(),this.table.options.cellEdited.call(this.table,o),this.table.options.dataEdited.call(this.table,this.table.rowManager.getData()))},u.prototype.setValueProcessData=function(e,t){var o=!1;return this.value!=e&&(o=!0,t&&this.column.modules.mutate&&(e=this.table.modules.mutator.transformCell(this,e))),this.setValueActual(e),o&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),"table"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),o},u.prototype.setValueActual=function(e){this.oldValue=this.value,this.value=e,this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block(),this.column.setFieldValue(this.row.data,e),this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock(),this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),this.column.definition.contextMenu&&this.table.modExists("menu")&&this.table.modules.menu.initializeCell(this),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},u.prototype.setWidth=function(){this.width=this.column.width,this.element.style.width=this.column.widthStyled},u.prototype.clearWidth=function(){this.width="",this.element.style.width=""},u.prototype.getWidth=function(){return this.width||this.element.offsetWidth},u.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled},u.prototype.checkHeight=function(){this.row.reinitializeHeight()},u.prototype.clearHeight=function(){this.element.style.height="",this.height=null},u.prototype.setHeight=function(){this.height=this.row.height,this.element.style.height=this.row.heightStyled},u.prototype.getHeight=function(){return this.height||this.element.offsetHeight},u.prototype.show=function(){this.element.style.display=""},u.prototype.hide=function(){this.element.style.display="none"},u.prototype.edit=function(e){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,e)},u.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var e=this.table.modules.edit.getCurrentCell();e&&e._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},u.prototype.validate=function(){return!this.column.modules.validate||!this.table.modExists("validate",!0)||!0===this.table.modules.validate.validate(this.column.modules.validate,this,this.getValue())},u.prototype.delete=function(){!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.modules.validate&&this.modules.validate.invalid&&this.table.modules.validate.clearValidation(this),this.modules.edit&&this.modules.edit.edited&&this.table.modules.edit.clearEdited(this),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}},u.prototype.nav=function(){var e=this,t=!1,o=this.row.getCellIndex(this);return{next:function(){var t,o=this.right();return!!o||!(!(t=e.table.rowManager.nextDisplayRow(e.row,!0))||!(o=t.findNextEditableCell(-1)))&&(o.edit(),!0)},prev:function(){var t,o=this.left();return!!o||!(!(t=e.table.rowManager.prevDisplayRow(e.row,!0))||!(o=t.findPrevEditableCell(t.cells.length)))&&(o.edit(),!0)},left:function(){return!!(t=e.row.findPrevEditableCell(o))&&(t.edit(),!0)},right:function(){return!!(t=e.row.findNextEditableCell(o))&&(t.edit(),!0)},up:function(){var t=e.table.rowManager.prevDisplayRow(e.row,!0);t&&t.cells[o].edit()},down:function(){var t=e.table.rowManager.nextDisplayRow(e.row,!0);t&&t.cells[o].edit()}}},u.prototype.getIndex=function(){this.row.getCellIndex(this)},u.prototype.getComponent=function(){return this.component||(this.component=new c(this)),this.component};var d=function(e){this.table=e,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()};d.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e},d.prototype._initialize=function(e){if(this.table.options.footerElement)switch(n(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}},d.prototype.getElement=function(){return this.element},d.prototype.append=function(e,t){this.activate(t),this.element.appendChild(e),this.table.rowManager.adjustTableSize()},d.prototype.prepend=function(e,t){this.activate(t),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()},d.prototype.remove=function(e){e.parentNode.removeChild(e),this.deactivate()},d.prototype.deactivate=function(e){this.element.firstChild&&!e||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},d.prototype.activate=function(e){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),e&&this.links.push(e)},d.prototype.redraw=function(){this.links.forEach((function(e){e.footerRedraw()}))};var h=function e(t,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.modules={},this.initializeElement(t),this.initializeOptions(o||{}),this._create(),e.prototype.comms.register(this)};h.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",data:[],autoColumns:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,footerElement:!1,index:"id",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(e,t){return t},downloadComplete:!1,downloadConfig:{},downloadRowRange:"active",dataTree:!1,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(e,t){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupHeader:!1,groupHeaderPrint:null,groupHeaderClipboard:null,groupHeaderHtmlOutput:null,groupHeaderDownload:null,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsConnectedElements:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},movableRowsElementDrop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:function(){},ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupContextMenu:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationMode:"blocking",validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}},h.prototype.initializeOptions=function(e){if(!1!==e.invalidOptionWarnings)for(var t in e)void 0===this.defaultOptions[t]&&console.warn("Invalid table constructor option:",t);for(var t in this.defaultOptions)t in e?this.options[t]=e[t]:Array.isArray(this.defaultOptions[t])?this.options[t]=[]:"object"===n(this.defaultOptions[t])&&null!==this.defaultOptions[t]?this.options[t]={}:this.options[t]=this.defaultOptions[t]},h.prototype.initializeElement=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)},h.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={})),this.options.downloadDataFormatter&&console.warn("DEPRECATION WARNING - downloadDataFormatter option has been deprecated"),void 0!==this.options.clipboardCopyHeader&&(this.options.columnHeaders=this.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")),!0!==this.options.printVisibleRows&&(console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option"),this.options.persistence.printRowRange="active"),!0!==this.options.printCopyStyle&&(console.warn("printCopyStyle option is deprecated, you should now use the printStyled option"),this.options.persistence.printStyled=this.options.printCopyStyle),this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.columns&&(this.options.persistence.columns=!0)),this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.sort&&(this.options.persistence.sort=!0)),this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.filter&&(this.options.persistence.filter=!0)),this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)},h.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")},h.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new t(this),this.rowManager=new s(this),this.footerManager=new d(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this._buildElement(),this._loadInitialData()},h.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.reactiveData||(this.options.data=this.options.data.slice(0))},h.prototype._buildElement=function(){var e=this,t=this.element,o=this.modules,i=this.options;for(i.tableBuilding.call(this),t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);for(var n in i.height&&(i.height=isNaN(i.height)?i.height:i.height+"px",t.style.height=i.height),!1!==i.minHeight&&(i.minHeight=isNaN(i.minHeight)?i.minHeight:i.minHeight+"px",t.style.minHeight=i.minHeight),!1!==i.maxHeight&&(i.maxHeight=isNaN(i.maxHeight)?i.maxHeight:i.maxHeight+"px",t.style.maxHeight=i.maxHeight),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&o.layout.initialize(i.layout),!1!==i.headerFilterPlaceholder&&o.localize.setHeaderFilterPlaceholder(i.headerFilterPlaceholder),i.langs)o.localize.installLang(n,i.langs[n]);if(o.localize.setLocale(i.locale),"string"==typeof i.placeholder){var r=document.createElement("div");r.classList.add("tabulator-placeholder");var s=document.createElement("span");s.innerHTML=i.placeholder,r.appendChild(s),i.placeholder=r}if(t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),i.footerElement&&this.footerManager.activate(),i.persistence&&this.modExists("persistence",!0)&&o.persistence.initialize(),i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.columns&&(i.columns=o.persistence.load("columns",i.columns)),i.movableRows&&this.modExists("moveRow")&&o.moveRow.initialize(),i.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modExists("columnCalcs")&&o.columnCalcs.initialize(),this.columnManager.setColumns(i.columns),i.dataTree&&this.modExists("dataTree",!0)&&o.dataTree.initialize(),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.sort||i.initialSort)&&this.modExists("sort",!0)){var a=[];i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.sort?!1===(a=o.persistence.load("sort"))&&i.initialSort&&(a=i.initialSort):i.initialSort&&(a=i.initialSort),o.sort.setSort(a)}if((i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.filter||i.initialFilter)&&this.modExists("filter",!0)){var l=[];i.persistence&&this.modExists("persistence",!0)&&o.persistence.config.filter?!1===(l=o.persistence.load("filter"))&&i.initialFilter&&(l=i.initialFilter):i.initialFilter&&(l=i.initialFilter),o.filter.setFilter(l)}i.initialHeaderFilter&&this.modExists("filter",!0)&&i.initialHeaderFilter.forEach((function(t){var i=e.columnManager.findColumn(t.field);if(!i)return console.warn("Column Filter Error - No matching column found:",t.field),!1;o.filter.setHeaderFilterValue(i,t.value)})),this.modExists("ajax")&&o.ajax.initialize(),i.pagination&&this.modExists("page",!0)&&o.page.initialize(),i.groupBy&&this.modExists("groupRows",!0)&&o.groupRows.initialize(),this.modExists("keybindings")&&o.keybindings.initialize(),this.modExists("selectRow")&&o.selectRow.clearSelectionData(!0),i.autoResize&&this.modExists("resizeTable")&&o.resizeTable.initialize(),this.modExists("clipboard")&&o.clipboard.initialize(),i.printAsHtml&&this.modExists("print")&&o.print.initialize(),i.tableBuilt.call(this)},h.prototype._loadInitialData=function(){var e=this;if(e.options.pagination&&e.modExists("page"))if(e.modules.page.reset(!0,!0),"local"==e.options.pagination){if(e.options.data.length)e.rowManager.setData(e.options.data,!1,!0);else{if((e.options.ajaxURL||e.options.ajaxURLGenerator)&&e.modExists("ajax"))return void e.modules.ajax.loadData(!1,!0).then((function(){})).catch((function(){e.options.paginationInitialPage&&e.modules.page.setPage(e.options.paginationInitialPage)}));e.rowManager.setData(e.options.data,!1,!0)}e.options.paginationInitialPage&&e.modules.page.setPage(e.options.paginationInitialPage)}else e.options.ajaxURL?e.modules.page.setPage(e.options.paginationInitialPage).then((function(){})).catch((function(){})):e.rowManager.setData([],!1,!0);else e.options.data.length?e.rowManager.setData(e.options.data):(e.options.ajaxURL||e.options.ajaxURLGenerator)&&e.modExists("ajax")?e.modules.ajax.loadData(!1,!0).then((function(){})).catch((function(){})):e.rowManager.setData(e.options.data,!1,!0)},h.prototype.destroy=function(){var e=this.element;for(h.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach((function(e){e.wipe()})),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")},h.prototype._detectBrowser=function(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},h.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()},h.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()},h.prototype.setDataFromLocalFile=function(e){var t=this;return new Promise((function(o,i){var n=document.createElement("input");n.type="file",n.accept=e||".json,application/json",n.addEventListener("change",(function(e){var r,s=n.files[0],a=new FileReader;a.readAsText(s),a.onload=function(e){try{r=JSON.parse(a.result)}catch(e){return console.warn("File Load Error - File contents is invalid JSON",e),void i(e)}t.setData(r).then((function(e){o(e)})).catch((function(e){o(e)}))},a.onerror=function(e){console.warn("File Load Error - Unable to read file"),i()}})),n.click()}))},h.prototype.setData=function(e,t,o){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(e,t,o,!1,!0)},h.prototype._setData=function(e,t,o,i,n){return"string"!=typeof e?e?this.rowManager.setData(e,i,n):this.modExists("ajax")&&(this.modules.ajax.getUrl||this.options.ajaxURLGenerator)?"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0,!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(i,n):this.rowManager.setData([],i,n):0==e.indexOf("{")||0==e.indexOf("[")?this.rowManager.setData(JSON.parse(e),i,n):this.modExists("ajax",!0)?(t&&this.modules.ajax.setParams(t),o&&this.modules.ajax.setConfig(o),this.modules.ajax.setUrl(e),"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0,!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(i,n)):void 0},h.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},h.prototype.getData=function(e){return!0===e&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getData(e)},h.prototype.getDataCount=function(e){return!0===e&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getDataCount(e)},h.prototype.searchRows=function(e,t,o){if(this.modExists("filter",!0))return this.modules.filter.search("rows",e,t,o)},h.prototype.searchData=function(e,t,o){if(this.modExists("filter",!0))return this.modules.filter.search("data",e,t,o)},h.prototype.getHtml=function(e,t,o){if(this.modExists("export",!0))return this.modules.export.getHtml(e,t,o)},h.prototype.print=function(e,t,o){if(this.modExists("print",!0))return this.modules.print.printFullscreen(e,t,o)},h.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},h.prototype.replaceData=function(e,t,o){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(e,t,o,!0)},h.prototype.updateData=function(e){var t=this,o=this,i=0;return new Promise((function(n,r){t.modExists("ajax")&&t.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach((function(e){var t=o.rowManager.findRow(e[o.options.index]);t&&(i++,t.updateData(e).then((function(){--i||n()})))})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}))},h.prototype.addData=function(e,t,o){var i=this;return new Promise((function(n,r){i.modExists("ajax")&&i.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?i.rowManager.addRows(e,t,o).then((function(e){var t=[];e.forEach((function(e){t.push(e.getComponent())})),n(t)})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}))},h.prototype.updateOrAddData=function(e){var t=this,o=this,i=[],n=0;return new Promise((function(r,s){t.modExists("ajax")&&t.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach((function(e){var t=o.rowManager.findRow(e[o.options.index]);n++,t?t.updateData(e).then((function(){n--,i.push(t.getComponent()),n||r(i)})):o.rowManager.addRows(e).then((function(e){n--,i.push(e[0].getComponent()),n||r(i)}))})):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))}))},h.prototype.getRow=function(e){var t=this.rowManager.findRow(e);return t?t.getComponent():(console.warn("Find Error - No matching row found:",e),!1)},h.prototype.getRowFromPosition=function(e,t){var o=this.rowManager.getRowFromPosition(e,t);return o?o.getComponent():(console.warn("Find Error - No matching row found:",e),!1)},h.prototype.deleteRow=function(e){var t=this;return new Promise((function(o,i){var n=t,r=0,s=0,a=[];function l(){++r==e.length&&s&&(n.rowManager.reRenderInPosition(),o())}Array.isArray(e)||(e=[e]),e.forEach((function(e){var o=t.rowManager.findRow(e,!0);o?a.push(o):(console.warn("Delete Error - No matching row found:",e),i("Delete Error - No matching row found"),l())})),a.sort((function(e,o){return t.rowManager.rows.indexOf(e)>t.rowManager.rows.indexOf(o)?1:-1})),a.forEach((function(e){e.delete().then((function(){s++,l()})).catch((function(e){l(),i(e)}))}))}))},h.prototype.addRow=function(e,t,o){var i=this;return new Promise((function(n,r){"string"==typeof e&&(e=JSON.parse(e)),i.rowManager.addRows(e,t,o).then((function(e){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows),n(e[0].getComponent())}))}))},h.prototype.updateOrAddRow=function(e,t){var o=this;return new Promise((function(i,n){var r=o.rowManager.findRow(e);"string"==typeof t&&(t=JSON.parse(t)),r?r.updateData(t).then((function(){o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(o.rowManager.activeRows),i(r.getComponent())})).catch((function(e){n(e)})):r=o.rowManager.addRows(t).then((function(e){o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(o.rowManager.activeRows),i(e[0].getComponent())})).catch((function(e){n(e)}))}))},h.prototype.updateRow=function(e,t){var o=this;return new Promise((function(i,n){var r=o.rowManager.findRow(e);"string"==typeof t&&(t=JSON.parse(t)),r?r.updateData(t).then((function(){i(r.getComponent())})).catch((function(e){n(e)})):(console.warn("Update Error - No matching row found:",e),n("Update Error - No matching row found"))}))},h.prototype.scrollToRow=function(e,t,o){var i=this;return new Promise((function(n,r){var s=i.rowManager.findRow(e);s?i.rowManager.scrollToRow(s,t,o).then((function(){n()})).catch((function(e){r(e)})):(console.warn("Scroll Error - No matching row found:",e),r("Scroll Error - No matching row found"))}))},h.prototype.moveRow=function(e,t,o){var i=this.rowManager.findRow(e);i?i.moveToRow(t,o):console.warn("Move Error - No matching row found:",e)},h.prototype.getRows=function(e){return!0===e&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getComponents(e)},h.prototype.getRowPosition=function(e,t){var o=this.rowManager.findRow(e);return o?this.rowManager.getRowPosition(o,t):(console.warn("Position Error - No matching row found:",e),!1)},h.prototype.copyToClipboard=function(e){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(e)},h.prototype.setColumns=function(e){this.columnManager.setColumns(e)},h.prototype.getColumns=function(e){return this.columnManager.getComponents(e)},h.prototype.getColumn=function(e){var t=this.columnManager.findColumn(e);return t?t.getComponent():(console.warn("Find Error - No matching column found:",e),!1)},h.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},h.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},h.prototype.setColumnLayout=function(e){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,e)),!0)},h.prototype.showColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Show Error - No matching column found:",e),!1;t.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},h.prototype.hideColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Hide Error - No matching column found:",e),!1;t.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},h.prototype.toggleColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;t.visible?t.hide():t.show()},h.prototype.addColumn=function(e,t,o){var i=this;return new Promise((function(n,r){var s=i.columnManager.findColumn(o);i.columnManager.addColumn(e,t,s).then((function(e){n(e.getComponent())})).catch((function(e){r(e)}))}))},h.prototype.deleteColumn=function(e){var t=this;return new Promise((function(o,i){var n=t.columnManager.findColumn(e);n?n.delete().then((function(){o()})).catch((function(e){i(e)})):(console.warn("Column Delete Error - No matching column found:",e),i())}))},h.prototype.updateColumnDefinition=function(e,t){var o=this;return new Promise((function(i,n){var r=o.columnManager.findColumn(e);r?r.updateDefinition(t).then((function(e){i(e)})).catch((function(e){n(e)})):(console.warn("Column Update Error - No matching column found:",e),n())}))},h.prototype.moveColumn=function(e,t,o){var i=this.columnManager.findColumn(e),n=this.columnManager.findColumn(t);i?n?this.columnManager.moveColumn(i,n,o):console.warn("Move Error - No matching column found:",n):console.warn("Move Error - No matching column found:",e)},h.prototype.scrollToColumn=function(e,t,o){var i=this;return new Promise((function(n,r){var s=i.columnManager.findColumn(e);s?i.columnManager.scrollToColumn(s,t,o).then((function(){n()})).catch((function(e){r(e)})):(console.warn("Scroll Error - No matching column found:",e),r("Scroll Error - No matching column found"))}))},h.prototype.setLocale=function(e){this.modules.localize.setLocale(e)},h.prototype.getLocale=function(){return this.modules.localize.getLocale()},h.prototype.getLang=function(e){return this.modules.localize.getLang(e)},h.prototype.redraw=function(e){this.columnManager.redraw(e),this.rowManager.redraw(e)},h.prototype.setHeight=function(e){"classic"!==this.rowManager.renderMode?(this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.setRenderMode(),this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")},h.prototype.setSort=function(e,t){this.modExists("sort",!0)&&(this.modules.sort.setSort(e,t),this.rowManager.sorterRefresh())},h.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},h.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},h.prototype.setFilter=function(e,t,o,i){this.modExists("filter",!0)&&(this.modules.filter.setFilter(e,t,o,i),this.rowManager.filterRefresh())},h.prototype.addFilter=function(e,t,o,i){this.modExists("filter",!0)&&(this.modules.filter.addFilter(e,t,o,i),this.rowManager.filterRefresh())},h.prototype.getFilters=function(e){if(this.modExists("filter",!0))return this.modules.filter.getFilters(e)},h.prototype.setHeaderFilterFocus=function(e){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.modules.filter.setHeaderFilterFocus(t)}},h.prototype.getHeaderFilterValue=function(e){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(e);if(t)return this.modules.filter.getHeaderFilterValue(t);console.warn("Column Filter Error - No matching column found:",e)}},h.prototype.setHeaderFilterValue=function(e,t){if(this.modExists("filter",!0)){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Filter Error - No matching column found:",e),!1;this.modules.filter.setHeaderFilterValue(o,t)}},h.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},h.prototype.removeFilter=function(e,t,o){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(e,t,o),this.rowManager.filterRefresh())},h.prototype.clearFilter=function(e){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(e),this.rowManager.filterRefresh())},h.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},h.prototype.selectRow=function(e){this.modExists("selectRow",!0)&&(!0===e&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),e="active"),this.modules.selectRow.selectRows(e))},h.prototype.deselectRow=function(e){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(e)},h.prototype.toggleSelectRow=function(e){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(e)},h.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},h.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},h.prototype.getInvalidCells=function(){if(this.modExists("validate",!0))return this.modules.validate.getInvalidCells()},h.prototype.clearCellValidation=function(e){var t=this;this.modExists("validate",!0)&&(e||(e=this.modules.validate.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach((function(e){t.modules.validate.clearValidation(e._getSelf())})))},h.prototype.validate=function(e){var t=[];return this.rowManager.rows.forEach((function(e){var o=e.validate();!0!==o&&(t=t.concat(o))})),!t.length||t},h.prototype.setMaxPage=function(e){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(e)},h.prototype.setPage=function(e){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(e):new Promise((function(e,t){t()}))},h.prototype.setPageToRow=function(e){var t=this;return new Promise((function(o,i){t.options.pagination&&t.modExists("page")&&(e=t.rowManager.findRow(e))?t.modules.page.setPageToRow(e).then((function(){o()})).catch((function(){i()})):i()}))},h.prototype.setPageSize=function(e){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(e),this.modules.page.setPage(1).then((function(){})).catch((function(){}))},h.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},h.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},h.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},h.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},h.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},h.prototype.setGroupBy=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=e,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},h.prototype.setGroupStartOpen=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=e,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},h.prototype.setGroupHeader=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=e,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},h.prototype.getGroups=function(e){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},h.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},h.prototype.getEditedCells=function(){if(this.modExists("edit",!0))return this.modules.edit.getEditedCells()},h.prototype.clearCellEdited=function(e){var t=this;this.modExists("edit",!0)&&(e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach((function(e){t.modules.edit.clearEdited(e._getSelf())})))},h.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},h.prototype.recalc=function(){this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)},h.prototype.navigatePrev=function(){var e=!1;return!(!this.modExists("edit",!0)||!(e=this.modules.edit.currentCell))&&e.nav().prev()},h.prototype.navigateNext=function(){var e=!1;return!(!this.modExists("edit",!0)||!(e=this.modules.edit.currentCell))&&e.nav().next()},h.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},h.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},h.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},h.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().down())},h.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},h.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},h.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},h.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},h.prototype.download=function(e,t,o,i){this.modExists("download",!0)&&this.modules.download.download(e,t,o,i)},h.prototype.downloadToTab=function(e,t,o,i){this.modExists("download",!0)&&this.modules.download.download(e,t,o,i,!0)},h.prototype.tableComms=function(e,t,o,i){this.modules.comms.receive(e,t,o,i)},h.prototype.moduleBindings={},h.prototype.extendModule=function(e,t,o){if(h.prototype.moduleBindings[e]){var i=h.prototype.moduleBindings[e].prototype[t];if(i)if("object"==(void 0===o?"undefined":n(o)))for(var r in o)i[r]=o[r];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",t)}else console.warn("Module Error - module does not exist:",e)},h.prototype.registerModule=function(e,t){h.prototype.moduleBindings[e]=t},h.prototype.bindModules=function(){for(var e in this.modules={},h.prototype.moduleBindings)this.modules[e]=new h.prototype.moduleBindings[e](this)},h.prototype.modExists=function(e,t){return!!this.modules[e]||(t&&console.error("Tabulator Module Not Installed: "+e),!1)},h.prototype.helpers={elVisible:function(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)},elOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(e){var t=Array.isArray(e)?[]:{};for(var o in e)null!=e[o]&&"object"===n(e[o])?e[o]instanceof Date?t[o]=new Date(e[o]):t[o]=this.deepClone(e[o]):t[o]=e[o];return t}},h.prototype.comms={tables:[],register:function(e){h.prototype.comms.tables.push(e)},deregister:function(e){var t=h.prototype.comms.tables.indexOf(e);t>-1&&h.prototype.comms.tables.splice(t,1)},lookupTable:function(e,t){var o,i,n=[];if("string"==typeof e){if((o=document.querySelectorAll(e)).length)for(var r=0;r<o.length;r++)(i=h.prototype.comms.matchElement(o[r]))&&n.push(i)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof h?(i=h.prototype.comms.matchElement(e))&&n.push(i):Array.isArray(e)?e.forEach((function(e){n=n.concat(h.prototype.comms.lookupTable(e))})):t||console.warn("Table Connection Error - Invalid Selector",e);return n},matchElement:function(e){return h.prototype.comms.tables.find((function(t){return e instanceof h?t===e:t.element===e}))}},h.prototype.findTable=function(e){var t=h.prototype.comms.lookupTable(e,!0);return!(Array.isArray(t)&&!t.length)&&t};var p=function(e){this.table=e,this.mode=null};p.prototype.initialize=function(e){this.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},p.prototype.getMode=function(){return this.mode},p.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex)},p.prototype.modes={fitData:function(e){e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(e){e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataTable:function(e){e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(e){var t=this,o=0,i=this.table.rowManager.element.clientWidth,n=0,r=!1;e.forEach((function(e,i){e.widthFixed||e.reinitializeWidth(),(t.table.options.responsiveLayout?e.modules.responsive.visible:e.visible)&&(r=e),e.visible&&(o+=e.getWidth())})),r?(n=i-o+r.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(r.setWidth(0),this.table.modules.responsiveLayout.update()),n>0?r.setWidth(n):r.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(e){var t,o,i=this.table.element.clientWidth,n=0,r=0,s=0,a=[],l=[],c=0,u=0;function d(e){return"string"==typeof e?e.indexOf("%")>-1?i/100*parseInt(e):parseInt(e):e}function h(e,t,o,i){var n=[],r=0,s=0,a=0,l=0,c=0,u=[];function p(e){return o*(e.column.definition.widthGrow||1)}function f(e){return d(e.width)-o*(e.column.definition.widthShrink||0)}return e.forEach((function(e,t){var o=i?f(e):p(e);e.column.minWidth>=o?n.push(e):(u.push(e),c+=i?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)})),n.length?(n.forEach((function(e){r+=i?e.width-e.column.minWidth:e.column.minWidth,e.width=e.column.minWidth})),l=(s=t-r)-(a=c?Math.floor(s/c):s)*c,l+=h(u,s,a,i)):(l=c?t-Math.floor(t/c)*c:t,u.forEach((function(e){e.width=i?f(e):p(e)}))),l}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(i-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),e.forEach((function(e){var t,o,i;e.visible&&(t=e.definition.width,o=parseInt(e.minWidth),t?(i=d(t),n+=i>o?i:o,e.definition.widthShrink&&(l.push({column:e,width:i>o?i:o}),c+=e.definition.widthShrink)):(a.push({column:e,width:0}),s+=e.definition.widthGrow||1))})),r=i-n,t=Math.floor(r/s);u=h(a,r,t,!1);a.length&&u>0&&(a[a.length-1].width+=+u),a.forEach((function(e){r-=e.width})),(o=Math.abs(u)+r)>0&&c&&(u=h(l,o,Math.floor(o/c),!0)),l.length&&(l[l.length-1].width-=u),a.forEach((function(e){e.column.setWidth(e.width)})),l.forEach((function(e){e.column.setWidth(e.width)}))}},h.prototype.registerModule("layout",p);var f=function(e){this.table=e,this.locale="default",this.lang=!1,this.bindings={}};f.prototype.setHeaderFilterPlaceholder=function(e){this.langs.default.headerFilters.default=e},f.prototype.setHeaderFilterColumnPlaceholder=function(e,t){this.langs.default.headerFilters.columns[e]=t,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=t)},f.prototype.installLang=function(e,t){this.langs[e]?this._setLangProp(this.langs[e],t):this.langs[e]=t},f.prototype._setLangProp=function(e,t){for(var o in t)e[o]&&"object"==n(e[o])?this._setLangProp(e[o],t[o]):e[o]=t[o]},f.prototype.setLocale=function(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langs[e]){var t=e.split("-")[0];this.langs[t]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,t),e=t):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=h.prototype.helpers.deepClone(this.langs.default||{}),"default"!=e&&function e(t,o){for(var i in t)"object"==n(t[i])?(o[i]||(o[i]={}),e(t[i],o[i])):o[i]=t[i]}(this.langs[e],this.lang),this.table.options.localized.call(this.table,this.locale,this.lang),this._executeBindings()},f.prototype.getLocale=function(e){return self.locale},f.prototype.getLang=function(e){return e?this.langs[e]:this.lang},f.prototype.getText=function(e,t){var o=(e=t?e+"|"+t:e).split("|");return this._getLangElement(o,this.locale)||""},f.prototype._getLangElement=function(e,t){var o=this.lang;return e.forEach((function(e){var t;o&&(t=o[e],o=void 0!==t&&t)})),o},f.prototype.bind=function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t),t(this.getText(e),this.lang)},f.prototype._executeBindings=function(){var e=this,t=function(t){e.bindings[t].forEach((function(o){o(e.getText(t),e.lang)}))};for(var o in e.bindings)t(o)},f.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},h.prototype.registerModule("localize",f);var m=function(e){this.table=e};m.prototype.getConnections=function(e){var t=this,o=[];return h.prototype.comms.lookupTable(e).forEach((function(e){t.table!==e&&o.push(e)})),o},m.prototype.send=function(e,t,o,i){var n=this,r=this.getConnections(e);r.forEach((function(e){e.tableComms(n.table.element,t,o,i)})),!r.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)},m.prototype.receive=function(e,t,o,i){if(this.table.modExists(t))return this.table.modules[t].commsReceived(e,o,i);console.warn("Inter-table Comms Error - no such module:",t)},h.prototype.registerModule("comms",m);var g=function(e){this.table=e,this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]};g.prototype.initializeColumn=function(e){var t=this,o=!1,i={};this.allowedTypes.forEach((function(n){var r,s="accessor"+(n.charAt(0).toUpperCase()+n.slice(1));e.definition[s]&&(r=t.lookupAccessor(e.definition[s]))&&(o=!0,i[s]={accessor:r,params:e.definition[s+"Params"]||{}})})),o&&(e.modules.accessor=i)},g.prototype.lookupAccessor=function(e){var t=!1;switch(void 0===e?"undefined":n(e)){case"string":this.accessors[e]?t=this.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":t=e}return t},g.prototype.transformRow=function(e,t){var o="accessor"+(t.charAt(0).toUpperCase()+t.slice(1)),i=h.prototype.helpers.deepClone(e||{});return this.table.columnManager.traverse((function(e){var n,r,s,a;e.modules.accessor&&(r=e.modules.accessor[o]||e.modules.accessor.accessor||!1)&&"undefined"!=(n=e.getFieldValue(i))&&(a=e.getComponent(),s="function"==typeof r.params?r.params(n,i,t,a):r.params,e.setFieldValue(i,r.accessor(n,i,t,s,a)))})),i},g.prototype.accessors={},h.prototype.registerModule("accessor",g);var b=function(e){this.table=e,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0};b.prototype.initialize=function(){var e;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((e=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=e.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&("string"==typeof this.table.options.ajaxLoaderError?((e=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=e.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},b.prototype.createLoaderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-loader"),e},b.prototype.createMsgElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-loader-msg"),e.setAttribute("role","alert"),e},b.prototype.setParams=function(e,t){if(t)for(var o in this.params=this.params||{},e)this.params[o]=e[o];else this.params=e},b.prototype.getParams=function(){return this.params||{}},b.prototype.setConfig=function(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(var t in e)this.config[t]=e[t]},b.prototype._loadDefaultConfig=function(e){if(!this.config||e)for(var t in this.config={},this.defaultConfig)this.config[t]=this.defaultConfig[t]},b.prototype.setUrl=function(e){this.url=e},b.prototype.getUrl=function(){return this.url},b.prototype.loadData=function(e,t){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(e,t)},b.prototype.nextPage=function(e){this.loading||e<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then((function(){})).catch((function(){}))},b.prototype.blockActiveRequest=function(){this.requestOrder++},b.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},b.prototype._loadDataStandard=function(e,t){var o=this;return new Promise((function(i,n){o.sendRequest(e).then((function(r){o.table.rowManager.setData(r,e,t).then((function(){i()})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}))},b.prototype.generateParamsList=function(e,t){var o=this,i=[];if(t=t||"",Array.isArray(e))e.forEach((function(e,n){i=i.concat(o.generateParamsList(e,t?t+"["+n+"]":n))}));else if("object"===(void 0===e?"undefined":n(e)))for(var r in e)i=i.concat(o.generateParamsList(e[r],t?t+"["+r+"]":r));else i.push({key:t,value:e});return i},b.prototype.serializeParams=function(e){var t=this.generateParamsList(e),o=[];return t.forEach((function(e){o.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value))})),o.join("&")},b.prototype.sendRequest=function(e){var t,o=this,i=this,n=i.url;return i.requestOrder++,t=i.requestOrder,i._loadDefaultConfig(),new Promise((function(r,s){!1!==i.table.options.ajaxRequesting.call(o.table,i.url,i.params)?(i.loading=!0,e||i.showLoader(),o.loaderPromise(n,i.config,i.params).then((function(e){t===i.requestOrder?(i.table.options.ajaxResponse&&(e=i.table.options.ajaxResponse.call(i.table,i.url,i.params,e)),r(e),i.hideLoader(),i.loading=!1):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")})).catch((function(e){console.error("Ajax Load Error: ",e),i.table.options.ajaxError.call(i.table,e),i.showError(),setTimeout((function(){i.hideLoader()}),3e3),i.loading=!1,s()}))):s()}))},b.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},b.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},b.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},b.prototype.defaultConfig={method:"GET"},b.prototype.defaultURLGenerator=function(e,t,o){return e&&o&&Object.keys(o).length&&(t.method&&"get"!=t.method.toLowerCase()||(t.method="get",e+=(e.includes("?")?"&":"?")+this.serializeParams(o))),e},b.prototype.defaultLoaderPromise=function(e,t,o){var i,r=this;return new Promise((function(s,a){if(e=r.urlGenerator(e,t,o),"GET"!=t.method.toUpperCase())if(i="object"===n(r.table.options.ajaxContentType)?r.table.options.ajaxContentType:r.contentTypeFormatters[r.table.options.ajaxContentType]){for(var l in i.headers)t.headers||(t.headers={}),void 0===t.headers[l]&&(t.headers[l]=i.headers[l]);t.body=i.body.call(r,e,t,o)}else console.warn("Ajax Error - Invalid ajaxContentType value:",r.table.options.ajaxContentType);e?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers["Access-Control-Allow-Origin"]&&(t.headers["Access-Control-Allow-Origin"]=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(e,t).then((function(e){e.ok?e.json().then((function(e){s(e)})).catch((function(e){a(e),console.warn("Ajax Load Error - Invalid JSON returned",e)})):(console.error("Ajax Load Error - Connection Error: "+e.status,e.statusText),a(e))})).catch((function(e){console.error("Ajax Load Error - Connection Error: ",e),a(e)}))):(console.warn("Ajax Load Error - No URL Set"),s([]))}))},b.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(e,t,o){return JSON.stringify(o)}},form:{headers:{},body:function(e,t,o){var i=this.generateParamsList(o),n=new FormData;return i.forEach((function(e){n.append(e.key,e.value)})),n}}},h.prototype.registerModule("ajax",b);var v=function(e){this.table=e,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()};v.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e},v.prototype.initialize=function(){this.genColumn=new r({field:"value"},this)},v.prototype.registerColumnField=function(){},v.prototype.initializeColumn=function(e){var t=e.definition,o={topCalcParams:t.topCalcParams||{},botCalcParams:t.bottomCalcParams||{}};if(t.topCalc){switch(n(t.topCalc)){case"string":this.calculations[t.topCalc]?o.topCalc=this.calculations[t.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.topCalc);break;case"function":o.topCalc=t.topCalc}o.topCalc&&(e.modules.columnCalcs=o,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(t.bottomCalc){switch(n(t.bottomCalc)){case"string":this.calculations[t.bottomCalc]?o.botCalc=this.calculations[t.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.bottomCalc);break;case"function":o.botCalc=t.bottomCalc}o.botCalc&&(e.modules.columnCalcs=o,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},v.prototype.removeCalcs=function(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()},v.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},v.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},v.prototype.scrollHorizontal=function(e){this.table.columnManager.getElement().scrollWidth,this.table.element.clientWidth;this.botInitialized&&(this.botRow.getElement().style.marginLeft=-e+"px")},v.prototype.recalc=function(e){var t;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),t=this.generateRow("top",this.rowsToData(e)),this.topRow=t;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(t.getElement()),t.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),t=this.generateRow("bottom",this.rowsToData(e)),this.botRow=t;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(t.getElement()),t.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},v.prototype.recalcRowGroup=function(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))},v.prototype.recalcAll=function(){var e=this;(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalc(this.table.rowManager.activeRows),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs&&table.modules.groupRows.getChildGroups().forEach((function(t){e.recalcGroup(t)})))},v.prototype.recalcGroup=function(e){var t,o;e&&e.calcs&&(e.calcs.bottom&&(t=this.rowsToData(e.rows),o=this.generateRowData("bottom",t),e.calcs.bottom.updateData(o),e.calcs.bottom.reinitialize()),e.calcs.top&&(t=this.rowsToData(e.rows),o=this.generateRowData("top",t),e.calcs.top.updateData(o),e.calcs.top.reinitialize()))},v.prototype.generateTopRow=function(e){return this.generateRow("top",this.rowsToData(e))},v.prototype.generateBottomRow=function(e){return this.generateRow("bottom",this.rowsToData(e))},v.prototype.rowsToData=function(e){var t=this,o=[];return e.forEach((function(e){if(o.push(e.getData()),t.table.options.dataTree&&t.table.options.dataTreeChildColumnCalcs&&e.modules.dataTree.open){var i=t.rowsToData(t.table.modules.dataTree.getFilteredTreeChildren(e));o=o.concat(i)}})),o},v.prototype.generateRow=function(e,t){var o,i=this,n=this.generateRowData(e,t);return i.table.modExists("mutator")&&i.table.modules.mutator.disable(),o=new l(n,this,"calc"),i.table.modExists("mutator")&&i.table.modules.mutator.enable(),o.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),o.generateCells=function(){var t=[];i.table.columnManager.columnsByIndex.forEach((function(n){i.genColumn.setField(n.getField()),i.genColumn.hozAlign=n.hozAlign,n.definition[e+"CalcFormatter"]&&i.table.modExists("format")?i.genColumn.modules.format={formatter:i.table.modules.format.getFormatter(n.definition[e+"CalcFormatter"]),params:n.definition[e+"CalcFormatterParams"]}:i.genColumn.modules.format={formatter:i.table.modules.format.getFormatter("plaintext"),params:{}},i.genColumn.definition.cssClass=n.definition.cssClass;var r=new u(i.genColumn,o);r.column=n,r.setWidth(),n.cells.push(r),t.push(r),n.visible||r.hide()})),this.cells=t},o},v.prototype.generateRowData=function(e,t){var o,i,n={},r="top"==e?this.topCalcs:this.botCalcs,s="top"==e?"topCalc":"botCalc";return r.forEach((function(e){var r=[];e.modules.columnCalcs&&e.modules.columnCalcs[s]&&(t.forEach((function(t){r.push(e.getFieldValue(t))})),i=s+"Params",o="function"==typeof e.modules.columnCalcs[i]?e.modules.columnCalcs[i](r,t):e.modules.columnCalcs[i],e.setFieldValue(n,e.modules.columnCalcs[s](r,t,o)))})),n},v.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},v.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},v.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},v.prototype.getResults=function(){var e=this,t={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach((function(o){t[o.getKey()]=e.getGroupResults(o)})):t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},t},v.prototype.getGroupResults=function(e){var t=this,o=e._getSelf(),i=e.getSubGroups(),n={};return i.forEach((function(e){n[e.getKey()]=t.getGroupResults(e)})),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:n}},v.prototype.calculations={avg:function(e,t,o){var i=0,n=void 0!==o.precision?o.precision:2;return e.length&&(i=e.reduce((function(e,t){return e+(t=Number(t))})),i/=e.length,i=!1!==n?i.toFixed(n):i),parseFloat(i).toString()},max:function(e,t,o){var i=null,n=void 0!==o.precision&&o.precision;return e.forEach((function(e){((e=Number(e))>i||null===i)&&(i=e)})),null!==i?!1!==n?i.toFixed(n):i:""},min:function(e,t,o){var i=null,n=void 0!==o.precision&&o.precision;return e.forEach((function(e){((e=Number(e))<i||null===i)&&(i=e)})),null!==i?!1!==n?i.toFixed(n):i:""},sum:function(e,t,o){var i=0,n=void 0!==o.precision&&o.precision;return e.length&&e.forEach((function(e){e=Number(e),i+=isNaN(e)?0:Number(e)})),!1!==n?i.toFixed(n):i},concat:function(e,t,o){var i=0;return e.length&&(i=e.reduce((function(e,t){return String(e)+String(t)}))),i},count:function(e,t,o){var i=0;return e.length&&e.forEach((function(e){e&&i++})),i}},h.prototype.registerModule("columnCalcs",v);var y=function(e){this.table=e,this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0};y.prototype.initialize=function(){var e=this;this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",(function(t){var o,i;if(!e.blocked){if(t.preventDefault(),e.customSelection)o=e.customSelection,e.table.options.clipboardCopyFormatter&&(o=e.table.options.clipboardCopyFormatter("plain",o));else{var n=e.table.modules.export.generateExportList(e.rowRange,e.table.options.clipboardCopyStyled,e.table.options.clipboardCopyConfig,"clipboard");o=(i=e.table.modules.export.genereateHTMLTable(n))?e.generatePlainContent(n):"",e.table.options.clipboardCopyFormatter&&(o=e.table.options.clipboardCopyFormatter("plain",o),i=e.table.options.clipboardCopyFormatter("html",i))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",o),i&&t.clipboardData.setData("text/html",i)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",o),i&&t.originalEvent.clipboardData.setData("text/html",i)),e.table.options.clipboardCopied.call(e.table,o,i),e.reset()}})),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",(function(t){e.paste(t)})),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},y.prototype.reset=function(){this.blocked=!1,this.originalSelectionText=""},y.prototype.generatePlainContent=function(e){var t=[];return e.forEach((function(e){var o=[];e.columns.forEach((function(t){var i="";if(t)switch("group"===e.type&&(t.value=t.component.getKey()),n(t.value)){case"object":i=JSON.stringify(t.value);break;case"undefined":case"null":i="";break;default:i=t.value}o.push(i)})),t.push(o.join("\t"))})),t.join("\n")},y.prototype.copy=function(e,t){var o,i;this.blocked=!1,this.customSelection=!1,!0!==this.mode&&"copy"!==this.mode||(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(o=window.getSelection()).toString()&&t&&(this.customSelection=o.toString()),o.removeAllRanges(),o.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((i=document.body.createTextRange()).moveToElementText(this.table.element),i.select()),document.execCommand("copy"),o&&o.removeAllRanges())},y.prototype.setPasteAction=function(e){switch(void 0===e?"undefined":n(e)){case"string":this.pasteAction=this.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}},y.prototype.setPasteParser=function(e){switch(void 0===e?"undefined":n(e)){case"string":this.pasteParser=this.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}},y.prototype.paste=function(e){var t,o,i;this.checkPaseOrigin(e)&&(t=this.getPasteData(e),(o=this.pasteParser.call(this,t))?(e.preventDefault(),this.table.modExists("mutator")&&(o=this.mutateData(o)),i=this.pasteAction.call(this,o),this.table.options.clipboardPasted.call(this.table,t,o,i)):this.table.options.clipboardPasteError.call(this.table,t))},y.prototype.mutateData=function(e){var t=this,o=[];return Array.isArray(e)?e.forEach((function(e){o.push(t.table.modules.mutator.transformRow(e,"clipboard"))})):o=e,o},y.prototype.checkPaseOrigin=function(e){var t=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(t=!1),t},y.prototype.getPasteData=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(t=e.originalEvent.clipboardData.getData("text/plain")),t},y.prototype.pasteParsers={table:function(e){var t=[],o=!0,i=this.table.columnManager.columns,n=[],r=[];return(e=e.split("\n")).forEach((function(e){t.push(e.split("\t"))})),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach((function(e){var t=i.find((function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()}));t?n.push(t):o=!1})),o||(o=!0,n=[],t[0].forEach((function(e){var t=i.find((function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()}));t?n.push(t):o=!1})),o||(n=this.table.columnManager.columnsByIndex)),o&&t.shift(),t.forEach((function(e){var t={};e.forEach((function(e,o){n[o]&&(t[n[o].field]=e)})),r.push(t)})),r)}},y.prototype.pasteActions={replace:function(e){return this.table.setData(e)},update:function(e){return this.table.updateOrAddData(e)},insert:function(e){return this.table.addData(e)}},h.prototype.registerModule("clipboard",y);var w=function(e){this.table=e,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0};w.prototype.initialize=function(){var e=null,t=this.table.columnManager.getFirstVisibileColumn(),o=this.table.options;switch(this.field=o.dataTreeChildField,this.indent=o.dataTreeChildIndent,this.elementField=o.dataTreeElementColumn||!!t&&t.field,o.dataTreeBranchElement&&(!0===o.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof o.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=o.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=o.dataTreeBranchElement),o.dataTreeCollapseElement?"string"==typeof o.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=o.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=o.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),o.dataTreeExpandElement?"string"==typeof o.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=o.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=o.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),n(o.dataTreeStartExpanded)){case"boolean":this.startOpen=function(e,t){return o.dataTreeStartExpanded};break;case"function":this.startOpen=o.dataTreeStartExpanded;break;default:this.startOpen=function(e,t){return o.dataTreeStartExpanded[t]}}},w.prototype.initializeRow=function(e){var t=e.getData()[this.field],o=Array.isArray(t),i=o||!o&&"object"===(void 0===t?"undefined":n(t))&&null!==t;!i&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!i&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!i&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!i)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!i)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:i}},w.prototype.layoutRow=function(e){var t=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),o=e.modules.dataTree;o.branchEl&&(o.branchEl.parentNode&&o.branchEl.parentNode.removeChild(o.branchEl),o.branchEl=!1),o.controlEl&&(o.controlEl.parentNode&&o.controlEl.parentNode.removeChild(o.controlEl),o.controlEl=!1),this.generateControlElement(e,t),e.element.classList.add("tabulator-tree-level-"+o.index),o.index&&(this.branchEl?(o.branchEl=this.branchEl.cloneNode(!0),t.insertBefore(o.branchEl,t.firstChild),o.branchEl.style.marginLeft=(o.branchEl.offsetWidth+o.branchEl.style.marginRight)*(o.index-1)+o.index*this.indent+"px"):t.style.paddingLeft=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-left"))+o.index*this.indent+"px")},w.prototype.generateControlElement=function(e,t){var o=this,i=e.modules.dataTree,n=(t=t||e.getCells()[0].getElement(),i.controlEl);!1!==i.children&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",(function(t){t.stopPropagation(),o.collapseRow(e)}))):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",(function(t){t.stopPropagation(),o.expandRow(e)}))),i.controlEl.addEventListener("mousedown",(function(e){e.stopPropagation()})),n&&n.parentNode===t?n.parentNode.replaceChild(i.controlEl,n):t.insertBefore(i.controlEl,t.firstChild))},w.prototype.setDisplayIndex=function(e){this.displayIndex=e},w.prototype.getDisplayIndex=function(){return this.displayIndex},w.prototype.getRows=function(e){var t=this,o=[];return e.forEach((function(e,i){var n;o.push(e),e instanceof l&&((n=e.modules.dataTree.children).index||!1===n.children||t.getChildren(e).forEach((function(e){o.push(e)})))})),o},w.prototype.getChildren=function(e){var t=this,o=e.modules.dataTree,i=[],n=[];return!1!==o.children&&o.open&&(Array.isArray(o.children)||(o.children=this.generateChildren(e)),i=this.table.modExists("filter")?this.table.modules.filter.filter(o.children):o.children,this.table.modExists("sort")&&this.table.modules.sort.sort(i),i.forEach((function(e){n.push(e),t.getChildren(e).forEach((function(e){n.push(e)}))}))),n},w.prototype.generateChildren=function(e){var t=this,o=[],i=e.getData()[this.field];return Array.isArray(i)||(i=[i]),i.forEach((function(i){var n=new l(i||{},t.table.rowManager);n.modules.dataTree.index=e.modules.dataTree.index+1,n.modules.dataTree.parent=e,n.modules.dataTree.children&&(n.modules.dataTree.open=t.startOpen(n.getComponent(),n.modules.dataTree.index)),o.push(n)})),o},w.prototype.expandRow=function(e,t){var o=e.modules.dataTree;!1!==o.children&&(o.open=!0,e.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(e.getComponent(),e.modules.dataTree.index))},w.prototype.collapseRow=function(e){var t=e.modules.dataTree;!1!==t.children&&(t.open=!1,e.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(e.getComponent(),e.modules.dataTree.index))},w.prototype.toggleRow=function(e){var t=e.modules.dataTree;!1!==t.children&&(t.open?this.collapseRow(e):this.expandRow(e))},w.prototype.getTreeParent=function(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()},w.prototype.getFilteredTreeChildren=function(e){var t=e.modules.dataTree,o=[];return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(e)),(this.table.modExists("filter")?this.table.modules.filter.filter(t.children):t.children).forEach((function(e){e instanceof l&&o.push(e)}))),o},w.prototype.rowDelete=function(e){var t,o=e.modules.dataTree.parent;o&&(!1!==(t=this.findChildIndex(e,o))&&o.data[this.field].splice(t,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.table.rowManager.refreshActiveData("tree",!1,!0)},w.prototype.addTreeChildRow=function(e,t,o,i){var n=!1;"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==i&&!1!==(n=this.findChildIndex(i,e))&&e.data[this.field].splice(o?n:n+1,0,t),!1===n&&(o?e.data[this.field].unshift(t):e.data[this.field].push(t)),this.initializeRow(e),this.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)},w.prototype.findChildIndex=function(e,t){var o=this,i=!1;return"object"==(void 0===e?"undefined":n(e))?e instanceof l?i=e.data:e instanceof a?i=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.modules.dataTree&&(i=t.modules.dataTree.children.find((function(t){return t instanceof l&&t.element===e})))&&(i=i.data):i=null!=e&&t.data[this.field].find((function(t){return t.data[o.table.options.index]==e})),i&&(Array.isArray(t.data[this.field])&&(i=t.data[this.field].indexOf(i)),-1==i&&(i=!1)),i},w.prototype.getTreeChildren=function(e){var t=e.modules.dataTree,o=[];return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(e)),t.children.forEach((function(e){e instanceof l&&o.push(e.getComponent())}))),o},w.prototype.checkForRestyle=function(e){e.row.cells.indexOf(e)||e.row.reinitialize()},w.prototype.getChildField=function(){return this.field},w.prototype.redrawNeeded=function(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]},h.prototype.registerModule("dataTree",w);var E=function(e){this.table=e};E.prototype.download=function(e,t,o,i,n){var r=this,s=!1;if("function"==typeof e?s=e:r.downloaders[e]?s=r.downloaders[e]:console.warn("Download Error - No such download type found: ",e),s){var a=this.generateExportList(i);s.call(this.table,a,o||{},(function(o,i){n?!0===n?r.triggerDownload(o,i,e,t,!0):n(o):r.triggerDownload(o,i,e,t)}))}},E.prototype.generateExportList=function(e){var t=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),o=this.table.options.groupHeaderDownload;return o&&!Array.isArray(o)&&(o=[o]),t.forEach((function(e){var t;"group"===e.type&&(t=e.columns[0],o&&o[e.indent]&&(t.value=o[e.indent](t.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)))})),t},E.prototype.triggerDownload=function(e,t,o,i,n){var r=document.createElement("a"),s=new Blob([e],{type:t});i=i||"Tabulator."+("function"==typeof o?"txt":o);(s=this.table.options.downloadReady.call(this.table,e,s))&&(n?window.open(window.URL.createObjectURL(s)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,i):(r.setAttribute("href",window.URL.createObjectURL(s)),r.setAttribute("download",i),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},E.prototype.commsReceived=function(e,t,o){switch(t){case"intercept":this.download(o.type,"",o.options,o.active,o.intercept)}},E.prototype.downloaders={csv:function(e,t,o){var i=t&&t.delimiter?t.delimiter:",",r=[],s=[];e.forEach((function(e){var t=[];switch(e.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":e.columns.forEach((function(e,t){e&&1===e.depth&&(s[t]=void 0===e.value||"null"==typeof e.value?"":e.value)}));break;case"row":e.columns.forEach((function(e){if(e){switch(n(e.value)){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value=""}t.push('"'+String(e.value).split('"').join('""')+'"')}})),r.push(t.join(i))}})),s.length&&(r=[s].concat(r)),r=r.join("\n"),t.bom&&(r="\ufeff"+r),o(r,"text/csv")},json:function(e,t,o){var i=[];e.forEach((function(e){var t={};switch(e.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":e.columns.forEach((function(e){e&&(t[e.component.getField()]=e.value)})),i.push(t)}})),o(i=JSON.stringify(i,null,"\t"),"application/json")},pdf:function(e,t,o){var i=[],r=[],s={},a=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},l=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},c=t.jsPDF||{},u=t&&t.title?t.title:"";function d(e,t){var o=[];return e.columns.forEach((function(e){var i;if(e){switch(n(e.value)){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value=""}i={content:e.value,colSpan:e.width,rowSpan:e.height},t&&(i.styles=t),o.push(i)}else o.push("")})),o}c.orientation||(c.orientation=t.orientation||"landscape"),c.unit||(c.unit="pt"),e.forEach((function(e){switch(e.type){case"header":i.push(d(e));break;case"group":r.push(d(e,a));break;case"calc":r.push(d(e,l));break;case"row":r.push(d(e))}}));var h=new jsPDF(c);t&&t.autoTable&&(s="function"==typeof t.autoTable?t.autoTable(h)||{}:t.autoTable),u&&(s.addPageContent=function(e){h.text(u,40,30)}),s.head=i,s.body=r,h.autoTable(s),t&&t.documentProcessing&&t.documentProcessing(h),o(h.output("arraybuffer"),"application/pdf")},xlsx:function(e,t,o){var i=t.sheetName||"Sheet1",r=XLSX.utils.book_new();function s(){var t=[],o=[],i={},r={s:{c:0,r:0},e:{c:e[0]?e[0].columns.reduce((function(e,t){return e+(t&&t.width?t.width:1)}),0):0,r:e.length}};return e.forEach((function(e,i){var r=[];e.columns.forEach((function(e,t){e?(r.push(e.value instanceof Date||"object"!==n(e.value)?e.value:JSON.stringify(e.value)),(e.width>1||e.height>-1)&&o.push({s:{r:i,c:t},e:{r:i+e.height-1,c:t+e.width-1}})):r.push("")})),t.push(r)})),XLSX.utils.sheet_add_aoa(i,t),i["!ref"]=XLSX.utils.encode_range(r),o.length&&(i["!merges"]=o),i}if(r.SheetNames=[],r.Sheets={},t.sheetOnly)o(s());else{if(t.sheets)for(var a in t.sheets)!0===t.sheets[a]?(r.SheetNames.push(a),r.Sheets[a]=s()):(r.SheetNames.push(a),this.table.modules.comms.send(t.sheets[a],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(e){r.Sheets[a]=e}}));else r.SheetNames.push(i),r.Sheets[i]=s();t.documentProcessing&&(r=t.documentProcessing(r)),o(function(e){for(var t=new ArrayBuffer(e.length),o=new Uint8Array(t),i=0;i!=e.length;++i)o[i]=255&e.charCodeAt(i);return t}(XLSX.write(r,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(e,t,o){this.modExists("export",!0)&&o(this.modules.export.genereateHTMLTable(e),"text/html")}},h.prototype.registerModule("download",E);var x=function(e){this.table=e,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[]};x.prototype.initializeColumn=function(e){var t={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(n(e.definition.editor)){case"string":"tick"===e.definition.editor&&(e.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[e.definition.editor]?t.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":t.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?("tick"===e.definition.formatter&&(e.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[e.definition.formatter]?t.editor=this.editors[e.definition.formatter]:t.editor=this.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}t.editor&&(e.modules.edit=t)},x.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},x.prototype.clearEditor=function(e){var t,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,t=o.getElement(),e?o.validate():t.classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}},x.prototype.cancelEdit=function(){if(this.currentCell){var e=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),e.column.cellEvents.cellEditCancelled&&e.column.cellEvents.cellEditCancelled.call(this.table,t),this.table.options.cellEditCancelled.call(this.table,t)}},x.prototype.bindEditor=function(e){var t=this,o=e.getElement();o.setAttribute("tabindex",0),o.addEventListener("click",(function(e){o.classList.contains("tabulator-editing")||o.focus({preventScroll:!0})})),o.addEventListener("mousedown",(function(e){t.mouseClick=!0})),o.addEventListener("focus",(function(o){t.recursionBlock||t.edit(e,o,!1)}))},x.prototype.focusCellNoEvent=function(e,t){this.recursionBlock=!0,t&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1},x.prototype.editCell=function(e,t){this.focusCellNoEvent(e),this.edit(e,!1,t)},x.prototype.focusScrollAdjust=function(e){if("virtual"==this.table.rowManager.getRenderMode()){var t=this.table.rowManager.element.scrollTop,o=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,i=e.row.getElement();i.offsetTop;i.offsetTop<t?this.table.rowManager.element.scrollTop-=t-i.offsetTop:i.offsetTop+i.offsetHeight>o&&(this.table.rowManager.element.scrollTop+=i.offsetTop+i.offsetHeight-o);var n=this.table.rowManager.element.scrollLeft,r=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,s=e.getElement();s.offsetLeft;this.table.modExists("frozenColumns")&&(n+=parseInt(this.table.modules.frozenColumns.leftMargin),r-=parseInt(this.table.modules.frozenColumns.rightMargin)),s.offsetLeft<n?this.table.rowManager.element.scrollLeft-=n-s.offsetLeft:s.offsetLeft+s.offsetWidth>r&&(this.table.rowManager.element.scrollLeft+=s.offsetLeft+s.offsetWidth-r)}},x.prototype.edit=function(e,t,o){var i,r,s,a=this,l=!0,c=function(){},u=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;switch(t&&t.stopPropagation(),n(e.column.modules.edit.check)){case"function":l=e.column.modules.edit.check(e.getComponent());break;case"boolean":l=e.column.modules.edit.check}if(l||o){if(a.cancelEdit(),a.currentCell=e,this.focusScrollAdjust(e),r=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.cellEvents.cellClick&&e.column.cellEvents.cellClick.call(this.table,t,r)),e.column.cellEvents.cellEditing&&e.column.cellEvents.cellEditing.call(this.table,r),a.table.options.cellEditing.call(this.table,r),s="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(r):e.column.modules.edit.params,!1===(i=e.column.modules.edit.editor.call(a,r,(function(e){c=e}),(function(t){if(a.currentCell===e){var o=!0;return e.column.modules.validate&&a.table.modExists("validate")&&"manual"!=a.table.options.validationMode&&(o=a.table.modules.validate.validate(e.column.modules.validate,e,t)),!0===o||"highlight"===a.table.options.validationMode?(a.clearEditor(),e.setValue(t,!0),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==a.editedCells.indexOf(e)&&a.editedCells.push(e),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(e),!0===o||(u.classList.add("tabulator-validation-fail"),a.table.options.validationFailed.call(a.table,e.getComponent(),t,o),!1)):(a.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),a.focusCellNoEvent(e,!0),c(),a.table.options.validationFailed.call(a.table,e.getComponent(),t,o),!1)}}),(function(){a.currentCell===e&&(a.cancelEdit(),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(e))}),s)))return u.blur(),!1;if(!(i instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",i),u.blur(),!1;for(u.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);u.appendChild(i),c();for(var d=u.children,h=0;h<d.length;h++)d[h].addEventListener("click",(function(e){e.stopPropagation()}));return!0}return this.mouseClick=!1,u.blur(),!1}this.invalidEdit||this.cancelEdit()},x.prototype.maskInput=function(e,t){var o=t.mask,i=void 0!==t.maskLetterChar?t.maskLetterChar:"A",n=void 0!==t.maskNumberChar?t.maskNumberChar:"9",r=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function s(t){var a=o[t];void 0!==a&&a!==r&&a!==i&&a!==n&&(e.value=e.value+""+a,s(t+1))}e.addEventListener("keydown",(function(t){var s=e.value.length,a=t.key;if(t.keyCode>46){if(s>=o.length)return t.preventDefault(),t.stopPropagation(),!1;switch(o[s]){case i:if(a.toUpperCase()==a.toLowerCase())return t.preventDefault(),t.stopPropagation(),!1;break;case n:if(isNaN(a))return t.preventDefault(),t.stopPropagation(),!1;break;case r:break;default:if(a!==o[s])return t.preventDefault(),t.stopPropagation(),!1}}})),e.addEventListener("keyup",(function(o){o.keyCode>46&&t.maskAutoFill&&s(e.value.length)})),e.placeholder||(e.placeholder=o),t.maskAutoFill&&s(e.value.length)},x.prototype.getEditedCells=function(){var e=[];return this.editedCells.forEach((function(t){e.push(t.getComponent())})),e},x.prototype.clearEdited=function(e){var t;e.modules.validate&&e.modules.edit&&e.modules.edit.edited&&(e.modules.validate.invalid=!1,(t=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(t,1))},x.prototype.editors={input:function(e,t,o,i,r){var s=e.getValue(),a=document.createElement("input");if(a.setAttribute("type",r.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&"object"==n(r.elementAttributes))for(var l in r.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+r.elementAttributes["+"+l])):a.setAttribute(l,r.elementAttributes[l]);function c(e){null==s&&""!==a.value||a.value!==s?o(a.value)&&(s=a.value):i()}return a.value=void 0!==s?s:"",t((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("change",c),a.addEventListener("blur",c),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:c();break;case 27:i()}})),r.mask&&this.table.modules.edit.maskInput(a,r),a},textarea:function(e,t,o,i,r){var s=e.getValue(),a=r.verticalNavigation||"hybrid",l=String(null!=s?s:""),c=((l.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),u=0;if(c.style.display="block",c.style.padding="2px",c.style.height="100%",c.style.width="100%",c.style.boxSizing="border-box",c.style.whiteSpace="pre-wrap",c.style.resize="none",r.elementAttributes&&"object"==n(r.elementAttributes))for(var d in r.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),c.setAttribute(d,c.getAttribute(d)+r.elementAttributes["+"+d])):c.setAttribute(d,r.elementAttributes[d]);function h(t){null==s&&""!==c.value||c.value!==s?(o(c.value)&&(s=c.value),setTimeout((function(){e.getRow().normalizeHeight()}),300)):i()}return c.value=l,t((function(){c.focus({preventScroll:!0}),c.style.height="100%"})),c.addEventListener("change",h),c.addEventListener("blur",h),c.addEventListener("keyup",(function(){c.style.height="";var t=c.scrollHeight;c.style.height=t+"px",t!=u&&(u=t,e.getRow().normalizeHeight())})),c.addEventListener("keydown",(function(e){switch(e.keyCode){case 27:i();break;case 38:("editor"==a||"hybrid"==a&&c.selectionStart)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 40:("editor"==a||"hybrid"==a&&c.selectionStart!==c.value.length)&&(e.stopImmediatePropagation(),e.stopPropagation())}})),r.mask&&this.table.modules.edit.maskInput(c,r),c},number:function(e,t,o,i,r){var s=e.getValue(),a=r.verticalNavigation||"editor",l=document.createElement("input");if(l.setAttribute("type","number"),void 0!==r.max&&l.setAttribute("max",r.max),void 0!==r.min&&l.setAttribute("min",r.min),void 0!==r.step&&l.setAttribute("step",r.step),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",r.elementAttributes&&"object"==n(r.elementAttributes))for(var c in r.elementAttributes)"+"==c.charAt(0)?(c=c.slice(1),l.setAttribute(c,l.getAttribute(c)+r.elementAttributes["+"+c])):l.setAttribute(c,r.elementAttributes[c]);l.value=s;var u=function(e){d()};function d(){var e=l.value;isNaN(e)||""===e||(e=Number(e)),e!==s?o(e)&&(s=e):i()}return t((function(){l.removeEventListener("blur",u),l.focus({preventScroll:!0}),l.style.height="100%",l.addEventListener("blur",u)})),l.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:d();break;case 27:i();break;case 38:case 40:"editor"==a&&(e.stopImmediatePropagation(),e.stopPropagation())}})),r.mask&&this.table.modules.edit.maskInput(l,r),l},range:function(e,t,o,i,r){var s=e.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),void 0!==r.max&&a.setAttribute("max",r.max),void 0!==r.min&&a.setAttribute("min",r.min),void 0!==r.step&&a.setAttribute("step",r.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&"object"==n(r.elementAttributes))for(var l in r.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+r.elementAttributes["+"+l])):a.setAttribute(l,r.elementAttributes[l]);function c(){var e=a.value;isNaN(e)||""===e||(e=Number(e)),e!=s?o(e)&&(s=e):i()}return a.value=s,t((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("blur",(function(e){c()})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:c();break;case 27:i()}})),a},select:function(e,t,o,i,r){var s=this,a=this,l=e.getElement(),c=e.getValue(),u=r.verticalNavigation||"editor",d=void 0!==c||null===c?Array.isArray(c)?c:[c]:void 0!==r.defaultValue?r.defaultValue:[],p=document.createElement("input"),f=document.createElement("div"),m=r.multiselect,g=[],b={},v=[],y=[],w=!0,E=!1;function x(t){var o,i={},n=a.table.getData();return(o=t?a.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(n.forEach((function(e){var t=o.getFieldValue(e);null!=t&&""!==t&&(i[t]=!0)})),i=r.sortValuesList?"asc"==r.sortValuesList?Object.keys(i).sort():Object.keys(i).sort().reverse():Object.keys(i)):console.warn("unable to find matching column to create select lookup list:",t),i}function C(t,o){var i=[],s=[];function a(e){e={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1};return o.indexOf(e.value)>-1&&k(e),i.push(e),s.push(e),e}if("function"==typeof t&&(t=t(e)),Array.isArray(t))t.forEach((function(e){var t;"object"===(void 0===e?"undefined":n(e))?e.options?(t={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1},s.push(t),e.options.forEach((function(e){a(e)}))):a(e):(t={label:e,value:e,element:!1},o.indexOf(t.value)>-1&&k(t),i.push(t),s.push(t))}));else for(var l in t){var c={label:t[l],value:l,element:!1};o.indexOf(c.value)>-1&&k(c),i.push(c),s.push(c)}g=i,v=s,function(){for(;f.firstChild;)f.removeChild(f.firstChild);v.forEach((function(t){var o=t.element;if(!o){if(o=document.createElement("div"),t.label=r.listItemFormatter?r.listItemFormatter(t.value,t.label,e,o,t.itemParams):t.label,t.group?(o.classList.add("tabulator-edit-select-list-group"),o.tabIndex=0,o.innerHTML=""===t.label?"&nbsp;":t.label):(o.classList.add("tabulator-edit-select-list-item"),o.tabIndex=0,o.innerHTML=""===t.label?"&nbsp;":t.label,o.addEventListener("click",(function(){E=!0,setTimeout((function(){E=!1}),10),m?(M(t),p.focus()):T(t)})),y.indexOf(t)>-1&&o.classList.add("active")),t.elementAttributes&&"object"==n(t.elementAttributes))for(var i in t.elementAttributes)"+"==i.charAt(0)?(i=i.slice(1),o.setAttribute(i,p.getAttribute(i)+t.elementAttributes["+"+i])):o.setAttribute(i,t.elementAttributes[i]);o.addEventListener("mousedown",(function(){w=!1,setTimeout((function(){w=!0}),10)})),t.element=o}f.appendChild(o)}))}()}function R(e,t){!m&&b&&b.element&&b.element.classList.remove("active"),b&&b.element&&b.element.classList.remove("focused"),b=e,e.element&&(e.element.classList.add("focused"),t&&e.element.classList.add("active"))}function k(e){-1==y.indexOf(e)&&(y.push(e),R(e,!0)),A()}function S(e){var t=y[e];e>-1&&(y.splice(e,1),t.element&&t.element.classList.remove("active"))}function M(e){e||(e=b);var t=y.indexOf(e);t>-1?S(t):(!0!==m&&y.length>=m&&S(0),k(e)),A()}function T(e){P(),e||(e=b),e&&(p.value=e.label,o(e.value)),d=p.value}function L(e){e||P();var t=[];y.forEach((function(e){t.push(e.value)})),d=p.value,o(t)}function A(){var e=[];y.forEach((function(t){e.push(t.label)})),p.value=e.join(", "),!1===a.currentCell&&L(!0)}function D(){P(),i()}function P(){f.parentNode&&f.parentNode.removeChild(f),a.table.rowManager.element.removeEventListener("scroll",D)}if((Array.isArray(r)||!Array.isArray(r)&&"object"===(void 0===r?"undefined":n(r))&&!r.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),r={values:r}),p.setAttribute("type","text"),p.style.padding="4px",p.style.width="100%",p.style.boxSizing="border-box",p.style.cursor="default",p.readOnly=0!=this.currentCell,r.elementAttributes&&"object"==n(r.elementAttributes))for(var F in r.elementAttributes)"+"==F.charAt(0)?(F=F.slice(1),p.setAttribute(F,p.getAttribute(F)+r.elementAttributes["+"+F])):p.setAttribute(F,r.elementAttributes[F]);return p.value=void 0!==c||null===c?c:"",p.addEventListener("search",(function(e){p.value||(!function(){for(var e=y.length,t=0;t<e;t++)S(0)}(),L())})),p.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=g.indexOf(b),("editor"==u||"hybrid"==u&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t>0&&R(g[t-1],!m));break;case 40:t=g.indexOf(b),("editor"==u||"hybrid"==u&&t<g.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<g.length-1&&R(-1==t?g[0]:g[t+1],!m));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();break;case 13:m?M():T();break;case 27:D();break;case 9:break;default:!1===a.currentCell&&e.preventDefault()}})),p.addEventListener("blur",(function(e){w&&(m?L():D())})),p.addEventListener("focus",(function(e){E||function(){if(y=[],!f.parentNode){!0===r.values?C(x(),d):"string"==typeof r.values?C(x(r.values),d):C(r.values||[],d);var e=h.prototype.helpers.elOffset(l);f.style.minWidth=l.offsetWidth+"px",f.style.top=e.top+l.offsetHeight+"px",f.style.left=e.left+"px",f.addEventListener("mousedown",(function(e){w=!1,setTimeout((function(){w=!0}),10)})),document.body.appendChild(f)}}()})),(f=document.createElement("div")).classList.add("tabulator-edit-select-list"),t((function(){p.style.height="100%",p.focus({preventScroll:!0})})),setTimeout((function(){s.table.rowManager.element.addEventListener("scroll",D)}),10),p},autocomplete:function(e,t,o,i,r){var s=this,a=this,l=e.getElement(),c=e.getValue(),u=r.verticalNavigation||"editor",d=void 0!==c||null===c?c:void 0!==r.defaultValue?r.defaultValue:"",p=document.createElement("input"),f=document.createElement("div"),m=[],g=!1,b=!0,v=!1;if(p.setAttribute("type","search"),p.style.padding="4px",p.style.width="100%",p.style.boxSizing="border-box",r.elementAttributes&&"object"==n(r.elementAttributes))for(var y in r.elementAttributes)"+"==y.charAt(0)?(y=y.slice(1),p.setAttribute(y,p.getAttribute(y)+r.elementAttributes["+"+y])):p.setAttribute(y,r.elementAttributes[y]);function w(){!0===r.values?v=E():"string"==typeof r.values&&(v=E(r.values))}function E(t){var o,i={},n=a.table.getData();return(o=t?a.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(n.forEach((function(e){var t=o.getFieldValue(e);null!=t&&""!==t&&(i[t]=!0)})),i=r.sortValuesList?"asc"==r.sortValuesList?Object.keys(i).sort():Object.keys(i).sort().reverse():Object.keys(i)):console.warn("unable to find matching column to create autocomplete lookup list:",t),i}function x(e,t){var o,i,n=[];o=v||(r.values||[]),r.searchFunc?(n=r.searchFunc(e,o))instanceof Promise?(C(void 0!==r.searchingPlaceholder?r.searchingPlaceholder:"Searching..."),n.then((function(e){S(R(e),t)})).catch((function(e){console.err("error in autocomplete search promise:",e)}))):S(R(n),t):(i=R(o),""===e?r.showListOnEmpty&&(n=i):i.forEach((function(t){null===t.value&&void 0===t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&n.push(t)})),S(n,t))}function C(e){var t=document.createElement("div");k(),!1!==e&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,e instanceof Node?t.appendChild(e):t.innerHTML=e,f.appendChild(t))}function R(e){var t=[];if(Array.isArray(e))e.forEach((function(e){var o={};"object"===(void 0===e?"undefined":n(e))?(o.title=r.listItemFormatter?r.listItemFormatter(e.value,e.label):e.label,o.value=e.value):(o.title=r.listItemFormatter?r.listItemFormatter(e,e):e,o.value=e),t.push(o)}));else for(var o in e){var i={title:r.listItemFormatter?r.listItemFormatter(o,e[o]):e[o],value:o};t.push(i)}return t}function k(){for(;f.firstChild;)f.removeChild(f.firstChild)}function S(e,t){e.length?function(e,t){var o=!1;k(),(m=e).forEach((function(e){var i=e.element;i||((i=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),i.tabIndex=0,i.innerHTML=e.title,i.addEventListener("click",(function(t){T(e),M()})),i.addEventListener("mousedown",(function(e){b=!1,setTimeout((function(){b=!0}),10)})),e.element=i,t&&e.value==c&&(p.value=e.title,e.element.classList.add("active"),o=!0),e===g&&(e.element.classList.add("active"),o=!0)),f.appendChild(i)})),o||T(!1)}(e,t):r.emptyPlaceholder&&C(r.emptyPlaceholder)}function M(){L(),g?c!==g.value?(c=g.value,p.value=g.title,o(g.value)):i():r.freetext||r.allowEmpty&&""===p.value?(c=p.value,o(p.value)):i()}function T(e,t){g&&g.element&&g.element.classList.remove("active"),g=e,e&&e.element&&e.element.classList.add("active")}function L(){f.parentNode&&f.parentNode.removeChild(f),a.table.rowManager.element.removeEventListener("scroll",A)}function A(){L(),i()}return f.classList.add("tabulator-edit-select-list"),f.addEventListener("mousedown",(function(e){b=!1,setTimeout((function(){b=!0}),10)})),p.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=m.indexOf(g),("editor"==u||"hybrid"==u&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),T(t>0&&m[t-1]));break;case 40:t=m.indexOf(g),("editor"==u||"hybrid"==u&&t<m.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<m.length-1&&T(-1==t?m[0]:m[t+1]));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation();break;case 13:M();break;case 27:A();break;case 36:case 35:e.stopImmediatePropagation()}})),p.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:x(p.value)}})),p.addEventListener("search",(function(e){x(p.value)})),p.addEventListener("blur",(function(e){b&&M()})),p.addEventListener("focus",(function(e){var t=d;w(),function(){if(!f.parentNode){for(;f.firstChild;)f.removeChild(f.firstChild);var e=h.prototype.helpers.elOffset(l);f.style.minWidth=l.offsetWidth+"px",f.style.top=e.top+l.offsetHeight+"px",f.style.left=e.left+"px",document.body.appendChild(f)}}(),p.value=t,x(t,!0)})),t((function(){p.style.height="100%",p.focus({preventScroll:!0})})),r.mask&&this.table.modules.edit.maskInput(p,r),setTimeout((function(){s.table.rowManager.element.addEventListener("scroll",A)}),10),w(),p.value=d,x(d,!0),p},star:function(e,t,o,i,r){var s=this,a=e.getElement(),l=e.getValue(),c=a.getElementsByTagName("svg").length||5,u=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,d=[],h=document.createElement("div"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(e){d.forEach((function(t,o){o<e?("ie"==s.table.browser?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==s.table.browser?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')}))}function m(e){var t=document.createElement("span"),i=p.cloneNode(!0);d.push(i),t.addEventListener("mouseenter",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),f(e)})),t.addEventListener("mousemove",(function(e){e.stopPropagation(),e.stopImmediatePropagation()})),t.addEventListener("click",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),o(e),a.blur()})),t.appendChild(i),h.appendChild(t)}function g(e){l=e,f(e)}if(a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",h.style.verticalAlign="middle",h.style.display="inline-block",h.style.padding="4px",p.setAttribute("width",u),p.setAttribute("height",u),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",r.elementAttributes&&"object"==n(r.elementAttributes))for(var b in r.elementAttributes)"+"==b.charAt(0)?(b=b.slice(1),h.setAttribute(b,h.getAttribute(b)+r.elementAttributes["+"+b])):h.setAttribute(b,r.elementAttributes[b]);for(var v=1;v<=c;v++)m(v);return f(l=Math.min(parseInt(l),c)),h.addEventListener("mousemove",(function(e){f(0)})),h.addEventListener("click",(function(e){o(0)})),a.addEventListener("blur",(function(e){i()})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 39:g(l+1);break;case 37:g(l-1);break;case 13:o(l);break;case 27:i()}})),h},progress:function(e,t,o,i,r){var s,a,l=e.getElement(),c=void 0===r.max?l.getElementsByTagName("div")[0].getAttribute("max")||100:r.max,u=void 0===r.min?l.getElementsByTagName("div")[0].getAttribute("min")||0:r.min,d=(c-u)/100,h=e.getValue()||0,p=document.createElement("div"),f=document.createElement("div");function m(){var e=d*Math.round(f.offsetWidth/(l.clientWidth/100))+u;o(e),l.setAttribute("aria-valuenow",e),l.setAttribute("aria-label",h)}if(p.style.position="absolute",p.style.right="0",p.style.top="0",p.style.bottom="0",p.style.width="5px",p.classList.add("tabulator-progress-handle"),f.style.display="inline-block",f.style.position="relative",f.style.height="100%",f.style.backgroundColor="#488CE9",f.style.maxWidth="100%",f.style.minWidth="0%",r.elementAttributes&&"object"==n(r.elementAttributes))for(var g in r.elementAttributes)"+"==g.charAt(0)?(g=g.slice(1),f.setAttribute(g,f.getAttribute(g)+r.elementAttributes["+"+g])):f.setAttribute(g,r.elementAttributes[g]);return l.style.padding="4px 4px",h=Math.min(parseFloat(h),c),h=Math.max(parseFloat(h),u),h=Math.round((h-u)/d),f.style.width=h+"%",l.setAttribute("aria-valuemin",u),l.setAttribute("aria-valuemax",c),f.appendChild(p),p.addEventListener("mousedown",(function(e){s=e.screenX,a=f.offsetWidth})),p.addEventListener("mouseover",(function(){p.style.cursor="ew-resize"})),l.addEventListener("mousemove",(function(e){s&&(f.style.width=a+e.screenX-s+"px")})),l.addEventListener("mouseup",(function(e){s&&(e.stopPropagation(),e.stopImmediatePropagation(),s=!1,a=!1,m())})),l.addEventListener("keydown",(function(e){switch(e.keyCode){case 39:e.preventDefault(),f.style.width=f.clientWidth+l.clientWidth/100+"px";break;case 37:e.preventDefault(),f.style.width=f.clientWidth-l.clientWidth/100+"px";break;case 9:case 13:m();break;case 27:i()}})),l.addEventListener("blur",(function(){i()})),f},tickCross:function(e,t,o,i,r){var s=e.getValue(),a=document.createElement("input"),l=r.tristate,c=void 0===r.indeterminateValue?null:r.indeterminateValue,u=!1;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",r.elementAttributes&&"object"==n(r.elementAttributes))for(var d in r.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+r.elementAttributes["+"+d])):a.setAttribute(d,r.elementAttributes[d]);function h(e){return l?e?u?c:a.checked:a.checked&&!u?(a.checked=!1,a.indeterminate=!0,u=!0,c):(u=!1,a.checked):a.checked}return a.value=s,!l||void 0!==s&&s!==c&&""!==s||(u=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&t((function(){a.focus({preventScroll:!0})})),a.checked=!0===s||"true"===s||"True"===s||1===s,a.addEventListener("change",(function(e){o(h())})),a.addEventListener("blur",(function(e){o(h(!0))})),a.addEventListener("keydown",(function(e){13==e.keyCode&&o(h()),27==e.keyCode&&i()})),a}},h.prototype.registerModule("edit",x);var C=function(e,t,o,i){this.type=e,this.columns=t,this.component=o||!1,this.indent=i||0},R=function(e,t,o,i,n){this.value=e,this.component=t||!1,this.width=o,this.height=i,this.depth=n},k=function(e){this.table=e,this.config={},this.cloneTableStyle=!0,this.colVisProp=""};k.prototype.generateExportList=function(e,t,o,i){this.cloneTableStyle=t,this.config=e||{},this.colVisProp=i;var n=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],r=this.bodyToExportRows(this.rowLookup(o));return n.concat(r)},k.prototype.genereateTable=function(e,t,o,i){var n=this.generateExportList(e,t,o,i);return this.genereateTableElement(n)},k.prototype.rowLookup=function(e){var t=this,o=[];if("function"==typeof e)e.call(this.table).forEach((function(e){(e=t.table.rowManager.findRow(e))&&o.push(e)}));else switch(e){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;case"active":default:o=this.table.rowManager.getDisplayRows()}return Object.assign([],o)},k.prototype.generateColumnGroupHeaders=function(){var e=this,t=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach((function(o){var i=e.processColumnGroup(o);i&&t.push(i)})),t},k.prototype.processColumnGroup=function(e){var t=this,o=e.columns,i=0,n={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(o.length){if(n.subGroups=[],n.width=0,o.forEach((function(e){var o=t.processColumnGroup(e);o&&(n.width+=o.width,n.subGroups.push(o),o.depth>i&&(i=o.depth))})),n.depth+=i,!n.width)return!1}else{if(!this.columnVisCheck(e))return!1;n.width=1}return n},k.prototype.columnVisCheck=function(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])},k.prototype.headersToExportRows=function(e){var t=[],o=0,i=[];return e.forEach((function(e){e.depth>o&&(o=e.depth)})),e.forEach((function(e){!function e(i,n){var r=o-n;if(void 0===t[n]&&(t[n]=[]),i.height=i.subGroups?1:r-i.depth+1,t[n].push(i),i.height>1)for(var s=1;s<i.height;s++)void 0===t[n+s]&&(t[n+s]=[]),t[n+s].push(!1);if(i.width>1)for(var a=1;a<i.width;a++)t[n].push(!1);i.subGroups&&i.subGroups.forEach((function(t){e(t,n+1)}))}(e,0)})),t.forEach((function(e){var t=[];e.forEach((function(e){e?t.push(new R(e.title,e.column.getComponent(),e.width,e.height,e.depth)):t.push(null)})),i.push(new C("header",t))})),i},k.prototype.bodyToExportRows=function(e){var t=this,o=[],i=[];return this.table.columnManager.columnsByIndex.forEach((function(e){t.columnVisCheck(e)&&o.push(e.getComponent())})),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter((function(e){switch(e.type){case"group":return!1!==t.config.rowGroups;case"calc":return!1!==t.config.columnCalcs;case"row":return!(t.table.options.dataTree&&!1===t.config.dataTree&&e.modules.dataTree.parent)}return!0}))).forEach((function(e,n){var r=e.getData(t.colVisProp),s=[],a=0;switch(e.type){case"group":a=e.level,s.push(new R(e.key,e.getComponent(),o.length,1));break;case"calc":case"row":o.forEach((function(e){s.push(new R(e._column.getFieldValue(r),e,1,1))})),t.table.options.dataTree&&!1!==t.config.dataTree&&(a=e.modules.dataTree.index)}i.push(new C(e.type,s,e.getComponent(),a))})),i},k.prototype.genereateTableElement=function(e){var t=this,o=document.createElement("table"),i=document.createElement("thead"),n=document.createElement("tbody"),r=this.lookupTableStyles(),s=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a={};return a.rowFormatter=null!==s?s:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((function(e,o){switch(e.type){case"header":i.appendChild(t.genereateHeaderElement(e,a,r));break;case"group":n.appendChild(t.genereateGroupElement(e,a,r));break;case"calc":n.appendChild(t.genereateCalcElement(e,a,r));break;case"row":var s=t.genereateRowElement(e,a,r);t.mapElementStyles(o%2&&r.evenRow?r.evenRow:r.oddRow,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n.appendChild(s)}})),i.innerHTML&&o.appendChild(i),o.appendChild(n),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o},k.prototype.lookupTableStyles=function(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e},k.prototype.genereateHeaderElement=function(e,t,o){var i=this,n=document.createElement("tr");return e.columns.forEach((function(e){if(e){var t=document.createElement("th"),o=e.component._column.definition.cssClass?e.component._column.definition.cssClass.split(" "):[];t.colSpan=e.width,t.rowSpan=e.height,t.innerHTML=e.value,i.cloneTableStyle&&(t.style.boxSizing="border-box"),o.forEach((function(e){t.classList.add(e)})),i.mapElementStyles(e.component.getElement(),t,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),i.mapElementStyles(e.component._column.contentElement,t,["padding-top","padding-left","padding-right","padding-bottom"]),e.component._column.visible?i.mapElementStyles(e.component.getElement(),t,["width"]):e.component._column.definition.width&&(t.style.width=e.component._column.definition.width+"px"),e.component._column.parent&&i.mapElementStyles(e.component._column.parent.groupElement,t,["border-top"]),n.appendChild(t)}})),n},k.prototype.genereateGroupElement=function(e,t,o){var i=document.createElement("tr"),n=document.createElement("td"),r=e.columns[0];return i.classList.add("tabulator-print-table-row"),t.groupHeader&&t.groupHeader[e.indent]?r.value=t.groupHeader[e.indent](r.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===t.groupHeader?r.value=r.value:r.value=e.component._group.generator(r.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),n.colSpan=r.width,n.innerHTML=r.value,i.classList.add("tabulator-print-table-group"),i.classList.add("tabulator-group-level-"+e.indent),r.component.getVisibility()&&i.classList.add("tabulator-group-visible"),this.mapElementStyles(o.firstGroup,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(o.firstGroup,n,["padding-top","padding-left","padding-right","padding-bottom"]),i.appendChild(n),i},k.prototype.genereateCalcElement=function(e,t,o){var i=this.genereateRowElement(e,t,o);return i.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(o.calcRow,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i},k.prototype.genereateRowElement=function(e,t,o){var r=this,s=document.createElement("tr");return s.classList.add("tabulator-print-table-row"),e.columns.forEach((function(a){if(a){var l=document.createElement("td"),c=a.component._column,u=a.value,d={modules:{},getValue:function(){return u},getField:function(){return c.definition.field},getElement:function(){return l},getColumn:function(){return c.getComponent()},getData:function(){return rowData},getRow:function(){return e.getComponent()},getComponent:function(){return d},column:c};if((c.definition.cssClass?c.definition.cssClass.split(" "):[]).forEach((function(e){l.classList.add(e)})),r.table.modExists("format")&&!1!==r.config.formatCells)u=r.table.modules.format.formatExportValue(d,r.colVisProp);else switch(void 0===u?"undefined":n(u)){case"object":u=JSON.stringify(u);break;case"undefined":case"null":u="";break;default:u=u}if(u instanceof Node?l.appendChild(u):l.innerHTML=u,o.firstCell&&(r.mapElementStyles(o.firstCell,l,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),c.definition.align&&(l.style.textAlign=c.definition.align)),r.table.options.dataTree&&!1!==r.config.dataTree&&(t.treeElementField&&t.treeElementField==c.field||!t.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&l.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),l.firstChild),e.component._row.modules.dataTree.branchEl&&l.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),l.firstChild)),s.appendChild(l),d.modules.format&&d.modules.format.renderedCallback&&d.modules.format.renderedCallback(),t.rowFormatter&&!1!==r.config.formatCells){var h=e.getComponent();h.getElement=function(){return s},t.rowFormatter(h)}}})),s},k.prototype.genereateHTMLTable=function(e){var t=document.createElement("div");return t.appendChild(this.genereateTableElement(e)),t.innerHTML},k.prototype.getHtml=function(e,t,o,i){var n=this.generateExportList(o||this.table.options.htmlOutputConfig,t,e,i||"htmlOutput");return this.genereateHTMLTable(n)},k.prototype.mapElementStyles=function(e,t,o){if(this.cloneTableStyle&&e&&t){var i={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var n=window.getComputedStyle(e);o.forEach((function(e){t.style[i[e]]=n.getPropertyValue(e)}))}}},h.prototype.registerModule("export",k);var S=function(e){this.table=e,this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1};S.prototype.initializeColumn=function(e,t){var o=this,i=e.getField();e.modules.filter={success:function(t){var r,s="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",a="",l="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==t){if(e.modules.filter.prevSuccess=t,e.modules.filter.emptyFunc(t))delete o.headerFilters[i];else{switch(e.modules.filter.value=t,n(e.definition.headerFilterFunc)){case"string":o.filters[e.definition.headerFilterFunc]?(a=e.definition.headerFilterFunc,r=function(i){var n=e.definition.headerFilterFuncParams||{},r=e.getFieldValue(i);return n="function"==typeof n?n(t,r,i):n,o.filters[e.definition.headerFilterFunc](t,r,i,n)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":a=r=function(o){var i=e.definition.headerFilterFuncParams||{},n=e.getFieldValue(o);return i="function"==typeof i?i(t,n,o):i,e.definition.headerFilterFunc(t,n,o,i)}}if(!r)switch(s){case"partial":r=function(o){var i=e.getFieldValue(o);return null!=i&&String(i).toLowerCase().indexOf(String(t).toLowerCase())>-1},a="like";break;default:r=function(o){return e.getFieldValue(o)==t},a="="}o.headerFilters[i]={value:t,func:r,type:a,params:{}}}l=JSON.stringify(o.headerFilters),o.prevHeaderFilterChangeCheck!==l&&(o.prevHeaderFilterChangeCheck=l,o.changed=!0,o.table.rowManager.filterRefresh())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)},S.prototype.generateHeaderFilterElement=function(e,t,o){var i,r,s,a,l,c,u,d=this,h=this,p=e.modules.filter.success,f=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),f){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(e){return!e&&"0"!==e},(i=document.createElement("div")).classList.add("tabulator-header-filter"),n(e.definition.headerFilter)){case"string":h.table.modules.edit.editors[e.definition.headerFilter]?(r=h.table.modules.edit.editors[e.definition.headerFilter],"tick"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":r=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?r=e.modules.edit.editor:e.definition.formatter&&h.table.modules.edit.editors[e.definition.formatter]?(r=h.table.modules.edit.editors[e.definition.formatter],"tick"!==e.definition.formatter&&"tickCross"!==e.definition.formatter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):r=h.table.modules.edit.editors.input}if(r){if(a={getValue:function(){return void 0!==t?t:""},getField:function(){return e.definition.field},getElement:function(){return i},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},u="function"==typeof(u=e.definition.headerFilterParams||{})?u.call(h.table):u,!(s=r.call(this.table.modules.edit,a,(function(){}),p,(function(){}),u)))return void console.warn("Filter Error - Cannot add filter to "+f+" column, editor returned a value of false");if(!(s instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+f+" column, editor should return an instance of Node, the editor returned:",s);f?h.table.modules.localize.bind("headerFilters|columns|"+e.definition.field,(function(e){s.setAttribute("placeholder",void 0!==e&&e?e:h.table.modules.localize.getText("headerFilters|default"))})):h.table.modules.localize.bind("headerFilters|default",(function(e){s.setAttribute("placeholder",void 0!==h.column.definition.headerFilterPlaceholder&&h.column.definition.headerFilterPlaceholder?h.column.definition.headerFilterPlaceholder:e)})),s.addEventListener("click",(function(e){e.stopPropagation(),s.focus()})),s.addEventListener("focus",(function(e){var t=d.table.columnManager.element.scrollLeft;t!==d.table.rowManager.element.scrollLeft&&(d.table.rowManager.scrollHorizontal(t),d.table.columnManager.scrollHorizontal(t))})),l=!1,c=function(e){l&&clearTimeout(l),l=setTimeout((function(){p(s.value)}),h.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=s,e.modules.filter.attrType=s.hasAttribute("type")?s.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=s.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter&&("autocomplete"!==e.definition.editor&&"tickCross"!==e.definition.editor||!0!==e.definition.headerFilter)&&(s.addEventListener("keyup",c),s.addEventListener("search",c),"number"==e.modules.filter.attrType&&s.addEventListener("change",(function(e){p(s.value)})),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&s.setAttribute("type","search")),"input"!=e.modules.filter.tagType&&"select"!=e.modules.filter.tagType&&"textarea"!=e.modules.filter.tagType||s.addEventListener("mousedown",(function(e){e.stopPropagation()}))),i.appendChild(s),e.contentElement.appendChild(i),o||h.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)},S.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach((function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")}))},S.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach((function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")}))},S.prototype.setHeaderFilterFocus=function(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())},S.prototype.getHeaderFilterValue=function(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())},S.prototype.setHeaderFilterValue=function(e,t){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,t,!0),e.modules.filter.success(t)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))},S.prototype.reloadHeaderFilter=function(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))},S.prototype.hasChanged=function(){var e=this.changed;return this.changed=!1,e},S.prototype.setFilter=function(e,t,o,i){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:t,value:o,params:i}]),this.addFilter(e)},S.prototype.addFilter=function(e,t,o,i){var n=this;Array.isArray(e)||(e=[{field:e,type:t,value:o,params:i}]),e.forEach((function(e){(e=n.findFilter(e))&&(n.filterList.push(e),n.changed=!0)})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},S.prototype.findFilter=function(e){var t,o=this;if(Array.isArray(e))return this.findSubFilters(e);var i=!1;return"function"==typeof e.field?i=function(t){return e.field(t,e.type||{})}:o.filters[e.type]?i=(t=o.table.columnManager.getColumnByField(e.field))?function(i){return o.filters[e.type](e.value,t.getFieldValue(i),i,e.params||{})}:function(t){return o.filters[e.type](e.value,t[e.field],t,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=i,!!e.func&&e},S.prototype.findSubFilters=function(e){var t=this,o=[];return e.forEach((function(e){(e=t.findFilter(e))&&o.push(e)})),!!o.length&&o},S.prototype.getFilters=function(e,t){var o=[];return e&&(o=this.getHeaderFilters()),t&&o.forEach((function(e){"function"==typeof e.type&&(e.type="function")})),o=o.concat(this.filtersToArray(this.filterList,t))},S.prototype.filtersToArray=function(e,t){var o=this,i=[];return e.forEach((function(e){var n;Array.isArray(e)?i.push(o.filtersToArray(e,t)):(n={field:e.field,type:e.type,value:e.value},t&&"function"==typeof n.type&&(n.type="function"),i.push(n))})),i},S.prototype.getHeaderFilters=function(){var e=[];for(var t in this.headerFilters)e.push({field:t,type:this.headerFilters[t].type,value:this.headerFilters[t].value});return e},S.prototype.removeFilter=function(e,t,o){var i=this;Array.isArray(e)||(e=[{field:e,type:t,value:o}]),e.forEach((function(e){var t=-1;(t="object"==n(e.field)?i.filterList.findIndex((function(t){return e===t})):i.filterList.findIndex((function(t){return e.field===t.field&&e.type===t.type&&e.value===t.value})))>-1?(i.filterList.splice(t,1),i.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",e.type)})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},S.prototype.clearFilter=function(e){this.filterList=[],e&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},S.prototype.clearHeaderFilter=function(){var e=this;this.headerFilters={},e.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach((function(t){t.modules.filter.value=null,t.modules.filter.prevSuccess=void 0,e.reloadHeaderFilter(t)})),this.changed=!0},S.prototype.search=function(e,t,o,i){var n=this,r=[],s=[];return Array.isArray(t)||(t=[{field:t,type:o,value:i}]),t.forEach((function(e){(e=n.findFilter(e))&&s.push(e)})),this.table.rowManager.rows.forEach((function(t){var o=!0;s.forEach((function(e){n.filterRecurse(e,t.getData())||(o=!1)})),o&&r.push("data"===e?t.getData("data"):t.getComponent())})),r},S.prototype.filter=function(e,t){var o=this,i=[],n=[];return o.table.options.dataFiltering&&o.table.options.dataFiltering.call(o.table,o.getFilters()),o.table.options.ajaxFiltering||!o.filterList.length&&!Object.keys(o.headerFilters).length?i=e.slice(0):e.forEach((function(e){o.filterRow(e)&&i.push(e)})),o.table.options.dataFiltered&&(i.forEach((function(e){n.push(e.getComponent())})),o.table.options.dataFiltered.call(o.table,o.getFilters(),n)),i},S.prototype.filterRow=function(e,t){var o=this,i=!0,n=e.getData();for(var r in o.filterList.forEach((function(e){o.filterRecurse(e,n)||(i=!1)})),o.headerFilters)o.headerFilters[r].func(n)||(i=!1);return i},S.prototype.filterRecurse=function(e,t){var o=this,i=!1;return Array.isArray(e)?e.forEach((function(e){o.filterRecurse(e,t)&&(i=!0)})):i=e.func(t),i},S.prototype.filters={"=":function(e,t,o,i){return t==e},"<":function(e,t,o,i){return t<e},"<=":function(e,t,o,i){return t<=e},">":function(e,t,o,i){return t>e},">=":function(e,t,o,i){return t>=e},"!=":function(e,t,o,i){return t!=e},regex:function(e,t,o,i){return"string"==typeof e&&(e=new RegExp(e)),e.test(t)},like:function(e,t,o,i){return null==e?t===e:null!=t&&String(t).toLowerCase().indexOf(e.toLowerCase())>-1},keywords:function(e,t,o,i){var n=e.toLowerCase().split(void 0===i.separator?" ":i.separator),r=String(null==t?"":t).toLowerCase(),s=[];return n.forEach((function(e){r.includes(e)&&s.push(!0)})),i.matchAll?s.length===n.length:!!s.length},starts:function(e,t,o,i){return null==e?t===e:null!=t&&String(t).toLowerCase().startsWith(e.toLowerCase())},ends:function(e,t,o,i){return null==e?t===e:null!=t&&String(t).toLowerCase().endsWith(e.toLowerCase())},in:function(e,t,o,i){return Array.isArray(e)?!e.length||e.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",e),!1)}},h.prototype.registerModule("filter",S);var M=function(e){this.table=e};M.prototype.initializeColumn=function(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))},M.prototype.lookupFormatter=function(e,t){var o={params:e.definition["formatter"+t+"Params"]||{}},i=e.definition["formatter"+t];switch(void 0===i?"undefined":n(i)){case"string":"tick"===i&&(i="tickCross",void 0===o.params.crossElement&&(o.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[i]?o.formatter=this.formatters[i]:(console.warn("Formatter Error - No such formatter found: ",i),o.formatter=this.formatters.plaintext);break;case"function":o.formatter=i;break;default:o.formatter=this.formatters.plaintext}return o},M.prototype.cellRendered=function(e){e.modules.format&&e.modules.format.renderedCallback&&e.modules.format.renderedCallback()},M.prototype.formatValue=function(e){var t=e.getComponent(),o="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,o,(function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t}))},M.prototype.formatExportValue=function(e,t){var o,i=e.column.modules.format[t];if(i){return o="function"==typeof i.params?i.params(component):i.params,i.formatter.call(this,e.getComponent(),o,(function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t}))}return this.formatValue(e)},M.prototype.sanitizeHTML=function(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}return e},M.prototype.emptyToSpace=function(e){return null==e||""===e?"&nbsp;":e},M.prototype.getFormatter=function(e){switch(void 0===e?"undefined":n(e)){case"string":this.formatters[e]?e=this.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=this.formatters.plaintext);break;case"function":e=e;break;default:e=this.formatters.plaintext}return e},M.prototype.formatters={plaintext:function(e,t,o){return this.emptyToSpace(this.sanitizeHTML(e.getValue()))},html:function(e,t,o){return e.getValue()},textarea:function(e,t,o){return e.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(e.getValue()))},money:function(e,t,o){var i,n,r,s,a=parseFloat(e.getValue()),l=t.decimal||".",c=t.thousand||",",u=t.symbol||"",d=!!t.symbolAfter,h=void 0!==t.precision?t.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(e.getValue()));for(i=!1!==h?a.toFixed(h):a,n=(i=String(i).split("."))[0],r=i.length>1?l+i[1]:"",s=/(\d+)(\d{3})/;s.test(n);)n=n.replace(s,"$1"+c+"$2");return d?n+r+u:u+n+r},link:function(e,t,o){var i=e.getValue(),r=t.urlPrefix||"",s=t.download,a=i,l=document.createElement("a");if(t.labelField&&(a=e.getData()[t.labelField]),t.label)switch(n(t.label)){case"string":a=t.label;break;case"function":a=t.label(e)}if(a){if(t.urlField&&(i=e.getData()[t.urlField]),t.url)switch(n(t.url)){case"string":i=t.url;break;case"function":i=t.url(e)}return l.setAttribute("href",r+i),t.target&&l.setAttribute("target",t.target),t.download&&(s="function"==typeof s?s(e):!0===s?"":s,l.setAttribute("download",s)),l.innerHTML=this.emptyToSpace(this.sanitizeHTML(a)),l}return"&nbsp;"},image:function(e,t,o){var i=document.createElement("img");switch(i.setAttribute("src",e.getValue()),n(t.height)){case"number":i.style.height=t.height+"px";break;case"string":i.style.height=t.height}switch(n(t.width)){case"number":i.style.width=t.width+"px";break;case"string":i.style.width=t.width}return i.addEventListener("load",(function(){e.getRow().normalizeHeight()})),i},tickCross:function(e,t,o){var i=e.getValue(),n=e.getElement(),r=t.allowEmpty,s=t.allowTruthy,a=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return s&&i||!0===i||"true"===i||"True"===i||1===i||"1"===i?(n.setAttribute("aria-checked",!0),a||""):!r||"null"!==i&&""!==i&&null!=i?(n.setAttribute("aria-checked",!1),l||""):(n.setAttribute("aria-checked","mixed"),"")},datetime:function(e,t,o){var i=t.inputFormat||"YYYY-MM-DD hh:mm:ss",n=t.outputFormat||"DD/MM/YYYY hh:mm:ss",r=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",s=e.getValue(),a=moment(s,i);return a.isValid()?t.timezone?a.tz(t.timezone).format(n):a.format(n):!0===r?s:"function"==typeof r?r(s):r},datetimediff:function(e,t,o){var i=t.inputFormat||"YYYY-MM-DD hh:mm:ss",n=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",r=void 0!==t.suffix&&t.suffix,s=void 0!==t.unit?t.unit:void 0,a=void 0!==t.humanize&&t.humanize,l=void 0!==t.date?t.date:moment(),c=e.getValue(),u=moment(c,i);return u.isValid()?a?moment.duration(u.diff(l)).humanize(r):u.diff(l,s)+(r?" "+r:""):!0===n?c:"function"==typeof n?n(c):n},lookup:function(e,t,o){var i=e.getValue();return void 0===t[i]?(console.warn("Missing display value for "+i),i):t[i]},star:function(e,t,o){var i=e.getValue(),n=e.getElement(),r=t&&t.stars?t.stars:5,s=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,r));for(var l=1;l<=r;l++){var c=a.cloneNode(!0);c.innerHTML=l<=i?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',s.appendChild(c)}return n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.setAttribute("aria-label",i),s},traffic:function(e,t,o){var i,r,s=this.sanitizeHTML(e.getValue())||0,a=document.createElement("span"),l=t&&t.max?t.max:100,c=t&&t.min?t.min:0,u=t&&void 0!==t.color?t.color:["red","orange","green"],d="#666666";if(!isNaN(s)&&void 0!==e.getValue()){switch(a.classList.add("tabulator-traffic-light"),r=parseFloat(s)<=l?parseFloat(s):l,r=parseFloat(r)>=c?parseFloat(r):c,i=(l-c)/100,r=Math.round((r-c)/i),void 0===u?"undefined":n(u)){case"string":d=u;break;case"function":d=u(s);break;case"object":if(Array.isArray(u)){var h=100/u.length,p=Math.floor(r/h);p=Math.min(p,u.length-1),d=u[p=Math.max(p,0)];break}}return a.style.backgroundColor=d,a}},progress:function(e,t,o){var i,r,s,a,l,u=this.sanitizeHTML(e.getValue())||0,d=e.getElement(),h=t&&t.max?t.max:100,p=t&&t.min?t.min:0,f=t&&t.legendAlign?t.legendAlign:"center";switch(r=parseFloat(u)<=h?parseFloat(u):h,r=parseFloat(r)>=p?parseFloat(r):p,i=(h-p)/100,r=Math.round((r-p)/i),n(t.color)){case"string":s=t.color;break;case"function":s=t.color(u);break;case"object":if(Array.isArray(t.color)){var m=100/t.color.length,g=Math.floor(r/m);g=Math.min(g,t.color.length-1),g=Math.max(g,0),s=t.color[g];break}default:s="#2DC214"}switch(n(t.legend)){case"string":a=t.legend;break;case"function":a=t.legend(u);break;case"boolean":a=u;break;default:a=!1}switch(n(t.legendColor)){case"string":l=t.legendColor;break;case"function":l=t.legendColor(u);break;case"object":if(Array.isArray(t.legendColor)){m=100/t.legendColor.length,g=Math.floor(r/m);g=Math.min(g,t.legendColor.length-1),g=Math.max(g,0),l=t.legendColor[g]}break;default:l="#000"}d.style.minWidth="30px",d.style.position="relative",d.setAttribute("aria-label",r);var b=document.createElement("div");if(b.style.display="inline-block",b.style.position="relative",b.style.width=r+"%",b.style.backgroundColor=s,b.style.height="100%",b.setAttribute("data-max",h),b.setAttribute("data-min",p),a){var v=document.createElement("div");v.style.position="absolute",v.style.top="4px",v.style.left=0,v.style.textAlign=f,v.style.width="100%",v.style.color=l,v.innerHTML=a}return o((function(){if(!(e instanceof c)){var t=document.createElement("div");t.style.position="absolute",t.style.top="4px",t.style.bottom="4px",t.style.left="4px",t.style.right="4px",d.appendChild(t),d=t}d.appendChild(b),a&&d.appendChild(v)})),""},color:function(e,t,o){return e.getElement().style.backgroundColor=this.sanitizeHTML(e.getValue()),""},buttonTick:function(e,t,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(e,t,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(e,t,o){return this.table.rowManager.activeRows.indexOf(e.getRow()._getSelf())+1},handle:function(e,t,o){return e.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(e,t,o){var i=document.createElement("div"),n=e.getRow()._row.modules.responsiveLayout;function r(e){var t=n.element;n.open=e,t&&(n.open?(i.classList.add("open"),t.style.display=""):(i.classList.remove("open"),t.style.display="none"))}return i.classList.add("tabulator-responsive-collapse-toggle"),i.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",e.getElement().classList.add("tabulator-row-handle"),i.addEventListener("click",(function(e){e.stopImmediatePropagation(),r(!n.open)})),r(n.open),i},rowSelection:function(e){var t=this,o=document.createElement("input");if(o.type="checkbox",this.table.modExists("selectRow",!0))if(o.addEventListener("click",(function(e){e.stopPropagation()})),"function"==typeof e.getRow){var i=e.getRow();o.addEventListener("change",(function(e){i.toggleSelect()})),o.checked=i.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(i,o)}else o.addEventListener("change",(function(e){t.table.modules.selectRow.selectedRows.length?t.table.deselectRow():t.table.selectRow()})),this.table.modules.selectRow.registerHeaderSelectCheckbox(o);return o}},h.prototype.registerModule("format",M);var T=function(e){this.table=e,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1};T.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0},T.prototype.initializeColumn=function(e){var t={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(t.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=t):this.initializationMode="right")},T.prototype.frozenCheck=function(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen},T.prototype.scrollHorizontal=function(){var e,t=this;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout((function(){t.layout()}),100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach((function(e){"row"===e.type&&t.layoutRow(e)})),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},T.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},T.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},T.prototype.layoutColumnPosition=function(e){var t=this,o=[];this.leftColumns.forEach((function(i,n){if(i.modules.frozen.margin=t._calcSpace(t.leftColumns,n)+t.table.columnManager.scrollLeft+"px",n==t.leftColumns.length-1?i.modules.frozen.edge=!0:i.modules.frozen.edge=!1,i.parent.isGroup){var r=t.getColGroupParentElement(i);o.includes(r)||(t.layoutElement(r,i),o.push(r)),i.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+i.modules.frozen.position)}else t.layoutElement(i.getElement(),i);e&&i.cells.forEach((function(e){t.layoutElement(e.getElement(),i)}))})),this.rightColumns.forEach((function(o,i){o.modules.frozen.margin=t.rightPadding-t._calcSpace(t.rightColumns,i+1)+"px",i==t.rightColumns.length-1?o.modules.frozen.edge=!0:o.modules.frozen.edge=!1,o.parent.isGroup?t.layoutElement(t.getColGroupParentElement(o),o):t.layoutElement(o.getElement(),o),e&&o.cells.forEach((function(e){t.layoutElement(e.getElement(),o)}))}))},T.prototype.getColGroupParentElement=function(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()},T.prototype.layout=function(){var e=this;e.active&&(this.calcMargins(),e.table.rowManager.getDisplayRows().forEach((function(t){"row"===t.type&&e.layoutRow(t)})),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},T.prototype.layoutRow=function(e){var t=this;e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach((function(o){var i=e.getCell(o);i&&t.layoutElement(i.getElement(),o)})),this.rightColumns.forEach((function(o){var i=e.getCell(o);i&&t.layoutElement(i.getElement(),o)}))},T.prototype.layoutElement=function(e,t){t.modules.frozen&&(e.style.position="absolute",e.style.left=t.modules.frozen.margin,e.classList.add("tabulator-frozen"),t.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+t.modules.frozen.position))},T.prototype._calcSpace=function(e,t){for(var o=0,i=0;i<t;i++)e[i].visible&&(o+=e[i].getWidth());return o},h.prototype.registerModule("frozenColumns",T);var L=function(e){this.table=e,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0};L.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},L.prototype.setDisplayIndex=function(e){this.displayIndex=e},L.prototype.getDisplayIndex=function(){return this.displayIndex},L.prototype.isFrozen=function(){return!!this.rows.length},L.prototype.getRows=function(e){var t=e.slice(0);return this.rows.forEach((function(e){var o=t.indexOf(e);o>-1&&t.splice(o,1)})),t},L.prototype.freezeRow=function(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.table.rowManager.refreshActiveData("display"),this.styleRows())},L.prototype.unfreezeRow=function(e){this.rows.indexOf(e);e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")},L.prototype.detachRow=function(e){var t=this.rows.indexOf(e);if(t>-1){var o=e.getElement();o.parentNode.removeChild(o),this.rows.splice(t,1)}},L.prototype.styleRows=function(e){var t=this;this.rows.forEach((function(e,o){t.table.rowManager.styleRow(e,o)}))},h.prototype.registerModule("frozenRows",L);var A=function(e){this._group=e,this.type="GroupComponent"};A.prototype.getKey=function(){return this._group.key},A.prototype.getField=function(){return this._group.field},A.prototype.getElement=function(){return this._group.element},A.prototype.getRows=function(){return this._group.getRows(!0)},A.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},A.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},A.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._group.visible},A.prototype.isVisible=function(){return this._group.visible},A.prototype.show=function(){this._group.show()},A.prototype.hide=function(){this._group.hide()},A.prototype.toggle=function(){this._group.toggleVisibility()},A.prototype._getSelf=function(){return this._group},A.prototype.getTable=function(){return this._group.groupManager.table};var D=function(e,t,o,i,n,r,s){this.groupManager=e,this.parent=t,this.key=i,this.level=o,this.field=n,this.hasSubGroups=o<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=s,this.rows=[],this.groups=[],this.groupList=[],this.generator=r,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=s?s.visible:void 0!==e.startOpen[o]?e.startOpen[o]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()};D.prototype.wipe=function(){this.groupList.length?this.groupList.forEach((function(e){e.wipe()})):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},D.prototype.createElements=function(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},D.prototype.createValueGroups=function(){var e=this,t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach((function(o){e._createGroup(o,t)}))},D.prototype.addBindings=function(){var e,t,o,i=this;i.groupManager.table.options.groupClick&&i.element.addEventListener("click",(function(e){i.groupManager.table.options.groupClick.call(i.groupManager.table,e,i.getComponent())})),i.groupManager.table.options.groupDblClick&&i.element.addEventListener("dblclick",(function(e){i.groupManager.table.options.groupDblClick.call(i.groupManager.table,e,i.getComponent())})),i.groupManager.table.options.groupContext&&i.element.addEventListener("contextmenu",(function(e){i.groupManager.table.options.groupContext.call(i.groupManager.table,e,i.getComponent())})),i.groupManager.table.options.groupContextMenu&&i.groupManager.table.modExists("menu")&&i.groupManager.table.modules.menu.initializeGroup.call(i.groupManager.table.modules.menu,i),i.groupManager.table.options.groupTap&&(o=!1,i.element.addEventListener("touchstart",(function(e){o=!0}),{passive:!0}),i.element.addEventListener("touchend",(function(e){o&&i.groupManager.table.options.groupTap(e,i.getComponent()),o=!1}))),i.groupManager.table.options.groupDblTap&&(e=null,i.element.addEventListener("touchend",(function(t){e?(clearTimeout(e),e=null,i.groupManager.table.options.groupDblTap(t,i.getComponent())):e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),i.groupManager.table.options.groupTapHold&&(t=null,i.element.addEventListener("touchstart",(function(e){clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,o=!1,i.groupManager.table.options.groupTapHold(e,i.getComponent())}),1e3)}),{passive:!0}),i.element.addEventListener("touchend",(function(e){clearTimeout(t),t=null}))),i.groupManager.table.options.groupToggleElement&&("arrow"==i.groupManager.table.options.groupToggleElement?i.arrowElement:i.element).addEventListener("click",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),i.toggleVisibility()}))},D.prototype._createGroup=function(e,t){var o=t+"_"+e,i=new D(this.groupManager,this,t,e,this.groupManager.groupIDLookups[t].field,this.groupManager.headerGenerator[t]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=i,this.groupList.push(i)},D.prototype._addRowToGroup=function(e){var t=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[t].func(e.getData()),i=t+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]?this.groups[i]&&this.groups[i].addRow(e):(this.groups[i]||this._createGroup(o,t),this.groups[i].addRow(e))}},D.prototype._addRow=function(e){this.rows.push(e),e.modules.group=this},D.prototype.insertRow=function(e,t,o){var i=this.conformRowData({});e.updateData(i);var n=this.rows.indexOf(t);n>-1?o?this.rows.splice(n+1,0,e):this.rows.splice(n,0,e):o?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)},D.prototype.scrollHeader=function(e){this.arrowElement.style.marginLeft=e,this.groupList.forEach((function(t){t.scrollHeader(e)}))},D.prototype.getRowIndex=function(e){},D.prototype.conformRowData=function(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e},D.prototype.removeRow=function(e){var t=this.rows.indexOf(e),o=e.getElement();t>-1&&this.rows.splice(t,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},D.prototype.removeGroup=function(e){var t,o=e.level+"_"+e.key;this.groups[o]&&(delete this.groups[o],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},D.prototype.getHeadersAndRows=function(e){var t=[];return t.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach((function(o){t=t.concat(o.getHeadersAndRows(e))})):(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top))),!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom)))),t},D.prototype.getData=function(e,t){var o=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach((function(e){o.push(e.getData(t||"data"))})),o},D.prototype.getRowCount=function(){var e=0;return this.groupList.length?this.groupList.forEach((function(t){e+=t.getRowCount()})):e=this.rows.length,e},D.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},D.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach((function(e){e.getHeadersAndRows().forEach((function(e){e.detachElement()}))})):this.rows.forEach((function(e){var t=e.getElement();t.parentNode.removeChild(t)})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},D.prototype.show=function(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var e=this.getElement();this.groupList.length?this.groupList.forEach((function(t){t.getHeadersAndRows().forEach((function(t){var o=t.getElement();e.parentNode.insertBefore(o,e.nextSibling),t.initialize(),e=o}))})):this.rows.forEach((function(t){var o=t.getElement();e.parentNode.insertBefore(o,e.nextSibling),t.initialize(),e=o})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},D.prototype._visSet=function(){var e=[];"function"==typeof this.visible&&(this.rows.forEach((function(t){e.push(t.getData())})),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))},D.prototype.getRowGroup=function(e){var t=!1;return this.groupList.length?this.groupList.forEach((function(o){var i=o.getRowGroup(e);i&&(t=i)})):this.rows.find((function(t){return t===e}))&&(t=this),t},D.prototype.getSubGroups=function(e){var t=[];return this.groupList.forEach((function(o){t.push(e?o.getComponent():o)})),t},D.prototype.getRows=function(e){var t=[];return this.rows.forEach((function(o){t.push(e?o.getComponent():o)})),t},D.prototype.generateGroupHeaderContents=function(){var e=[];for(this.rows.forEach((function(t){e.push(t.getData())})),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},D.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element},D.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},D.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},D.prototype.initialize=function(e){this.initialized&&!e||(this.normalizeHeight(),this.initialized=!0)},D.prototype.reinitialize=function(){this.initialized=!1,this.height=0,h.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},D.prototype.setHeight=function(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)},D.prototype.getHeight=function(){return this.outerHeight},D.prototype.getGroup=function(){return this},D.prototype.reinitializeHeight=function(){},D.prototype.calcHeight=function(){},D.prototype.setCellHeight=function(){},D.prototype.clearCellHeight=function(){},D.prototype.getComponent=function(){return this.component||(this.component=new A(this)),this.component};var P=function(e){this.table=e,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0};P.prototype.initialize=function(){var e=this,t=e.table.options.groupBy,o=e.table.options.groupStartOpen,i=e.table.options.groupHeader;(this.allowedValues=e.table.options.groupValues,Array.isArray(t)&&Array.isArray(i)&&t.length>i.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),e.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],e.table.modules.localize.bind("groups|item",(function(t,o){e.headerGenerator[0]=function(e,i,n){return(void 0===e?"":e)+"<span>("+i+" "+(1===i?t:o.groups.items)+")</span>"}})),this.groupIDLookups=[],Array.isArray(t)||t)?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach((function(t){t.definition.topCalc&&e.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&e.table.modules.columnCalcs.initializeBottomRow()}));Array.isArray(t)||(t=[t]),t.forEach((function(t,o){var i,n;i="function"==typeof t?t:(n=e.table.columnManager.getColumnByField(t))?function(e){return n.getFieldValue(e)}:function(e){return e[t]},e.groupIDLookups.push({field:"function"!=typeof t&&t,func:i,values:!!e.allowedValues&&e.allowedValues[o]})})),o&&(Array.isArray(o)||(o=[o]),o.forEach((function(e){})),e.startOpen=o),i&&(e.headerGenerator=Array.isArray(i)?i:[i]),this.initialized=!0},P.prototype.setDisplayIndex=function(e){this.displayIndex=e},P.prototype.getDisplayIndex=function(){return this.displayIndex},P.prototype.getRows=function(e){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(e),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):e.slice(0)},P.prototype.getGroups=function(e){var t=[];return this.groupList.forEach((function(o){t.push(e?o.getComponent():o)})),t},P.prototype.getChildGroups=function(e){var t=this,o=[];return e||(e=this),e.groupList.forEach((function(e){e.groupList.length?o=o.concat(t.getChildGroups(e)):o.push(e)})),o},P.prototype.wipe=function(){this.groupList.forEach((function(e){e.wipe()}))},P.prototype.pullGroupListData=function(e){var t=this,o=[];return e.forEach((function(e){var i={level:0,rowCount:0,headerContent:""},n=[];e.hasSubGroups?(n=t.pullGroupListData(e.groupList),i.level=e.level,i.rowCount=n.length-e.groupList.length,i.headerContent=e.generator(e.key,i.rowCount,e.rows,e),o.push(i),o=o.concat(n)):(i.level=e.level,i.headerContent=e.generator(e.key,e.rows.length,e.rows,e),i.rowCount=e.getRows().length,o.push(i),e.getRows().forEach((function(e){o.push(e.getData("data"))})))})),o},P.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},P.prototype.getRowGroup=function(e){var t=!1;return this.groupList.forEach((function(o){var i=o.getRowGroup(e);i&&(t=i)})),t},P.prototype.countGroups=function(){return this.groupList.length},P.prototype.generateGroups=function(e){var t=this,o=t.groups;t.groups={},t.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach((function(e){t.createGroup(e,0,o)})),e.forEach((function(e){t.assignRowToExistingGroup(e,o)}))):e.forEach((function(e){t.assignRowToGroup(e,o)}))},P.prototype.createGroup=function(e,t,o){var i,n=t+"_"+e;o=o||[],i=new D(this,!1,t,e,this.groupIDLookups[0].field,this.headerGenerator[0],o[n]),this.groups[n]=i,this.groupList.push(i)},P.prototype.assignRowToExistingGroup=function(e,t){var o="0_"+this.groupIDLookups[0].func(e.getData());this.groups[o]&&this.groups[o].addRow(e)},P.prototype.assignRowToGroup=function(e,t){var o=this.groupIDLookups[0].func(e.getData()),i=!this.groups["0_"+o];return i&&this.createGroup(o,0,t),this.groups["0_"+o].addRow(e),!i},P.prototype.updateGroupRows=function(e){var t=[];if(this.groupList.forEach((function(e){t=t.concat(e.getHeadersAndRows())})),e){var o=this.table.rowManager.setDisplayRows(t,this.getDisplayIndex());!0!==o&&this.setDisplayIndex(o),this.table.rowManager.refreshActiveData("group",!0,!0)}return t},P.prototype.scrollHeaders=function(e){e+="px",this.groupList.forEach((function(t){t.scrollHeader(e)}))},P.prototype.removeGroup=function(e){var t,o=e.level+"_"+e.key;this.groups[o]&&(delete this.groups[o],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1))},h.prototype.registerModule("groupRows",P);var F=function(e){this.table=e,this.history=[],this.index=-1};F.prototype.clear=function(){this.history=[],this.index=-1},F.prototype.action=function(e,t,o){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:t,data:o}),this.index++},F.prototype.getHistoryUndoSize=function(){return this.index+1},F.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},F.prototype.undo=function(){if(this.index>-1){var e=this.history[this.index];return this.undoers[e.type].call(this,e),this.index--,this.table.options.historyUndo.call(this.table,e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},F.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var e=this.history[this.index];return this.redoers[e.type].call(this,e),this.table.options.historyRedo.call(this.table,e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},F.prototype.undoers={cellEdit:function(e){e.component.setValueProcessData(e.data.oldValue)},rowAdd:function(e){e.component.deleteActual()},rowDelete:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posFrom],!e.data.after),this.table.rowManager.redraw()}},F.prototype.redoers={cellEdit:function(e){e.component.setValueProcessData(e.data.newValue)},rowAdd:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowDelete:function(e){e.component.deleteActual()},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posTo],e.data.after),this.table.rowManager.redraw()}},F.prototype._rebindRow=function(e,t){this.history.forEach((function(o){if(o.component instanceof l)o.component===e&&(o.component=t);else if(o.component instanceof u&&o.component.row===e){var i=o.component.column.getField();i&&(o.component=t.getCell(i))}}))},h.prototype.registerModule("history",F);var _=function(e){this.table=e,this.fieldIndex=[],this.hasIndex=!1};_.prototype.parseTable=function(){var e=this.table.element,t=this.table.options,o=(t.columns,e.getElementsByTagName("th")),i=e.getElementsByTagName("tbody")[0],r=[];this.hasIndex=!1,this.table.options.htmlImporting.call(this.table),i=i?i.getElementsByTagName("tr"):[],this._extractOptions(e,t),o.length?this._extractHeaders(o,i):this._generateBlankHeaders(o,i);for(var s=0;s<i.length;s++){var a=i[s].getElementsByTagName("td"),l={};this.hasIndex||(l[t.index]=s);for(var c=0;c<a.length;c++){var u=a[c];void 0!==this.fieldIndex[c]&&(l[this.fieldIndex[c]]=u.innerHTML)}r.push(l)}var d=document.createElement("div"),h=e.attributes;for(var c in h)"object"==n(h[c])&&d.setAttribute(h[c].name,h[c].value);e.parentNode.replaceChild(d,e),t.data=r,this.table.options.htmlImported.call(this.table),this.table.element=d},_.prototype._extractOptions=function(e,t,o){var i=e.attributes,r=o?Object.assign([],o):Object.keys(t),s={};for(var a in r.forEach((function(e){s[e.toLowerCase()]=e})),i){var l,c=i[a];c&&"object"==(void 0===c?"undefined":n(c))&&c.name&&0===c.name.indexOf("tabulator-")&&(l=c.name.replace("tabulator-",""),void 0!==s[l]&&(t[s[l]]=this._attribValue(c.value)))}},_.prototype._attribValue=function(e){return"true"===e||"false"!==e&&e},_.prototype._findCol=function(e){return this.table.options.columns.find((function(t){return t.title===e}))||!1},_.prototype._extractHeaders=function(e,t){for(var o=0;o<e.length;o++){var i,n=e[o],s=!1,a=this._findCol(n.textContent);a?s=!0:a={title:n.textContent.trim()},a.field||(a.field=n.textContent.trim().toLowerCase().replace(" ","_")),(i=n.getAttribute("width"))&&!a.width&&(a.width=i),n.attributes,this._extractOptions(n,a,r.prototype.defaultOptionList),this.fieldIndex[o]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),s||this.table.options.columns.push(a)}},_.prototype._generateBlankHeaders=function(e,t){for(var o=0;o<e.length;o++){var i=e[o],n={title:"",field:"col"+o};this.fieldIndex[o]=n.field;var r=i.getAttribute("width");r&&(n.width=r),this.table.options.columns.push(n)}},h.prototype.registerModule("htmlTableImport",_);var N=function(e){this.table=e,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1};N.prototype.initialize=function(){var e=this.table.options.keybindings,t={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(var o in this.bindings)t[o]=this.bindings[o];if(Object.keys(e).length)for(var i in e)t[i]=e[i];this.mapBindings(t),this.bindEvents()}},N.prototype.mapBindings=function(e){var t=this,o=this,i=function(i){t.actions[i]?e[i]&&("object"!==n(e[i])&&(e[i]=[e[i]]),e[i].forEach((function(e){o.mapBinding(i,e)}))):console.warn("Key Binding Error - no such action:",i)};for(var r in e)i(r)},N.prototype.mapBinding=function(e,t){var o=this,i={action:this.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};t.toString().toLowerCase().split(" ").join("").split("+").forEach((function(e){switch(e){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;case"meta":i.meta=!0;break;default:e=parseInt(e),i.keys.push(e),o.watchKeys[e]||(o.watchKeys[e]=[]),o.watchKeys[e].push(i)}}))},N.prototype.bindEvents=function(){var e=this;this.keyupBinding=function(t){var o=t.keyCode,i=e.watchKeys[o];i&&(e.pressedKeys.push(o),i.forEach((function(o){e.checkBinding(t,o)})))},this.keydownBinding=function(t){var o=t.keyCode;if(e.watchKeys[o]){var i=e.pressedKeys.indexOf(o);i>-1&&e.pressedKeys.splice(i,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},N.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},N.prototype.checkBinding=function(e,t){var o=this,i=!0;return e.ctrlKey==t.ctrl&&e.shiftKey==t.shift&&e.metaKey==t.meta&&(t.keys.forEach((function(e){-1==o.pressedKeys.indexOf(e)&&(i=!1)})),i&&t.action.call(o,e),!0)},N.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},N.prototype.actions={keyBlock:function(e){e.stopPropagation(),e.preventDefault()},scrollPageUp:function(e){var t=this.table.rowManager,o=t.scrollTop-t.height;t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(o>=0?t.element.scrollTop=o:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(e){var t=this.table.rowManager,o=t.scrollTop+t.height,i=t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(o<=i?t.element.scrollTop=o:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().prev())},navNext:function(e){var t,o=!1,i=this.table.options.tabEndNewRow;this.table.modExists("edit")&&(o=this.table.modules.edit.currentCell)&&(e.preventDefault(),(t=o.nav()).next()||i&&(o.getElement().firstChild.blur(),(i=!0===i?this.table.addRow({}):"function"==typeof i?this.table.addRow(i(o.row.getComponent())):this.table.addRow(Object.assign({},i))).then((function(){setTimeout((function(){t.next()}))}))))},navLeft:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().left())},navRight:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().right())},navUp:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().up())},navDown:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().down())},undo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.undo()))},redo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(e){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},h.prototype.registerModule("keybindings",N);var O=function(e){this.table=e,this.menuEl=!1,this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1};O.prototype.initializeColumnHeader=function(e){var t,o=this;e.definition.headerContextMenu&&e.getElement().addEventListener("contextmenu",(function(t){var i="function"==typeof e.definition.headerContextMenu?e.definition.headerContextMenu(e.getComponent()):e.definition.headerContextMenu;t.preventDefault(),o.loadMenu(t,e,i)})),e.definition.headerMenu&&((t=document.createElement("span")).classList.add("tabulator-header-menu-button"),t.innerHTML="&vellip;",t.addEventListener("click",(function(t){var i="function"==typeof e.definition.headerMenu?e.definition.headerMenu(e.getComponent()):e.definition.headerMenu;t.stopPropagation(),t.preventDefault(),o.loadMenu(t,e,i)})),e.titleElement.insertBefore(t,e.titleElement.firstChild))},O.prototype.initializeCell=function(e){var t=this;e.getElement().addEventListener("contextmenu",(function(o){var i="function"==typeof e.column.definition.contextMenu?e.column.definition.contextMenu(e.getComponent()):e.column.definition.contextMenu;i&&o.stopImmediatePropagation(),t.loadMenu(o,e,i)}))},O.prototype.initializeRow=function(e){var t=this;e.getElement().addEventListener("contextmenu",(function(o){var i="function"==typeof t.table.options.rowContextMenu?t.table.options.rowContextMenu(e.getComponent()):t.table.options.rowContextMenu;t.loadMenu(o,e,i)}))},O.prototype.initializeGroup=function(e){var t=this;e.getElement().addEventListener("contextmenu",(function(o){var i="function"==typeof t.table.options.groupContextMenu?t.table.options.groupContextMenu(e.getComponent()):t.table.options.groupContextMenu;t.loadMenu(o,e,i)}))},O.prototype.loadMenu=function(e,t,o){var i=this,n=Math.max(document.body.offsetHeight,window.innerHeight);if(e.preventDefault(),o&&o.length){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout((function(){i.nestedMenuBlock=!1}),100);this.hideMenu(),this.menuEl=document.createElement("div"),this.menuEl.classList.add("tabulator-menu"),o.forEach((function(e){var o=document.createElement("div"),n=e.label,r=e.disabled;e.separator?o.classList.add("tabulator-menu-separator"):(o.classList.add("tabulator-menu-item"),"function"==typeof n&&(n=n(t.getComponent())),n instanceof Node?o.appendChild(n):o.innerHTML=n,"function"==typeof r&&(r=r(t.getComponent())),r?(o.classList.add("tabulator-menu-item-disabled"),o.addEventListener("click",(function(e){e.stopPropagation()}))):o.addEventListener("click",(function(o){i.hideMenu(),e.action(o,t.getComponent())}))),i.menuEl.appendChild(o)})),this.menuEl.style.top=e.pageY+"px",this.menuEl.style.left=e.pageX+"px",document.body.addEventListener("click",this.blurEvent),this.table.rowManager.element.addEventListener("scroll",this.blurEvent),setTimeout((function(){document.body.addEventListener("contextmenu",i.blurEvent)}),100),document.body.addEventListener("keydown",this.escEvent),document.body.appendChild(this.menuEl),e.pageX+this.menuEl.offsetWidth>=document.body.offsetWidth&&(this.menuEl.style.left="",this.menuEl.style.right=document.body.offsetWidth-e.pageX+"px"),e.pageY+this.menuEl.offsetHeight>=n&&(this.menuEl.style.top="",this.menuEl.style.bottom=n-e.pageY+"px")}},O.prototype.isOpen=function(){return!!this.menuEl.parentNode},O.prototype.escMenu=function(e){27==e.keyCode&&this.hideMenu()},O.prototype.hideMenu=function(){this.menuEl.parentNode&&this.menuEl.parentNode.removeChild(this.menuEl),this.escEvent&&document.body.removeEventListener("keydown",this.escEvent),this.blurEvent&&(document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent))},O.prototype.menus={},h.prototype.registerModule("menu",O);var z=function(e){this.table=e,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};z.prototype.createPlaceholderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e},z.prototype.initializeColumn=function(e){var t,o=this,i={};e.modules.frozen||(t=e.getElement(),i.mousemove=function(i){e.parent===o.moving.parent&&((o.touchMove?i.touches[0].pageX:i.pageX)-h.prototype.helpers.elOffset(t).left+o.table.columnManager.element.scrollLeft>e.getWidth()/2?o.toCol===e&&o.toColAfter||(t.parentNode.insertBefore(o.placeholderElement,t.nextSibling),o.moveColumn(e,!0)):(o.toCol!==e||o.toColAfter)&&(t.parentNode.insertBefore(o.placeholderElement,t),o.moveColumn(e,!1)))}.bind(o),t.addEventListener("mousedown",(function(t){o.touchMove=!1,1===t.which&&(o.checkTimeout=setTimeout((function(){o.startMove(t,e)}),o.checkPeriod))})),t.addEventListener("mouseup",(function(e){1===e.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)})),o.bindTouchEvents(e)),e.modules.moveColumn=i},z.prototype.bindTouchEvents=function(e){var t,o,i,n,r,s,a=this,l=e.getElement(),c=!1;l.addEventListener("touchstart",(function(l){a.checkTimeout=setTimeout((function(){a.touchMove=!0,t=e.nextColumn(),i=t?t.getWidth()/2:0,o=e.prevColumn(),n=o?o.getWidth()/2:0,r=0,s=0,c=!1,a.startMove(l,e)}),a.checkPeriod)}),{passive:!0}),l.addEventListener("touchmove",(function(l){var u,d;a.moving&&(a.moveHover(l),c||(c=l.touches[0].pageX),(u=l.touches[0].pageX-c)>0?t&&u-r>i&&(d=t)!==e&&(c=l.touches[0].pageX,d.getElement().parentNode.insertBefore(a.placeholderElement,d.getElement().nextSibling),a.moveColumn(d,!0)):o&&-u-s>n&&(d=o)!==e&&(c=l.touches[0].pageX,d.getElement().parentNode.insertBefore(a.placeholderElement,d.getElement()),a.moveColumn(d,!1)),d&&(t=d.nextColumn(),r=i,i=t?t.getWidth()/2:0,o=d.prevColumn(),s=n,n=o?o.getWidth()/2:0))}),{passive:!0}),l.addEventListener("touchend",(function(e){a.checkTimeout&&clearTimeout(a.checkTimeout),a.moving&&a.endMove(e)}))},z.prototype.startMove=function(e,t){var o=t.getElement();this.moving=t,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-h.prototype.helpers.elOffset(o).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)},z.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach((function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)}))},z.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach((function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)}))},z.prototype.moveColumn=function(e,t){var o=this.moving.getCells();this.toCol=e,this.toColAfter=t,t?e.getCells().forEach((function(e,t){var i=e.getElement();i.parentNode.insertBefore(o[t].getElement(),i.nextSibling)})):e.getCells().forEach((function(e,t){var i=e.getElement();i.parentNode.insertBefore(o[t].getElement(),i)}))},z.prototype.endMove=function(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},z.prototype.moveHover=function(e){var t,o=this,i=o.table.columnManager.getElement(),n=i.scrollLeft,r=(o.touchMove?e.touches[0].pageX:e.pageX)-h.prototype.helpers.elOffset(i).left+n;o.hoverElement.style.left=r-o.startX+"px",r-n<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout((function(){t=Math.max(0,n-5),o.table.rowManager.getElement().scrollLeft=t,o.autoScrollTimeout=!1}),1))),n+i.clientWidth-r<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout((function(){t=Math.min(i.clientWidth,n+5),o.table.rowManager.getElement().scrollLeft=t,o.autoScrollTimeout=!1}),1)))},h.prototype.registerModule("moveColumn",z);var H=function(e){this.table=e,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1};H.prototype.createPlaceholderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e},H.prototype.initialize=function(e){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements},H.prototype.setHandle=function(e){this.hasHandle=e},H.prototype.initializeGroupHeader=function(e){var t=this,o={};o.mouseup=function(e){t.tableRowDrop(e,row)}.bind(t),o.mousemove=function(o){var i;o.pageY-h.prototype.helpers.elOffset(e.element).top+t.table.rowManager.element.scrollTop>e.getHeight()/2?t.toRow===e&&t.toRowAfter||((i=e.getElement()).parentNode.insertBefore(t.placeholderElement,i.nextSibling),t.moveRow(e,!0)):(t.toRow!==e||t.toRowAfter)&&(i=e.getElement()).previousSibling&&(i.parentNode.insertBefore(t.placeholderElement,i),t.moveRow(e,!1))}.bind(t),e.modules.moveRow=o},H.prototype.initializeRow=function(e){var t,o=this,i={};i.mouseup=function(t){o.tableRowDrop(t,e)}.bind(o),i.mousemove=function(t){var i;t.pageY-h.prototype.helpers.elOffset(e.element).top+o.table.rowManager.element.scrollTop>e.getHeight()/2?o.toRow===e&&o.toRowAfter||((i=e.getElement()).parentNode.insertBefore(o.placeholderElement,i.nextSibling),o.moveRow(e,!0)):(o.toRow!==e||o.toRowAfter)&&((i=e.getElement()).parentNode.insertBefore(o.placeholderElement,i),o.moveRow(e,!1))}.bind(o),this.hasHandle||((t=e.getElement()).addEventListener("mousedown",(function(t){1===t.which&&(o.checkTimeout=setTimeout((function(){o.startMove(t,e)}),o.checkPeriod))})),t.addEventListener("mouseup",(function(e){1===e.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)})),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=i},H.prototype.initializeCell=function(e){var t=this,o=e.getElement();o.addEventListener("mousedown",(function(o){1===o.which&&(t.checkTimeout=setTimeout((function(){t.startMove(o,e.row)}),t.checkPeriod))})),o.addEventListener("mouseup",(function(e){1===e.which&&t.checkTimeout&&clearTimeout(t.checkTimeout)})),this.bindTouchEvents(e.row,e.getElement())},H.prototype.bindTouchEvents=function(e,t){var o,i,n,r,s,a,l=this,c=!1;t.addEventListener("touchstart",(function(t){l.checkTimeout=setTimeout((function(){l.touchMove=!0,o=e.nextRow(),n=o?o.getHeight()/2:0,i=e.prevRow(),r=i?i.getHeight()/2:0,s=0,a=0,c=!1,l.startMove(t,e)}),l.checkPeriod)}),{passive:!0}),this.moving,this.toRow,this.toRowAfter,t.addEventListener("touchmove",(function(t){var u,d;l.moving&&(t.preventDefault(),l.moveHover(t),c||(c=t.touches[0].pageY),(u=t.touches[0].pageY-c)>0?o&&u-s>n&&(d=o)!==e&&(c=t.touches[0].pageY,d.getElement().parentNode.insertBefore(l.placeholderElement,d.getElement().nextSibling),l.moveRow(d,!0)):i&&-u-a>r&&(d=i)!==e&&(c=t.touches[0].pageY,d.getElement().parentNode.insertBefore(l.placeholderElement,d.getElement()),l.moveRow(d,!1)),d&&(o=d.nextRow(),s=n,n=o?o.getHeight()/2:0,i=d.prevRow(),a=r,r=i?i.getHeight()/2:0))})),t.addEventListener("touchend",(function(e){l.checkTimeout&&clearTimeout(l.checkTimeout),l.moving&&(l.endMove(e),l.touchMove=!1)}))},H.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach((function(e){"row"!==e.type&&"group"!==e.type||!e.modules.moveRow.mousemove||e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)}))},H.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach((function(e){"row"!==e.type&&"group"!==e.type||!e.modules.moveRow.mousemove||e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)}))},H.prototype.startMove=function(e,t){var o=t.getElement();this.setStartPosition(e,t),this.moving=t,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(t)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(e)},H.prototype.setStartPosition=function(e,t){var o,i,n=this.touchMove?e.touches[0].pageX:e.pageX,r=this.touchMove?e.touches[0].pageY:e.pageY;o=t.getElement(),this.connection?(i=o.getBoundingClientRect(),this.startX=i.left-n+window.pageXOffset,this.startY=i.top-r+window.pageYOffset):this.startY=r-o.getBoundingClientRect().top},H.prototype.endMove=function(e){e&&1!==e.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},H.prototype.moveRow=function(e,t){this.toRow=e,this.toRowAfter=t},H.prototype.moveHover=function(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)},H.prototype.moveHoverTable=function(e){var t=this.table.rowManager.getElement(),o=t.scrollTop,i=(this.touchMove?e.touches[0].pageY:e.pageY)-t.getBoundingClientRect().top+o;this.hoverElement.style.top=i-this.startY+"px"},H.prototype.moveHoverConnections=function(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"},H.prototype.elementRowDrop=function(e,t,o){this.table.options.movableRowsElementDrop&&this.table.options.movableRowsElementDrop(e,t,!!o&&o.getComponent())},H.prototype.connectToTables=function(e){var t,o=this;this.connectionSelectorsTables&&(t=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStart.call(this.table,t),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach((function(e){"string"==typeof e?o.connectionElements=o.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(e))):o.connectionElements.push(e)})),this.connectionElements.forEach((function(e){var t=function(t){o.elementRowDrop(t,e,o.moving)};e.addEventListener("mouseup",t),e.tabulatorElementDropEvent=t,e.classList.add("tabulator-movingrow-receiving")})))},H.prototype.disconnectFromTables=function(){var e;this.connectionSelectorsTables&&(e=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStop.call(this.table,e),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach((function(e){e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent}))},H.prototype.connect=function(e,t){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=t,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((function(e){"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().addEventListener("mouseup",e.modules.moveRow.mouseup)})),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,t,e),!0)},H.prototype.disconnect=function(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((function(e){"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)})),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,e)):console.warn("Move Row Error - trying to disconnect from non connected table")},H.prototype.dropComplete=function(e,t,o){var i=!1;if(o){switch(n(this.table.options.movableRowsSender)){case"string":i=this.senders[this.table.options.movableRowsSender];break;case"function":i=this.table.options.movableRowsSender}i?i.call(this,this.moving.getComponent(),t?t.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),t?t.getComponent():void 0,e)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),t?t.getComponent():void 0,e);this.endMove()},H.prototype.tableRowDrop=function(e,t){var o=!1,i=!1;switch(console.trace("drop"),e.stopImmediatePropagation(),n(this.table.options.movableRowsReceiver)){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver}o?i=o.call(this,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),i?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:t,success:i})},H.prototype.receivers={insert:function(e,t,o){return this.table.addRow(e.getData(),void 0,t),!0},add:function(e,t,o){return this.table.addRow(e.getData()),!0},update:function(e,t,o){return!!t&&(t.update(e.getData()),!0)},replace:function(e,t,o){return!!t&&(this.table.addRow(e.getData(),void 0,t),t.delete(),!0)}},H.prototype.senders={delete:function(e,t,o){e.delete()}},H.prototype.commsReceived=function(e,t,o){switch(t){case"connect":return this.connect(e,o.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,o.row,o.success)}},h.prototype.registerModule("moveRow",H);var j=function(e){this.table=e,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0};j.prototype.initializeColumn=function(e){var t=this,o=!1,i={};this.allowedTypes.forEach((function(n){var r,s="mutator"+(n.charAt(0).toUpperCase()+n.slice(1));e.definition[s]&&(r=t.lookupMutator(e.definition[s]))&&(o=!0,i[s]={mutator:r,params:e.definition[s+"Params"]||{}})})),o&&(e.modules.mutate=i)},j.prototype.lookupMutator=function(e){var t=!1;switch(void 0===e?"undefined":n(e)){case"string":this.mutators[e]?t=this.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":t=e}return t},j.prototype.transformRow=function(e,t,o){var i,n="mutator"+(t.charAt(0).toUpperCase()+t.slice(1));return this.enabled&&this.table.columnManager.traverse((function(r){var s,a,l;r.modules.mutate&&(s=r.modules.mutate[n]||r.modules.mutate.mutator||!1)&&(i=r.getFieldValue(void 0!==o?o:e),"data"!=t&&void 0===i||(l=r.getComponent(),a="function"==typeof s.params?s.params(i,e,t,l):s.params,r.setFieldValue(e,s.mutator(i,e,t,a,l))))})),e},j.prototype.transformCell=function(e,t){var o=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,i={};return o?(i=Object.assign(i,e.row.getData()),e.column.setFieldValue(i,t),o.mutator(t,i,"edit",o.params,e.getComponent())):t},j.prototype.enable=function(){this.enabled=!0},j.prototype.disable=function(){this.enabled=!1},j.prototype.mutators={},h.prototype.registerModule("mutator",j);var B=function(e){this.table=e,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.createElements()};B.prototype.createElements=function(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},B.prototype.generatePageSizeSelectList=function(){var e=this,t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,-1==this.pageSizes.indexOf(this.size)&&t.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){t=[];for(var o=1;o<5;o++)t.push(this.size*o);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach((function(t){var o=document.createElement("option");o.value=t,!0===t?e.table.modules.localize.bind("pagination|all",(function(e){o.innerHTML=e})):o.innerHTML=t,e.pageSizeSelect.appendChild(o)})),this.pageSizeSelect.value=this.size}},B.prototype.initialize=function(e){var t,o,i,n=this;this.dataSentNames=Object.assign({},this.paginationDataSentNames),this.dataSentNames=Object.assign(this.dataSentNames,this.table.options.paginationDataSent),this.dataReceivedNames=Object.assign({},this.paginationDataReceivedNames),this.dataReceivedNames=Object.assign(this.dataReceivedNames,this.table.options.paginationDataReceived),n.table.modules.localize.bind("pagination|first",(function(e){n.firstBut.innerHTML=e})),n.table.modules.localize.bind("pagination|first_title",(function(e){n.firstBut.setAttribute("aria-label",e),n.firstBut.setAttribute("title",e)})),n.table.modules.localize.bind("pagination|prev",(function(e){n.prevBut.innerHTML=e})),n.table.modules.localize.bind("pagination|prev_title",(function(e){n.prevBut.setAttribute("aria-label",e),n.prevBut.setAttribute("title",e)})),n.table.modules.localize.bind("pagination|next",(function(e){n.nextBut.innerHTML=e})),n.table.modules.localize.bind("pagination|next_title",(function(e){n.nextBut.setAttribute("aria-label",e),n.nextBut.setAttribute("title",e)})),n.table.modules.localize.bind("pagination|last",(function(e){n.lastBut.innerHTML=e})),n.table.modules.localize.bind("pagination|last_title",(function(e){n.lastBut.setAttribute("aria-label",e),n.lastBut.setAttribute("title",e)})),n.firstBut.addEventListener("click",(function(){n.setPage(1)})),n.prevBut.addEventListener("click",(function(){n.previousPage()})),n.nextBut.addEventListener("click",(function(){n.nextPage().then((function(){})).catch((function(){}))})),n.lastBut.addEventListener("click",(function(){n.setPage(n.max)})),n.table.options.paginationElement&&(n.element=n.table.options.paginationElement),this.pageSizeSelect&&(t=document.createElement("label"),n.table.modules.localize.bind("pagination|page_size",(function(e){n.pageSizeSelect.setAttribute("aria-label",e),n.pageSizeSelect.setAttribute("title",e),t.innerHTML=e})),n.element.appendChild(t),n.element.appendChild(n.pageSizeSelect),n.pageSizeSelect.addEventListener("change",(function(e){n.setPageSize("true"==n.pageSizeSelect.value||n.pageSizeSelect.value),n.setPage(1).then((function(){})).catch((function(){}))}))),n.element.appendChild(n.firstBut),n.element.appendChild(n.prevBut),n.element.appendChild(n.pagesElement),n.element.appendChild(n.nextBut),n.element.appendChild(n.lastBut),n.table.options.paginationElement||e||n.table.footerManager.append(n.element,n),n.mode=n.table.options.pagination,n.table.options.paginationSize?n.size=n.table.options.paginationSize:((o=document.createElement("div")).classList.add("tabulator-row"),o.style.visibility=e,(i=document.createElement("div")).classList.add("tabulator-cell"),i.innerHTML="Page Row Test",o.appendChild(i),n.table.rowManager.getTableElement().appendChild(o),n.size=Math.floor(n.table.rowManager.getElement().clientHeight/o.offsetHeight),n.table.rowManager.getTableElement().removeChild(o)),n.count=n.table.options.paginationButtonCount,n.generatePageSizeSelectList()},B.prototype.initializeProgressive=function(e){this.initialize(!0),this.mode="progressive_"+e,this.progressiveLoad=!0},B.prototype.setDisplayIndex=function(e){this.displayIndex=e},B.prototype.getDisplayIndex=function(){return this.displayIndex},B.prototype.setMaxRows=function(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)},B.prototype.reset=function(e,t){return("local"==this.mode||e)&&(this.page=1),t&&(this.initialLoad=!0),!0},B.prototype.setMaxPage=function(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())},B.prototype.setPage=function(e){var t=this,o=this;switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return new Promise((function(i,n){(e=parseInt(e))>0&&e<=t.max?(t.page=e,t.trigger().then((function(){i()})).catch((function(){n()})),o.table.options.persistence&&o.table.modExists("persistence",!0)&&o.table.modules.persistence.config.page&&o.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+t.max+":",e),n())}))},B.prototype.setPageToRow=function(e){var t=this;return new Promise((function(o,i){var n=t.table.rowManager.getDisplayRows(t.displayIndex-1).indexOf(e);if(n>-1){var r=!0===t.size?1:Math.ceil((n+1)/t.size);t.setPage(r).then((function(){o()})).catch((function(){i()}))}else console.warn("Pagination Error - Requested row is not visible"),i()}))},B.prototype.setPageSize=function(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},B.prototype._setPageButtons=function(){for(var e=Math.floor((this.count-1)/2),t=Math.ceil((this.count-1)/2),o=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),i=this.page<=t?Math.min(this.count,this.max):Math.min(this.page+t,this.max);this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(var n=o;n<=i;n++)n>0&&n<=this.max&&this.pagesElement.appendChild(this._generatePageButton(n));this.footerRedraw()},B.prototype._generatePageButton=function(e){var t=this,o=document.createElement("button");return o.classList.add("tabulator-page"),e==t.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),t.table.modules.localize.bind("pagination|page_title",(function(t){o.setAttribute("aria-label",t+" "+e),o.setAttribute("title",t+" "+e)})),o.setAttribute("data-page",e),o.textContent=e,o.addEventListener("click",(function(o){t.setPage(e)})),o},B.prototype.previousPage=function(){var e=this;return new Promise((function(t,o){e.page>1?(e.page--,e.trigger().then((function(){t()})).catch((function(){o()})),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),o())}))},B.prototype.nextPage=function(){var e=this;return new Promise((function(t,o){e.page<e.max?(e.page++,e.trigger().then((function(){t()})).catch((function(){o()})),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(e.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+e.max+":",e.max+1),o())}))},B.prototype.getPage=function(){return this.page},B.prototype.getPageMax=function(){return this.max},B.prototype.getPageSize=function(e){return this.size},B.prototype.getMode=function(){return this.mode},B.prototype.getRows=function(e){var t,o,i;if("local"==this.mode){t=[],!0===this.size?(o=0,i=e.length-1):i=(o=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var n=o;n<i;n++)e[n]&&t.push(e[n]);return t}return this._setPageButtons(),e.slice(0)},B.prototype.trigger=function(){var e,t=this;return new Promise((function(o,i){switch(t.mode){case"local":e=t.table.rowManager.scrollLeft,t.table.rowManager.refreshActiveData("page"),t.table.rowManager.scrollHorizontal(e),t.table.options.pageLoaded.call(t.table,t.getPage()),o();break;case"remote":case"progressive_load":case"progressive_scroll":t.table.modules.ajax.blockActiveRequest(),t._getRemotePage().then((function(){o()})).catch((function(){i()}));break;default:console.warn("Pagination Error - no such pagination mode:",t.mode),i()}}))},B.prototype._getRemotePage=function(){var e,t,o=this,i=this;return new Promise((function(n,r){if(i.table.modExists("ajax",!0)||r(),e=h.prototype.helpers.deepClone(i.table.modules.ajax.getParams()||{}),(t=i.table.modules.ajax.getParams())[o.dataSentNames.page]=i.page,o.size&&(t[o.dataSentNames.size]=o.size),o.table.options.ajaxSorting&&o.table.modExists("sort")){var s=i.table.modules.sort.getSort();s.forEach((function(e){delete e.column})),t[o.dataSentNames.sorters]=s}if(o.table.options.ajaxFiltering&&o.table.modExists("filter")){var a=i.table.modules.filter.getFilters(!0,!0);t[o.dataSentNames.filters]=a}i.table.modules.ajax.setParams(t),i.table.modules.ajax.sendRequest(o.progressiveLoad).then((function(e){i._parseRemoteData(e),n()})).catch((function(e){r()})),i.table.modules.ajax.setParams(e)}))},B.prototype._parseRemoteData=function(e){var t,o,i=this;if(void 0===e[this.dataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e[this.dataReceivedNames.data]){if(this.max=parseInt(e[this.dataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page):this.table.rowManager.addRows(e[this.dataReceivedNames.data]),this.page<this.max&&setTimeout((function(){i.nextPage().then((function(){})).catch((function(){}))}),i.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e[this.dataReceivedNames.data]),this.table.rowManager.setData(e,!0,this.initialLoad&&1==this.page),o=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,i.table.rowManager.element.scrollHeight<=i.table.rowManager.element.clientHeight+o&&i.nextPage().then((function(){})).catch((function(){}))}else t=this.table.rowManager.scrollLeft,this.table.rowManager.setData(e[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page),this.table.rowManager.scrollHorizontal(t),this.table.columnManager.scrollHorizontal(t),this.table.options.pageLoaded.call(this.table,this.getPage());this.initialLoad=!1}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")},B.prototype.footerRedraw=function(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))},B.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},B.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},h.prototype.registerModule("page",B);var I=function(e){this.table=e,this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1};I.prototype.localStorageTest=function(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}},I.prototype.initialize=function(){var e,t=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==t?t:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(e=this.retreiveData("page"))&&(void 0===e.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=e.paginationSize),void 0===e.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=e.paginationInitialPage)),this.config.group&&(e=this.retreiveData("group"))&&(void 0===e.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=e.groupBy),void 0===e.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=e.groupStartOpen),void 0===e.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=e.groupHeader))},I.prototype.initializeColumn=function(e){var t,o=this;this.config.columns&&(this.defWatcherBlock=!0,t=e.getDefinition(),(!0===this.config.columns?Object.keys(t):this.config.columns).forEach((function(e){var i=Object.getOwnPropertyDescriptor(t,e),n=t[e];i&&Object.defineProperty(t,e,{set:function(e){n=e,o.defWatcherBlock||o.save("columns"),i.set&&i.set(e)},get:function(){return i.get&&i.get(),n}})})),this.defWatcherBlock=!1)},I.prototype.load=function(e,t){var o=this.retreiveData(e);return t&&(o=o?this.mergeDefinition(t,o):t),o},I.prototype.retreiveData=function(e){return!!this.readFunc&&this.readFunc(this.id,e)},I.prototype.mergeDefinition=function(e,t){var o=this,i=[];return(t=t||[]).forEach((function(t,n){var r,s=o._findColumn(e,t);s&&(!0===o.config.columns||null==o.config.columns?(r=Object.keys(s)).push("width"):r=o.config.columns,r.forEach((function(e){void 0!==t[e]&&(s[e]=t[e])})),s.columns&&(s.columns=o.mergeDefinition(s.columns,t.columns)),i.push(s))})),e.forEach((function(e,n){o._findColumn(t,e)||(i.length>n?i.splice(n,0,e):i.push(e))})),i},I.prototype._findColumn=function(e,t){var o=t.columns?"group":t.field?"field":"object";return e.find((function(e){switch(o){case"group":return e.title===t.title&&e.columns.length===t.columns.length;case"field":return e.field===t.field;case"object":return e===t}}))},I.prototype.save=function(e){var t={};switch(e){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,t)},I.prototype.validateSorters=function(e){return e.forEach((function(e){e.column=e.field,delete e.field})),e},I.prototype.getGroupConfig=function(){return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(data.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(data.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(data.groupHeader=this.table.options.groupHeader)),data},I.prototype.getPageConfig=function(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e},I.prototype.parseColumns=function(e){var t=this,o=[];return e.forEach((function(e){var i,n={},r=e.getDefinition();e.isGroup?(n.title=r.title,n.columns=t.parseColumns(e.getColumns())):(n.field=e.getField(),!0===t.config.columns||null==t.config.columns?(i=Object.keys(r)).push("width"):i=t.config.columns,i.forEach((function(t){switch(t){case"width":n.width=e.getWidth();break;case"visible":n.visible=e.visible;break;default:n[t]=r[t]}}))),o.push(n)})),o},I.prototype.readers={local:function(e,t){var o=localStorage.getItem(e+"-"+t);return!!o&&JSON.parse(o)},cookie:function(e,t){var o,i,n=document.cookie,r=e+"-"+t,s=n.indexOf(r+"=");return s>-1&&(n=n.substr(s),(o=n.indexOf(";"))>-1&&(n=n.substr(0,o)),i=n.replace(r+"=","")),!!i&&JSON.parse(i)}},I.prototype.writers={local:function(e,t,o){localStorage.setItem(e+"-"+t,JSON.stringify(o))},cookie:function(e,t,o){var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=e+"-"+t+"="+JSON.stringify(o)+"; expires="+i.toUTCString()}},h.prototype.registerModule("persistence",I);var V=function(e){this.table=e,this.element=!1,this.manualBlock=!1};V.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))},V.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},V.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},V.prototype.printFullscreen=function(e,t,o){var i,n,r=window.scrollX,s=window.scrollY,a=document.createElement("div"),l=document.createElement("div"),c=this.table.modules.export.genereateTable(void 0!==o?o:this.table.options.printConfig,void 0!==t?t:this.table.options.printStyled,e,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(a.classList.add("tabulator-print-header"),"string"==typeof(i="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?a.innerHTML=i:a.appendChild(i),this.element.appendChild(a)),this.element.appendChild(c),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(n="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=n:l.appendChild(n),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,c),window.print(),this.cleanup(),window.scrollTo(r,s),this.manualBlock=!1},h.prototype.registerModule("print",V);var W=function(e){this.table=e,this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0};W.prototype.watchData=function(e){var t,o=this;this.currentVersion++,t=this.currentVersion,o.unwatchData(),o.data=e,o.origFuncs.push=e.push,Object.defineProperty(o.data,"push",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments);return o.blocked||t!==o.currentVersion||i.forEach((function(e){o.table.rowManager.addRowActual(e,!1)})),o.origFuncs.push.apply(e,arguments)}}),o.origFuncs.unshift=e.unshift,Object.defineProperty(o.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments);return o.blocked||t!==o.currentVersion||i.forEach((function(e){o.table.rowManager.addRowActual(e,!0)})),o.origFuncs.unshift.apply(e,arguments)}}),o.origFuncs.shift=e.shift,Object.defineProperty(o.data,"shift",{enumerable:!1,configurable:!0,value:function(){var i;return o.blocked||t!==o.currentVersion||o.data.length&&(i=o.table.rowManager.getRowFromDataObject(o.data[0]))&&i.deleteActual(),o.origFuncs.shift.call(e)}}),o.origFuncs.pop=e.pop,Object.defineProperty(o.data,"pop",{enumerable:!1,configurable:!0,value:function(){var i;return o.blocked||t!==o.currentVersion||o.data.length&&(i=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&i.deleteActual(),o.origFuncs.pop.call(e)}}),o.origFuncs.splice=e.splice,Object.defineProperty(o.data,"splice",{enumerable:!1,configurable:!0,value:function(){var i,n=Array.from(arguments),r=n[0]<0?e.length+n[0]:n[0],s=n[1],a=!!n[2]&&n.slice(2);if(!o.blocked&&t===o.currentVersion){if(a&&((i=!!e[r]&&o.table.rowManager.getRowFromDataObject(e[r]))?a.forEach((function(e){o.table.rowManager.addRowActual(e,!0,i,!0)})):(a=a.slice().reverse()).forEach((function(e){o.table.rowManager.addRowActual(e,!0,!1,!0)}))),0!==s){var l=e.slice(r,void 0===n[1]?n[1]:r+s);l.forEach((function(e,t){var i=o.table.rowManager.getRowFromDataObject(e);i&&i.deleteActual(t!==l.length-1)}))}(a||0!==s)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(e,arguments)}})},W.prototype.unwatchData=function(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},W.prototype.watchRow=function(e){var t=e.getData();for(var o in this.blocked=!0,t)this.watchKey(e,t,o);this.blocked=!1},W.prototype.watchKey=function(e,t,o){var i=this,n=Object.getOwnPropertyDescriptor(t,o),r=t[o],s=this.currentVersion;Object.defineProperty(t,o,{set:function(t){if(r=t,!i.blocked&&s===i.currentVersion){var a={};a[o]=t,e.updateData(a)}n.set&&n.set(t)},get:function(){return n.get&&n.get(),r}})},W.prototype.unwatchRow=function(e){var t=e.getData();for(var o in t)Object.defineProperty(t,o,{value:t[o]})},W.prototype.block=function(){this.blocked=!0},W.prototype.unblock=function(){this.blocked=!1},h.prototype.registerModule("reactiveData",W);var U=function(e){this.table=e,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};U.prototype.initializeColumn=function(e,t,o){var i=this,n=!1,r=this.table.options.resizableColumns;if("header"===e&&(n="textarea"==t.definition.formatter||t.definition.variableHeight,t.modules.resize={variableHeight:n}),!0===r||r==e){var s=document.createElement("div");s.className="tabulator-col-resize-handle";var a=document.createElement("div");a.className="tabulator-col-resize-handle prev",s.addEventListener("click",(function(e){e.stopPropagation()}));var l=function(e){var o=t.getLastColumn();o&&i._checkResizability(o)&&(i.startColumn=t,i._mouseDown(e,o,s))};s.addEventListener("mousedown",l),s.addEventListener("touchstart",l,{passive:!0}),s.addEventListener("dblclick",(function(e){var o=t.getLastColumn();o&&i._checkResizability(o)&&(e.stopPropagation(),o.reinitializeWidth(!0))})),a.addEventListener("click",(function(e){e.stopPropagation()}));var c=function(e){var o,n,r;(o=t.getFirstColumn())&&(r=(n=i.table.columnManager.findColumnIndex(o))>0&&i.table.columnManager.getColumnByIndex(n-1))&&i._checkResizability(r)&&(i.startColumn=t,i._mouseDown(e,r,a))};a.addEventListener("mousedown",c),a.addEventListener("touchstart",c,{passive:!0}),a.addEventListener("dblclick",(function(e){var o,n,r;(o=t.getFirstColumn())&&(r=(n=i.table.columnManager.findColumnIndex(o))>0&&i.table.columnManager.getColumnByIndex(n-1))&&i._checkResizability(r)&&(e.stopPropagation(),r.reinitializeWidth(!0))})),o.appendChild(s),o.appendChild(a)}},U.prototype._checkResizability=function(e){return void 0!==e.definition.resizable?e.definition.resizable:this.table.options.resizableColumns},U.prototype._mouseDown=function(e,t,o){var i=this;function n(e){t.setWidth(i.startWidth+((void 0===e.screenX?e.touches[0].screenX:e.screenX)-i.startX)),!i.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights()}function r(e){i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!1),i.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights(),document.body.removeEventListener("mouseup",r),document.body.removeEventListener("mousemove",n),o.removeEventListener("touchmove",n),o.removeEventListener("touchend",r),i.table.element.classList.remove("tabulator-block-select"),i.table.options.persistence&&i.table.modExists("persistence",!0)&&i.table.modules.persistence.config.columns&&i.table.modules.persistence.save("columns"),i.table.options.columnResized.call(i.table,t.getComponent())}i.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!0),i.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,i.startWidth=t.getWidth(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",r),o.addEventListener("touchmove",n,{passive:!0}),o.addEventListener("touchend",r)},h.prototype.registerModule("resizeColumns",U);var G=function(e){this.table=e,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null};G.prototype.initializeRow=function(e){var t=this,o=e.getElement(),i=document.createElement("div");i.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev",i.addEventListener("click",(function(e){e.stopPropagation()}));var r=function(o){t.startRow=e,t._mouseDown(o,e,i)};i.addEventListener("mousedown",r),i.addEventListener("touchstart",r,{passive:!0}),n.addEventListener("click",(function(e){e.stopPropagation()}));var s=function(o){var i=t.table.rowManager.prevDisplayRow(e);i&&(t.startRow=i,t._mouseDown(o,i,n))};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s,{passive:!0}),o.appendChild(i),o.appendChild(n)},G.prototype._mouseDown=function(e,t,o){var i=this;function n(e){t.setHeight(i.startHeight+((void 0===e.screenY?e.touches[0].screenY:e.screenY)-i.startY))}function r(e){document.body.removeEventListener("mouseup",n),document.body.removeEventListener("mousemove",n),o.removeEventListener("touchmove",n),o.removeEventListener("touchend",r),i.table.element.classList.remove("tabulator-block-select"),i.table.options.rowResized.call(this.table,t.getComponent())}i.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),i.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,i.startHeight=t.getHeight(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",r),o.addEventListener("touchmove",n,{passive:!0}),o.addEventListener("touchend",r)},h.prototype.registerModule("resizeRows",G);var $=function(e){this.table=e,this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1};$.prototype.initialize=function(e){var t,o=this,i=this.table;this.tableHeight=i.element.clientHeight,this.tableWidth=i.element.clientWidth,i.element.parentNode&&(this.containerHeight=i.element.parentNode.clientHeight,this.containerWidth=i.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===i.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver((function(e){if(!i.browserMobile||i.browserMobile&&!i.modules.edit.currentCell){var t=Math.floor(e[0].contentRect.height),n=Math.floor(e[0].contentRect.width);o.tableHeight==t&&o.tableWidth==n||(o.tableHeight=t,o.tableWidth=n,i.element.parentNode&&(o.containerHeight=i.element.parentNode.clientHeight,o.containerWidth=i.element.parentNode.clientWidth),i.redraw())}})),this.observer.observe(i.element),t=window.getComputedStyle(i.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(t.getPropertyValue("max-height")||t.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver((function(e){if(!i.browserMobile||i.browserMobile&&!i.modules.edit.currentCell){var t=Math.floor(e[0].contentRect.height),n=Math.floor(e[0].contentRect.width);o.containerHeight==t&&o.containerWidth==n||(o.containerHeight=t,o.containerWidth=n,o.tableHeight=i.element.clientHeight,o.tableWidth=i.element.clientWidth,i.redraw()),i.redraw()}})),this.containerObserver.observe(this.table.element.parentNode))):(this.binding=function(){(!i.browserMobile||i.browserMobile&&!i.modules.edit.currentCell)&&i.redraw()},window.addEventListener("resize",this.binding))},$.prototype.clearBindings=function(e){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)},h.prototype.registerModule("resizeTable",$);var q=function(e){this.table=e,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1};q.prototype.initialize=function(){var e=this,t=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach((function(o,i){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=i,t.push(o),o.visible||"collapse"!==e.mode||e.hiddenColumns.push(o))})),t=(t=t.reverse()).sort((function(e,t){return t.modules.responsive.order-e.modules.responsive.order||t.modules.responsive.index-e.modules.responsive.index})),this.columns=t,"collapse"===this.mode&&this.generateCollapsedContent();var o=this.table.columnManager.columnsByIndex,i=Array.isArray(o),n=0;for(o=i?o:o[Symbol.iterator]();;){var r;if(i){if(n>=o.length)break;r=o[n++]}else{if((n=o.next()).done)break;r=n.value}var s=r;if("responsiveCollapse"==s.definition.formatter){this.collapseHandleColumn=s;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},q.prototype.initializeColumn=function(e){var t=e.getDefinition();e.modules.responsive={order:void 0===t.responsive?1:t.responsive,visible:!1!==t.visible}},q.prototype.initializeRow=function(e){var t;"calc"!==e.type&&((t=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:t,open:this.collapseStartOpen},this.collapseStartOpen||(t.style.display="none"))},q.prototype.layoutRow=function(e){var t=e.getElement();e.modules.responsiveLayout&&(t.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))},q.prototype.updateColumnVisibility=function(e,t){e.modules.responsive&&(e.modules.responsive.visible=t,this.initialize())},q.prototype.hideColumn=function(e){var t=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!t&&this.collapseHandleColumn.show())},q.prototype.showColumn=function(e){var t;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((t=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(t,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},q.prototype.update=function(){for(var e=!0;e;){var t="fitColumns"==this.table.modules.layout.getMode()?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),o=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-t;if(o<0){var i=this.columns[this.index];i?(this.hideColumn(i),this.index++):e=!1}else{var n=this.columns[this.index-1];n&&o>0&&o>=n.getWidth()?(this.showColumn(n),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}},q.prototype.generateCollapsedContent=function(){var e=this;this.table.rowManager.getDisplayRows().forEach((function(t){e.generateCollapsedRowContent(t)}))},q.prototype.generateCollapsedRowContent=function(e){var t,o;if(e.modules.responsiveLayout){for(t=e.modules.responsiveLayout.element;t.firstChild;)t.removeChild(t.firstChild);(o=this.collapseFormatter(this.generateCollapsedRowData(e)))&&t.appendChild(o)}},q.prototype.generateCollapsedRowData=function(e){var t,o=this,i=e.getData(),n=[];return this.hiddenColumns.forEach((function(r){var s=r.getFieldValue(i);r.definition.title&&r.field&&(r.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(t={value:!1,data:{},getValue:function(){return s},getData:function(){return i},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return r.getComponent()}},n.push({title:r.definition.title,value:r.modules.format.formatter.call(o.table.modules.format,t,r.modules.format.params)})):n.push({title:r.definition.title,value:s}))})),n},q.prototype.formatCollapsedData=function(e){var t=document.createElement("table"),o="";return e.forEach((function(e){var t=document.createElement("div");e.value instanceof Node&&(t.appendChild(e.value),e.value=t.innerHTML),o+="<tr><td><strong>"+e.title+"</strong></td><td>"+e.value+"</td></tr>"})),t.innerHTML=o,Object.keys(e).length?t:""},h.prototype.registerModule("responsiveLayout",q);var Y=function(e){this.table=e,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null};Y.prototype.clearSelectionData=function(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],e||this._rowSelectionChanged()},Y.prototype.initializeRow=function(e){var t=this,o=e.getElement(),i=function e(){setTimeout((function(){t.selecting=!1}),50),document.body.removeEventListener("mouseup",e)};e.modules.select={selected:!1},t.table.options.selectableCheck.call(this.table,e.getComponent())?(o.classList.add("tabulator-selectable"),o.classList.remove("tabulator-unselectable"),t.table.options.selectable&&"highlight"!=t.table.options.selectable&&("click"===t.table.options.selectableRangeMode?o.addEventListener("click",(function(o){if(o.shiftKey){t.table._clearSelection(),t.lastClickedRow=t.lastClickedRow||e;var i=t.table.rowManager.getDisplayRowIndex(t.lastClickedRow),n=t.table.rowManager.getDisplayRowIndex(e),r=i<=n?i:n,s=i>=n?i:n,a=t.table.rowManager.getDisplayRows().slice(0).splice(r,s-r+1);o.ctrlKey||o.metaKey?(a.forEach((function(o){o!==t.lastClickedRow&&(!0===t.table.options.selectable||t.isRowSelected(e)||t.selectedRows.length<t.table.options.selectable)&&t.toggleRow(o)})),t.lastClickedRow=e):(t.deselectRows(void 0,!0),!0!==t.table.options.selectable&&a.length>t.table.options.selectable&&(a=a.slice(0,t.table.options.selectable)),t.selectRows(a)),t.table._clearSelection()}else o.ctrlKey||o.metaKey?(t.toggleRow(e),t.lastClickedRow=e):(t.deselectRows(void 0,!0),t.selectRows(e),t.lastClickedRow=e)})):(o.addEventListener("click",(function(o){t.table.modExists("edit")&&t.table.modules.edit.getCurrentCell()||t.table._clearSelection(),t.selecting||t.toggleRow(e)})),o.addEventListener("mousedown",(function(o){if(o.shiftKey)return t.table._clearSelection(),t.selecting=!0,t.selectPrev=[],document.body.addEventListener("mouseup",i),document.body.addEventListener("keyup",i),t.toggleRow(e),!1})),o.addEventListener("mouseenter",(function(o){t.selecting&&(t.table._clearSelection(),t.toggleRow(e),t.selectPrev[1]==e&&t.toggleRow(t.selectPrev[0]))})),o.addEventListener("mouseout",(function(o){t.selecting&&(t.table._clearSelection(),t.selectPrev.unshift(e))}))))):(o.classList.add("tabulator-unselectable"),o.classList.remove("tabulator-selectable"))},Y.prototype.toggleRow=function(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))},Y.prototype.selectRows=function(e){var t,o=this;switch(void 0===e?"undefined":n(e)){case"undefined":this.table.rowManager.rows.forEach((function(e){o._selectRow(e,!0,!0)})),this._rowSelectionChanged();break;case"string":(t=this.table.rowManager.findRow(e))?this._selectRow(t,!0,!0):this.table.rowManager.getRows(e).forEach((function(e){o._selectRow(e,!0,!0)})),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach((function(e){o._selectRow(e,!0,!0)})),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}},Y.prototype._selectRow=function(e,t,o){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!o&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var i=this.table.rowManager.findRow(e);i?-1==this.selectedRows.indexOf(i)&&(i.modules.select||(i.modules.select={}),i.modules.select.selected=!0,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!0),i.getElement().classList.add("tabulator-selected"),this.selectedRows.push(i),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!0),t||this.table.options.rowSelected.call(this.table,i.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Selection Error - No such row found, ignoring selection:"+e)},Y.prototype.isRowSelected=function(e){return-1!==this.selectedRows.indexOf(e)},Y.prototype.deselectRows=function(e,t){var o,i=this;if(void 0===e){o=i.selectedRows.length;for(var n=0;n<o;n++)i._deselectRow(i.selectedRows[0],!0);i._rowSelectionChanged(t)}else Array.isArray(e)?(e.forEach((function(e){i._deselectRow(e,!0)})),i._rowSelectionChanged(t)):i._deselectRow(e,t)},Y.prototype._deselectRow=function(e,t){var o,i=this.table.rowManager.findRow(e);i?(o=this.selectedRows.findIndex((function(e){return e==i})))>-1&&(i.modules.select||(i.modules.select={}),i.modules.select.selected=!1,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!1),i.getElement().classList.remove("tabulator-selected"),this.selectedRows.splice(o,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!1),t||this.table.options.rowDeselected.call(this.table,i.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Deselection Error - No such row found, ignoring selection:"+e)},Y.prototype.getSelectedData=function(){var e=[];return this.selectedRows.forEach((function(t){e.push(t.getData())})),e},Y.prototype.getSelectedRows=function(){var e=[];return this.selectedRows.forEach((function(t){e.push(t.getComponent())})),e},Y.prototype._rowSelectionChanged=function(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},Y.prototype.registerRowSelectCheckbox=function(e,t){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=t},Y.prototype.registerHeaderSelectCheckbox=function(e){this.headerCheckboxElement=e},Y.prototype.childRowSelection=function(e,t){var o=this.table.modules.dataTree.getChildren(e);if(t){var i=o,n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var a=s;this._selectRow(a,!0)}}else{var l=o,c=Array.isArray(l),u=0;for(l=c?l:l[Symbol.iterator]();;){var d;if(c){if(u>=l.length)break;d=l[u++]}else{if((u=l.next()).done)break;d=u.value}var h=d;this._deselectRow(h,!0)}}},h.prototype.registerModule("selectRow",Y);var K=function(e){this.table=e,this.sortList=[],this.changed=!1};K.prototype.initializeColumn=function(e,t){var o,i,r=this,s=!1;switch(n(e.definition.sorter)){case"string":r.sorters[e.definition.sorter]?s=r.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":s=e.definition.sorter}e.modules.sort={sorter:s,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:void 0!==e.definition.headerSortTristate?e.definition.headerSortTristate:this.table.options.headerSortTristate},(void 0===e.definition.headerSort?!1!==this.table.options.headerSort:!1!==e.definition.headerSort)&&((o=e.getElement()).classList.add("tabulator-sortable"),(i=document.createElement("div")).classList.add("tabulator-arrow"),t.appendChild(i),o.addEventListener("click",(function(t){var o="",i=[],n=!1;if(e.modules.sort){if(e.modules.sort.tristate)o="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":o="desc";break;case"desc":o="asc";break;default:o=e.modules.sort.startingDir}r.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?((n=(i=r.getSort()).findIndex((function(t){return t.field===e.getField()})))>-1?(i[n].dir=o,n!=i.length-1&&(n=i.splice(n,1)[0],"none"!=o&&i.push(n))):"none"!=o&&i.push({column:e,dir:o}),r.setSort(i)):"none"==o?r.clear():r.setSort(e,o),r.table.rowManager.sorterRefresh(!r.sortList.length)}})))},K.prototype.hasChanged=function(){var e=this.changed;return this.changed=!1,e},K.prototype.getSort=function(){var e=[];return this.sortList.forEach((function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})})),e},K.prototype.setSort=function(e,t){var o=this,i=[];Array.isArray(e)||(e=[{column:e,dir:t}]),e.forEach((function(e){var t;(t=o.table.columnManager.findColumn(e.column))?(e.column=t,i.push(e),o.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",e.column)})),o.sortList=i,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},K.prototype.clear=function(){this.setSort([])},K.prototype.findSorter=function(e){var t,o=this.table.rowManager.activeRows[0],i="string";if(o&&(o=o.getData(),e.getField()))switch(void 0===(t=e.getFieldValue(o))?"undefined":n(t)){case"undefined":i="string";break;case"boolean":i="boolean";break;default:isNaN(t)||""===t?t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum"):i="number"}return this.sorters[i]},K.prototype.sort=function(e){var t=this,o=this.table.options.sortOrderReverse?t.sortList.slice().reverse():t.sortList,i=[],n=[];t.table.options.dataSorting&&t.table.options.dataSorting.call(t.table,t.getSort()),t.clearColumnHeaders(),t.table.options.ajaxSorting?o.forEach((function(e,o){t.setColumnHeader(e.column,e.dir)})):(o.forEach((function(e,o){var n=e.column.modules.sort;e.column&&n&&(n.sorter||(n.sorter=t.findSorter(e.column)),e.params="function"==typeof n.params?n.params(e.column.getComponent(),e.dir):n.params,i.push(e)),t.setColumnHeader(e.column,e.dir)})),i.length&&t._sortItems(e,i)),t.table.options.dataSorted&&(e.forEach((function(e){n.push(e.getComponent())})),t.table.options.dataSorted.call(t.table,t.getSort(),n))},K.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach((function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))}))},K.prototype.setColumnHeader=function(e,t){e.modules.sort.dir=t,e.getElement().setAttribute("aria-sort",t)},K.prototype._sortItems=function(e,t){var o=this,i=t.length-1;e.sort((function(e,n){for(var r,s=i;s>=0;s--){var a=t[s];if(0!==(r=o._sortRow(e,n,a.column,a.dir,a.params)))break}return r}))},K.prototype._sortRow=function(e,t,o,i,n){var r,s,a="asc"==i?e:t,l="asc"==i?t:e;return e=void 0!==(e=o.getFieldValue(a.getData()))?e:"",t=void 0!==(t=o.getFieldValue(l.getData()))?t:"",r=a.getComponent(),s=l.getComponent(),o.modules.sort.sorter.call(this,e,t,r,s,o.getComponent(),i,n)},K.prototype.sorters={number:function(e,t,o,i,n,r,s){var a=s.alignEmptyValues,l=s.decimalSeparator||".",c=s.thousandSeparator||",",u=0;if(e=parseFloat(String(e).split(c).join("").split(l).join(".")),t=parseFloat(String(t).split(c).join("").split(l).join(".")),isNaN(e))u=isNaN(t)?0:-1;else{if(!isNaN(t))return e-t;u=1}return("top"===a&&"desc"===r||"bottom"===a&&"asc"===r)&&(u*=-1),u},string:function(e,t,o,i,r,s,a){var l,c=a.alignEmptyValues,u=0;if(e){if(t){switch(n(a.locale)){case"boolean":a.locale&&(l=this.table.modules.localize.getLocale());break;case"string":l=a.locale}return String(e).toLowerCase().localeCompare(String(t).toLowerCase(),l)}u=1}else u=t?-1:0;return("top"===c&&"desc"===s||"bottom"===c&&"asc"===s)&&(u*=-1),u},date:function(e,t,o,i,n,r,s){return s.format||(s.format="DD/MM/YYYY"),this.sorters.datetime.call(this,e,t,o,i,n,r,s)},time:function(e,t,o,i,n,r,s){return s.format||(s.format="HH:mm"),this.sorters.datetime.call(this,e,t,o,i,n,r,s)},datetime:function(e,t,o,i,n,r,s){var a=s.format||"DD/MM/YYYY HH:mm:ss",l=s.alignEmptyValues,c=0;if("undefined"!=typeof moment){if(e=moment(e,a),t=moment(t,a),e.isValid()){if(t.isValid())return e-t;c=1}else c=t.isValid()?-1:0;return("top"===l&&"desc"===r||"bottom"===l&&"asc"===r)&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(e,t,o,i,n,r,s){return(!0===e||"true"===e||"True"===e||1===e?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(e,t,o,i,n,r,s){var a=s.type||"length",l=s.alignEmptyValues,c=0;function u(e){switch(a){case"length":return e.length;case"sum":return e.reduce((function(e,t){return e+t}));case"max":return Math.max.apply(null,e);case"min":return Math.min.apply(null,e);case"avg":return e.reduce((function(e,t){return e+t}))/e.length}}if(Array.isArray(e)){if(Array.isArray(t))return(e?u(e):0)-(t?u(t):0);l=1}else l=Array.isArray(t)?-1:0;return("top"===l&&"desc"===r||"bottom"===l&&"asc"===r)&&(c*=-1),c},exists:function(e,t,o,i,n,r,s){return(void 0===e?0:1)-(void 0===t?0:1)},alphanum:function(e,t,o,i,n,r,s){var a,l,c,u,d,h=0,p=/(\d+)|(\D+)/g,f=/\d/,m=s.alignEmptyValues,g=0;if(e||0===e){if(t||0===t){if(isFinite(e)&&isFinite(t))return e-t;if((a=String(e).toLowerCase())===(l=String(t).toLowerCase()))return 0;if(!f.test(a)||!f.test(l))return a>l?1:-1;for(a=a.match(p),l=l.match(p),d=a.length>l.length?l.length:a.length;h<d;)if((c=a[h])!==(u=l[h++]))return isFinite(c)&&isFinite(u)?("0"===c.charAt(0)&&(c="."+c),"0"===u.charAt(0)&&(u="."+u),c-u):c>u?1:-1;return a.length>l.length}g=1}else g=t||0===t?-1:0;return("top"===m&&"desc"===r||"bottom"===m&&"asc"===r)&&(g*=-1),g}},h.prototype.registerModule("sort",K);var X=function(e){this.table=e,this.invalidCells=[]};return X.prototype.initializeColumn=function(e){var t,o=this,i=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach((function(e){(t=o._extractValidator(e))&&i.push(t)})):(t=this._extractValidator(e.definition.validator))&&i.push(t),e.modules.validate=!!i.length&&i)},X.prototype._extractValidator=function(e){var t,o,i;switch(void 0===e?"undefined":n(e)){case"string":return(i=e.indexOf(":"))>-1?(t=e.substring(0,i),o=e.substring(i+1)):t=e,this._buildValidator(t,o);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}},X.prototype._buildValidator=function(e,t){var o="function"==typeof e?e:this.validators[e];return o?{type:"function"==typeof e?"function":e,func:o,params:t}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)},X.prototype.validate=function(e,t,o){var i=this,n=[],r=this.invalidCells.indexOf(t);return e&&e.forEach((function(e){e.func.call(i,t.getComponent(),o,e.params)||n.push({type:e.type,parameters:e.params})})),n=!n.length||n,t.modules.validate||(t.modules.validate={}),!0===n?(t.modules.validate.invalid=!1,t.getElement().classList.remove("tabulator-validation-fail"),r>-1&&this.invalidCells.splice(r,1)):(t.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&t.getElement().classList.add("tabulator-validation-fail"),-1==r&&this.invalidCells.push(t)),n},X.prototype.getInvalidCells=function(){var e=[];return this.invalidCells.forEach((function(t){e.push(t.getComponent())})),e},X.prototype.clearValidation=function(e){var t;e.modules.validate&&e.modules.validate.invalid&&(e.element.classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(t=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(t,1))},X.prototype.validators={integer:function(e,t,o){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(e,t,o){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(e,t,o){return""===t||null==t||!isNaN(t)},string:function(e,t,o){return""===t||null==t||isNaN(t)},max:function(e,t,o){return""===t||null==t||parseFloat(t)<=o},min:function(e,t,o){return""===t||null==t||parseFloat(t)>=o},starts:function(e,t,o){return""===t||null==t||String(t).toLowerCase().startsWith(String(o).toLowerCase())},ends:function(e,t,o){return""===t||null==t||String(t).toLowerCase().endsWith(String(o).toLowerCase())},minLength:function(e,t,o){return""===t||null==t||String(t).length>=o},maxLength:function(e,t,o){return""===t||null==t||String(t).length<=o},in:function(e,t,o){return""===t||null==t||("string"==typeof o&&(o=o.split("|")),""===t||o.indexOf(t)>-1)},regex:function(e,t,o){return""===t||null==t||new RegExp(o).test(t)},unique:function(e,t,o){if(""===t||null==t)return!0;var i=!0,n=e.getData(),r=e.getColumn()._getSelf();return this.table.rowManager.rows.forEach((function(e){var o=e.getData();o!==n&&t==r.getFieldValue(o)&&(i=!1)})),i},required:function(e,t,o){return""!==t&&null!=t}},h.prototype.registerModule("validate",X),h}))}));function Bt(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function It(e){return function(e){if(Array.isArray(e))return Vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Vt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var Wt,Ut,Gt,$t,qt,Yt=(Wt=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Ut=function(){function e(t){var o=t.targetModal,i=t.triggers,n=void 0===i?[]:i,r=t.onShow,s=void 0===r?function(){}:r,a=t.onClose,l=void 0===a?function(){}:a,c=t.openTrigger,u=void 0===c?"data-micromodal-trigger":c,d=t.closeTrigger,h=void 0===d?"data-micromodal-close":d,p=t.openClass,f=void 0===p?"is-open":p,m=t.disableScroll,g=void 0!==m&&m,b=t.disableFocus,v=void 0!==b&&b,y=t.awaitCloseAnimation,w=void 0!==y&&y,E=t.awaitOpenAnimation,x=void 0!==E&&E,C=t.debugMode,R=void 0!==C&&C;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=this.modal="string"==typeof o?document.getElementById(o):o,this.config={debugMode:R,disableScroll:g,openTrigger:u,closeTrigger:h,openClass:f,onShow:s,onClose:l,awaitCloseAnimation:w,awaitOpenAnimation:x,disableFocus:v},n.length>0&&this.registerTriggers.apply(this,It(n)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t,o,i;return t=e,(o=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];o.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var o=function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener("animationend",o,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(e)}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(Wt);return Array.apply(void 0,It(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&Bt(t.prototype,o),i&&Bt(t,i),e}(),Gt=null,$t=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},qt=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var o in t)$t(o);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),o=It(document.querySelectorAll("[".concat(t.openTrigger,"]"))),i=function(e,t){var o=[];return e.forEach((function(e){var i=e.attributes[t].value;void 0===o[i]&&(o[i]=[]),o[i].push(e)})),o}(o,t.openTrigger);if(!0!==t.debugMode||!1!==qt(o,i))for(var n in i){var r=i[n];t.targetModal=n,t.triggers=It(r),Gt=new Ut(t)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===$t(e)||(Gt&&Gt.removeEventListeners(),(Gt=new Ut(o)).showModal())},close:function(e){e?Gt.closeModalById(e):Gt.closeModal()}});window.MicroModal=Yt;class Kt extends(mt(bt)){constructor(){super(),this.lang="de",this.authUrl="",this.webDavUrl="",this.nextcloudName="Nextcloud",this.loginWindow=null,this.isPickerActive=!1,this.statusText="",this.lastDirectoryPath="/",this.directoryPath="/",this.webDavClient=null,this.tabulatorTable=null,this.allowedMimeTypes="*/*",this.directoriesOnly=null,this.maxSelectedItems=!0,this.loading=!1,this._onReceiveWindowMessage=this.onReceiveWindowMessage.bind(this),this.folderIsSelected=U.t("nextcloud-file-picker.load-in-folder")}static get scopedElements(){return{"dbp-icon":Mt,"dbp-mini-spinner":Tt}}static get properties(){return{lang:{type:String},authUrl:{type:String,attribute:"auth-url"},webDavUrl:{type:String,attribute:"web-dav-url"},nextcloudName:{type:String,attribute:"nextcloud-name"},isPickerActive:{type:Boolean,attribute:!1},statusText:{type:String,attribute:!1},folderIsSelected:{type:String,attribute:!1},directoryPath:{type:String,attribute:!1},allowedMimeTypes:{type:String,attribute:"allowed-mime-types"},directoriesOnly:{type:Boolean,attribute:"directories-only"},maxSelectedItems:{type:Number,attribute:"max-selected-items"}}}update(e){e.forEach((e,t)=>{switch(t){case"lang":U.changeLanguage(this.lang)}}),super.update(e)}disconnectedCallback(){window.removeEventListener("message",this._onReceiveWindowMessage),super.disconnectedCallback()}connectedCallback(){super.connectedCallback();const e=this;this.updateComplete.then(()=>{window.addEventListener("message",this._onReceiveWindowMessage),this.tabulatorTable=new jt(this._("#directory-content-table"),{layout:"fitColumns",selectable:this.maxSelectedItems,selectableRangeMode:"drag",responsiveLayout:!0,placeholder:U.t("nextcloud-file-picker.no-data"),resizableColumns:!1,columns:[{title:"",field:"type",align:"center",headerSort:!1,width:50,responsive:1,formatter:(t,o,i)=>{const n=e.constructor.getScopedTagName("dbp-icon");let r=`<${n} name="empty-file"></${n}>`;return"directory"===t.getValue()?`<${n} name="folder"></${n}>`:r}},{title:U.t("nextcloud-file-picker.filename"),responsive:0,widthGrow:5,minWidth:150,field:"basename",sorter:"alphanum",formatter:e=>(e.getRow().getData().edit&&e.getElement().classList.add("fokus-edit"),e.getValue())},{title:U.t("nextcloud-file-picker.size"),responsive:4,widthGrow:1,minWidth:50,field:"size",formatter:(e,t,o)=>"directory"===e.getRow().getData().type?"":function(e,t=!1){const o=t?1e3:1024;if(Math.abs(e)<o)return e+" B";const i=["kB","MB","GB","TB","PB","EB","ZB","YB"];let n=-1;do{e/=o,++n}while(Math.abs(e)>=o&&n<i.length-1);return e.toFixed(1)+" "+i[n]}(e.getValue())},{title:U.t("nextcloud-file-picker.mime-type"),responsive:2,widthGrow:1,field:"mime",formatter:(e,t,o)=>{if(void 0===e.getValue())return"";const[i,n]=e.getValue().split("/");return n}},{title:U.t("nextcloud-file-picker.last-modified"),responsive:3,widthGrow:1,minWidth:100,field:"lastmod",sorter:(e,t,o,i,n,r,s)=>Date.parse(e)-Date.parse(t),formatter:function(e,t,o){const i=Date.parse(e.getValue()),n=new Date(i),r=n.getFullYear(),s=("0"+(n.getMonth()+1)).slice(-2);return("0"+n.getDate()).slice(-2)+"."+s+"."+r+" "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)}}],initialSort:[{column:"basename",dir:"asc"},{column:"type",dir:"asc"}],rowSelectionChanged:(e,t)=>{e.length>0&&this.directoriesOnly?this.folderIsSelected=U.t("nextcloud-file-picker.load-to-folder"):this.folderIsSelected=U.t("nextcloud-file-picker.load-in-folder")},rowClick:(e,t)=>{const o=t.getData();if(this.directoriesOnly);else switch(o.type){case"directory":this.directoryClicked(e,o)}},rowDblClick:(e,t)=>{if(this.directoriesOnly){const o=t.getData();this.directoryClicked(e,o),this.folderIsSelected=U.t("nextcloud-file-picker.load-in-folder")}}}),!1===this.tabulatorTable.browserMobile&&(this.tabulatorTable.options.selectableRangeMode="click"),void 0!==this.allowedMimeTypes&&this.tabulatorTable.setFilter((function(e,t){if(void 0===e.mime)return!0;const[o,i]=e.mime.split("/"),n=t.split(",");let r=!0;return n.forEach(e=>{const[t,n]=e.split("/");r=r&&("*"!==t&&t!==o||"*"!==n&&n!==i)}),!r}),this.allowedMimeTypes),void 0!==this.directoriesOnly&&this.directoriesOnly&&(console.log("filter "+this.directoriesOnly),this.tabulatorTable.setFilter([{field:"type",type:"=",value:"directory"}]))})}openFilePicker(){if(null===this.webDavClient){this.loading=!0,this.statusText=U.t("nextcloud-file-picker.auth-progress");const e=this.authUrl+"?target-origin="+encodeURIComponent(window.location.href);this.loginWindow=window.open(e,"Nextcloud Login","width=400,height=400,menubar=no,scrollbars=no,status=no,titlebar=no,toolbar=no")}else this.loadDirectory(this.directoryPath,this.webDavClient)}onReceiveWindowMessage(e){const t=e.data;if(console.log("data",t),"webapppassword"===t.type){null!==this.loginWindow&&this.loginWindow.close();const e=this.webDavUrl+"/"+t.loginName;console.log("url: ",this.webDavUrl),this.webDavClient=Nt.createClient(e,{username:t.loginName,password:t.token}),this.loadDirectory(this.directoryPath)}}loadDirectory(e){this.loading=!0,this.statusText=U.t("nextcloud-file-picker.loadpath-nextcloud-file-picker",{name:this.nextcloudName}),this.lastDirectoryPath=this.directoryPath,this.directoryPath=e,this.webDavClient.getDirectoryContents(e,{details:!0}).then(e=>{console.log("contents",e),this.loading=!1,this.statusText="",this.tabulatorTable.setData(e.data),this.isPickerActive=!0}).catch(t=>{console.error(t.message),"/"!=e?this.loadDirectory("/"):(this.loading=!1,this.statusText=t.message,this.isPickerActive=!1),this.webDavClient=null;let o=Me`<button class="button"
                            title="${U.t("nextcloud-file-picker.refresh-nextcloud-file-picker")}"
                            @click="${async()=>{this.openFilePicker()}}"><dbp-icon name="reload"></button>`;this.loading=!1,this.statusText=o})}directoryClicked(e,t){this.loadDirectory(t.filename),e.preventDefault()}downloadFiles(e){e.forEach(e=>this.downloadFile(e)),Yt.close()}downloadFile(e){this.loading=!0,this.statusText="Loading "+e.filename+"...",this.webDavClient.getFileContents(e.filename).then(t=>{const o=new File([t],e.basename,{type:e.mime});console.log("binaryFile",o);const i=new CustomEvent("dbp-nextcloud-file-picker-file-downloaded",{detail:{file:o,data:e},bubbles:!0,composed:!0});this.dispatchEvent(i),this.loading=!1,this.statusText=""}).catch(e=>{console.error(e.message),this.loading=!1,this.statusText=e.message})}sendDirectory(e){let t;t=e[0]?e[0].filename:this.directoryPath,this.loading=!0,this.statusText="Uploading to "+t+" ...";const o=new CustomEvent("dbp-nextcloud-file-picker-file-uploaded",{detail:t,bubbles:!0,composed:!0});this.dispatchEvent(o)}async uploadFiles(e,t){console.log("before all file finished");let o=!1,i=!0;return await(async()=>{for(let n=0;n<e.length;n++)if(o=await this.uploadFile(e[n],t),!1===o){i=!1;break}})(),console.log("all files finished",i),i}async uploadFile(e,t){console.log("before one file finished");let o=t+"/"+e.name,i=!1;try{await this.webDavClient.putFileContents(o,e,{overwrite:!1,onUploadProgress:e=>{console.log(`Uploaded ${e.loaded} bytes of ${e.total}`)}});this.loading=!1,this.statusText="",console.log("try finished"),i=!0}catch(e){console.error(e.message),this.loading=!1,this.statusText=e.message}return console.log("after one file finished"),i}addFolder(){if(""!==this._("#new-folder").value){let e=this.directoryPath+"/"+this._("#new-folder").value;this.webDavClient.createDirectory(e).then(e=>{this.loadDirectory(this.directoryPath)}).catch(e=>{this.loading=!1,this.statusText=U.t("nextcloud-file-picker.webdav-error")})}}getParentDirectoryPath(){let e=this.directoryPath.replace(/\/$/,"");return e=e.replace(e.split("/").pop(),"").replace(/\/$/,""),""===e?"/":e}getBreadcrumb(){let e=[];e[0]=Me`<a @click="${()=>{this.loadDirectory("/")}}" title="${U.t("nextcloud-file-picker.folder-home")}"><dbp-icon name="home"></dbp-icon> </a>`;const t=this.directoryPath.split("/");if(""===t[1])return e;for(let o=1;o<t.length;o++){let i="";for(let e=1;e<=o;e++)i+="/",i+=t[e];e[o]=Me` › <a @click="${()=>{this.loadDirectory(i)}}" title="${U.t("nextcloud-file-picker.load-path-link",{path:t[o]})}">${t[o]}</a>`}return e}getNextCloudLink(){return"https://cloud.tugraz.at/apps/files/?dir="+this.directoryPath}getCloudLogo(){let e=Me`<dbp-icon name="cloud" class="nextcloud-logo-icon"></dbp-icon>`;return"TU Graz cloud"===this.nextcloudName&&(e=Me`
            <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97.6 81.74">
                  <g>
                    <path d="M89.8,22.7a28.51,28.51,0,0,0-16.9-9.1,27.84,27.84,0,0,0-14.8-12A24,24,0,0,0,48.9,0,28.36,28.36,0,0,0,20.6,27.4,22.42,22.42,0,0,0,13,70.11v-6.3A16.7,16.7,0,0,1,5.5,50a17,17,0,0,1,17-17h3.6V28.5A23,23,0,0,1,49,5.6a19.75,19.75,0,0,1,7.2,1.2h.1A22.48,22.48,0,0,1,68.9,17.5l.6,1.3,1.4.2a23.07,23.07,0,0,1,14.9,7.5,23.85,23.85,0,0,1-1.23,33.74v7A29.56,29.56,0,0,0,89.8,22.7Z"/>
                    <g>
                      <path d="M16.39,71.61H36.65V51.36H16.39Z" style="fill: #e4154b"/>
                      <path d="M38.67,71.61H58.93V51.36H38.67Z" style="fill: #e4154b"/>
                      <path d="M61,71.61H81.21V51.36H61Z" style="fill: #e4154b"/>
                      <path d="M26.52,81.74H46.78V61.49H26.52Z" style="fill: #e4154b"/>
                      <path d="M50.83,61.49H71.08V41.23H50.83Z" style="fill: #e4154b"/>
                    </g>
                  </g>
            </svg>
        `),e}static get styles(){return Ie`
            ${At()}
            ${Dt()}
            ${Ie`
        .text-left {
            text-align: left;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .text-lowercase {
            text-transform: lowercase;
        }

        .text-uppercase {
            text-transform: uppercase;
        }

        .text-capitalize {
            text-transform: capitalize;
        }

      
    `}
            
            .block {
                margin-bottom: 10px;
            }
            
            .force-no-select{
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            .nextcloud-header{
                margin-bottom: 2rem;  
                display: inline-grid;
                width: 100%;
                grid-template-columns: auto auto;          
            }
            
            .nextcloud-header div button{
                justify-self: start;
            }
            
            .nextcloud-intro{
                text-align: center;
            }
            
            .nextcloud-logo{
                width: 80px;
                justify-self: end;  
                transition: all 0.5s ease;
                margin: auto;
            }
            
            .nextcloud-logo-icon{
                height: 100%;
            }
            
            .nextcloud-logo-sm{
                width: 40px;
                justify-self: inherit;  
                margin-right: 70px;
                display:none;
            }
            
            .m-inherit{
                margin: inherit;
            }
            
            .wrapper{
                width: 100%;
                height:100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                position: relative;
            }
            
            .wrapper-select{
                justify-content: inherit;
            }
            
            .select-button{
                justify-self: end;
            }
            
            .nextcloud-content{
                width: 100%;
                height: 100%;
                overflow-y: auto;
            }
            
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable .tabulator-col-title{
                padding-top: 4px;
                padding-bottom: 4px;
                font-weight: normal
            }
            
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="asc"] .tabulator-col-content .tabulator-arrow, 
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="none"] .tabulator-col-content .tabulator-arrow,
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="desc"] .tabulator-col-content .tabulator-arrow{
                padding-bottom: 6px;
            }
            
            .tabulator .tabulator-header, .tabulator .tabulator-header, .tabulator .tabulator-header .tabulator-col, .tabulator, .tabulator-row .tabulator-cell, .tabulator-row.tabulator-row-even,
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable:hover{
                background-color: unset;
                background: unset;
                color: unset;
                border: none;
            }
            
            .tabulator-row, .tabulator-row.tabulator-row-even{
                background-color: white;
            }
            
            .tabulator-row.tabulator-selected:hover, .tabulator-row.tabulator-selected{
                background-color: var(--dbp-dark);
                color: var(--dbp-light);
            }
            
            .tabulator-row.tabulator-selectable:hover{
                background-color: #eee;
                color: var(--dbp-dark);
            }
            
            .tabulator .tabulator-header .tabulator-col .tabulator-col-content{
                display: inline-flex;
            }
            
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="desc"] .tabulator-col-content .tabulator-arrow{
                top: 16px;
            }
            
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="asc"] .tabulator-col-content .tabulator-arrow{
                border-top: none;
                border-bottom: 4px solid #666;
            }
            
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="none"] .tabulator-col-content .tabulator-arrow{
                border-top: none;
                border-bottom: 4px solid #bbb;
            }
            
            .tabulator .tabulator-header .tabulator-col .tabulator-col-content .tabulator-arrow{
                border-left: 4px solid transparent;
                border-right: 4px solid transparent;
            }
            
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="desc"] .tabulator-col-content .tabulator-arrow,
            .tabulator .tabulator-header .tabulator-col.tabulator-sortable[aria-sort="desc"] .tabulator-col-content .tabulator-arrow{
                border-top: 4px solid #666;
                border-bottom: none;
            }
            
            .tabulator-row, .tabulator-row.tabulator-row-even{
                padding-top: 10px;
                padding-bottom: 10px;
                border-top: 1px solid #eee;
            }
            
            .tabulator-header{
                padding-top: 10px;
                padding-bottom: 10px;
            }
            
            .nextcloud-nav{
                display: flex;
                justify-content: space-between;
            }
            
            .nextcloud-footer{
                background-color: white;
                width: 100%;
                padding-top: 10px;
            }
            
            .nextcloud-footer-grid{
                width: 100%;
                display: flex;
                align-items: center;
                flex-direction: row-reverse;
                justify-content: space-between;
            }
            
            .tabulator .tabulator-tableHolder{
                overflow: hidden;
            }
            
            .tabulator .tabulator-tableHolder .tabulator-placeholder span{
                font-size: inherit;
                font-weight: inherit;
                color: inherit;
            }
            
            .add-folder{
                padding-top: 10px;
            }
            
            @media only screen
            and (orientation: portrait)
            and (max-device-width: 765px) {
            
                
                .nextcloud-nav h2 > a{
                    font-size: 1.3rem;
                }
                
                .nextcloud-nav a{
                    font-size: 0.9rem;
                }
                
                .nextcloud-logo-sm{
                    display: none;
                }
                
                .tabulator .tabulator-tableHolder{
                    white-space: inherit;
                }
                .button-wrapper{
                    justify-self: start;
                }
                
                .wrapper{
                    display: grid;
                    /*grid-template-areas: "header-l header-r" "content content";
                    grid-template-rows: 50px auto;
                    grid-template-columns: 50% 50%;*/
                    grid-template-rows: auto 50px;
                    grid-template-columns: 100%;
                    grid-template-areas: "content" "footer";
                }
                
                .nextcloud-header{
                    grid-area: header-l;
                    margin-bottom: 0px;
                }
                
                .nextcloud-content, .nextcloud-intro{
                    grid-area: content;
                }
                
                .nextcloud-intro{
                    /*grid-column-start: header-l-start;
                    grid-column-end: header-r-end;
                    grid-row-start: header-l-start;
                    grid-row-end: content-end;*/
                    grid-area: content;
                    text-align: center;
                }
                
                .nextcloud-footer{
                    /*grid-area: header-r;*/
                    padding-top: 0px;
                    grid-area: footer;
                }
                
                .info-box{
                    display: none;
                }
                
                .nextcloud-footer-grid{
                    display: flex;
                    justify-content: end;
                    
                    justify-content: center;
                }
                
                .select-button{
                    margin: 0px;
                }
                
                #new-folder{
                    width: 86%;
                }
                
            }

        `}render(){const e=yt("local/dbp-file-source/tabulator-tables/css/tabulator.min.css");return console.log("tabulatorCss",e),Me`
            <div class="wrapper">
                <link rel="stylesheet" href="${e}">
                <div class="nextcloud-intro">
                    <div class="nextcloud-logo ${Ht({"nextcloud-logo-sm":this.isPickerActive})}">
                             ${this.getCloudLogo()}
                        </div>
                    <div class="block text-center ${Ht({hidden:this.isPickerActive})}">
                        <h2 class="m-inherit">
                            ${this.nextcloudName}
                        </h2>
                        <p class="m-inherit">
                            ${U.t("nextcloud-file-picker.init-text-1",{name:this.nextcloudName})}   <br>           
                            ${U.t("nextcloud-file-picker.init-text-2")}              
                        </p>
                    </div>
                    <div class="block ${Ht({hidden:this.isPickerActive})}">
                        <button class="button  is-primary"
                                title="${U.t("nextcloud-file-picker.open-nextcloud-file-picker",{name:this.nextcloudName})}"
                                @click="${async()=>{this.openFilePicker()}}">${U.t("nextcloud-file-picker.connect-nextcloud",{name:this.nextcloudName})}</button>
                    </div>
                    <div class="block text-center m-inherit ${Ht({hidden:this.isPickerActive})}">
                    <p class="m-inherit">
                         ${U.t("nextcloud-file-picker.auth-info")}
                    </p>
                </div>
               </div>
                <div class="nextcloud-content ${Ht({hidden:!this.isPickerActive})}">
                    <div class="nextcloud-nav">
                        <h2>${this.getBreadcrumb()}</h2>
                        <div class="add-folder ${Ht({hidden:!this.directoriesOnly})}">
                            <input type="text" placeholder="${U.t("nextcloud-file-picker.new-folder-placeholder")}" name="new-folder" class="input" id="new-folder">
                            <button class="button"
                                    title="${U.t("nextcloud-file-picker.add-folder")}"
                                    @click="${()=>{this.addFolder()}}">
                                <dbp-icon name="plus" class="nextcloud-add-folder"></dbp-icon>
                            </button>
                        </div>
                    </div>
                    <table id="directory-content-table" class="force-no-select"></table>
                </div>
                 
                <div class="nextcloud-footer ${Ht({hidden:!this.isPickerActive})}">
                    <div class="nextcloud-footer-grid">
                        <button class="button select-button is-primary ${Ht({hidden:!this.directoriesOnly})}"
                                @click="${()=>{this.sendDirectory(this.tabulatorTable.getSelectedData())}}">${this.folderIsSelected}</button>
                        <button class="button select-button is-primary ${Ht({hidden:this.directoriesOnly})}"
                                @click="${()=>{this.downloadFiles(this.tabulatorTable.getSelectedData())}}">${U.t("nextcloud-file-picker.select-files")}</button>
                               
                                
                        <div class="block info-box ${Ht({hidden:""===this.statusText})}">
                            <dbp-mini-spinner style="font-size: 0.7em" class="${Ht({hidden:!1===this.loading})}"></dbp-mini-spinner>
                            ${this.statusText}
                        </div>
                       
                    </div>
                </div>
            </div>
        `}}class Xt extends(mt(bt)){constructor(){super(),this.context="",this.lang="de",this.nextcloudAuthUrl="",this.nextcloudName="Nextcloud",this.nextcloudWebDavUrl="",this.dropArea=null,this.allowedMimeTypes="*/*",this.enabledSources="local",this.text="",this.buttonLabel="",this.disabled=!1,this.decompressZip=!1,this._queueKey=0,this.activeSource="local",this.isDialogOpen=!1}static get scopedElements(){return{"dbp-icon":Mt,"dbp-mini-spinner":Tt,"dbp-nextcloud-file-picker":Kt}}static get properties(){return{context:{type:String,attribute:"context"},lang:{type:String},allowedMimeTypes:{type:String,attribute:"allowed-mime-types"},enabledSources:{type:String,attribute:"enabled-sources"},nextcloudAuthUrl:{type:String,attribute:"nextcloud-auth-url"},nextcloudWebDavUrl:{type:String,attribute:"nextcloud-web-dav-url"},nextcloudName:{type:String,attribute:"nextcloud-name"},text:{type:String},buttonLabel:{type:String,attribute:"button-label"},disabled:{type:Boolean},decompressZip:{type:Boolean,attribute:"decompress-zip"},activeSource:{type:Boolean,attribute:!1},isDialogOpen:{type:Boolean,attribute:"dialog-open"}}}update(e){e.forEach((e,t)=>{switch(t){case"lang":U.changeLanguage(this.lang);break;case"enabledSources":this.hasEnabledSource(this.activeSource)||(this.activeSource=this.enabledSources.split(",")[0]);break;case"isDialogOpen":this.isDialogOpen?this.openDialog():this.removeAttribute("dialog-open")}}),super.update(e)}connectedCallback(){super.connectedCallback(),this.updateComplete.then(()=>{this.dropArea=this._("#dropArea"),["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropArea.addEventListener(e,this.preventDefaults,!1)}),["dragenter","dragover"].forEach(e=>{this.dropArea.addEventListener(e,this.highlight.bind(this),!1)}),["dragleave","drop"].forEach(e=>{this.dropArea.addEventListener(e,this.unhighlight.bind(this),!1)}),this.dropArea.addEventListener("drop",this.handleDrop.bind(this),!1),this._("#fileElem").addEventListener("change",this.handleChange.bind(this))})}preventDefaults(e){e.preventDefault(),e.stopPropagation()}highlight(e){this.dropArea.classList.add("highlight")}unhighlight(e){this.dropArea.classList.remove("highlight")}handleDrop(e){if(this.disabled)return;let t=e.dataTransfer;console.dir(t);let o=t.files;this.handleFiles(o)}async handleChange(e){let t=this._("#fileElem");0!==t.files.length&&(await this.handleFiles(t.files),t.value="")}async handleFiles(e){console.log("handleFiles: files.length = "+e.length),await wt(e,async e=>{0!==e.size?this.decompressZip&&"application/zip"===e.type?await wt(await this.decompressZIP(e),e=>this.sendFileEvent(e)):this.allowedMimeTypes&&!this.checkFileType(e)||await this.sendFileEvent(e):console.log("file '"+e.name+"' has size=0 and is denied!")}),this.closeDialog()}sendFileEvent(e){const t=new CustomEvent("dbp-file-source-file-selected",{detail:{file:e},bubbles:!0,composed:!0});this.dispatchEvent(t)}checkFileType(e){const[t,o]=e.type.split("/"),i=this.allowedMimeTypes.split(",");let n=!0;return i.forEach(e=>{const[i,r]=e.split("/");n=n&&("*"!==i&&i!==t||"*"!==r&&r!==o)}),!n||(console.log(`mime type ${e.type} of file '${e.name}' is not compatible with ${this.allowedMimeTypes}`),!1)}hasEnabledSource(e){return this.enabledSources.split(",").includes(e)}async decompressZIP(e){let t=(await import("./jszip.abe622d6.es.js").then((function(e){return e.j}))).default,o=[];return await t.loadAsync(e).then(async t=>{await async function(e,t){const o=Object.keys(e);for(let i=0;i<o.length;i++){const n=o[i];await t(e[n],n,e)}}(t.files,async t=>{t.dir||await t.async("blob").then(async e=>{const i=await async function(e){return await new Promise(t=>{let o=new FileReader;o.onloadend=function(e){if(e.target.readyState===FileReader.DONE){const o=new Uint8Array(e.target.result);let i=[];o.forEach(e=>{i.push(e.toString(16))});const n=(e=>{switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"Unknown filetype"}})(i.join("").toUpperCase());t(n)}},o.readAsArrayBuffer(e.slice(0,4))})}(e),n=new File([e],t.name,{type:i});this.checkFileType(n)&&o.push(n)},t=>{console.error("Decompressing of file in "+e.name+" failed: "+t.message)})})},(function(t){console.error("Loading of "+e.name+" failed: "+t.message)})),o}async sendFinishedEvent(e,t,o=!1){if(void 0===e)return;let i={fileName:t.name,status:e.status,json:{"hydra:description":""}};try{await e.json().then(e=>{i.json=e})}catch(e){}o&&(i.file=t);const n=new CustomEvent("dbp-file-source-file-finished",{detail:i,bubbles:!0,composed:!0});this.dispatchEvent(n)}openDialog(){console.log("openDialog"),Yt.show(this._("#modal-picker"),{onClose:e=>{this.isDialogOpen=!1}})}closeDialog(){console.log("closeDialog"),Yt.close()}static get styles(){return Ie`
            ${Lt()}
            ${At()}
            ${Dt()}
            ${Ie`
        /**************************\\
          Modal Styles
        \\**************************/

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .modal-container {
            background-color: #fff;
            max-width: 600px;
            max-height: 100vh;
            min-width: 60%;
            min-height: 50%;
            overflow-y: auto;
            box-sizing: border-box;
            display: grid;
            height: 70%;
            width: 70%;
            position: relative;
        }
        
        .modal-close {
            background: transparent;
            border: none;
            font-size: 1.5rem;
            color: var(--dbp-override-danger-bg-color);
            cursor: pointer;
            padding: 0px;
        }
        
        .modal-close .close-icon svg, .close-icon{
            pointer-events: none;
        }

        button.modal-close:focus {
            outline: none;
        }


        /**************************\\
          Modal Animation Style
        \\**************************/
        @keyframes mmfadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes mmfadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        @keyframes mmslideIn {
            from {
                transform: translateY(15%);
            }
            to {
                transform: translateY(0);
            }
        }

        @keyframes mmslideOut {
            from {
                transform: translateY(0);
            }
            to {
                transform: translateY(-10%);
            }
        }

        .micromodal-slide {
            display: none;
        }

        .micromodal-slide.is-open {
            display: block;
        }

        .micromodal-slide[aria-hidden="false"] .modal-overlay {
            animation: mmfadeIn .3s cubic-bezier(0.0, 0.0, 0.2, 1);
        }

        .micromodal-slide[aria-hidden="false"] .modal-container {
            animation: mmslideIn .3s cubic-bezier(0, 0, .2, 1);
        }

        .micromodal-slide[aria-hidden="true"] .modal-overlay {
            animation: mmfadeOut .3s cubic-bezier(0.0, 0.0, 0.2, 1);
        }

        .micromodal-slide[aria-hidden="true"] .modal-container {
            animation: mmslideOut .3s cubic-bezier(0, 0, .2, 1);
        }

        .micromodal-slide .modal-container,
        .micromodal-slide .modal-overlay {
            will-change: transform;
        }
        
        @media only screen
        and (orientation: landscape)
        and (max-device-width: 896px) {
             .modal-container {
                 width: 100%;
                 height: 100%;
                 max-width: 100%;
             }
         }
        
        @media only screen
        and (orientation: portrait)
        and (max-device-width: 800px) {
            .micromodal-slide .modal-container{
                height: 100%;
                width: 100%;
            }
        }

        
    `}
            ${Ie`        
        /**************************\\
          Modal Styles
        \\**************************/

        .modal-container {
            grid-template-columns: 150px 1fr;
            grid-template-rows: auto 1fr;
            gap: 1px 1px;
            grid-template-areas: "sidebar header" "sidebar main";
            position: relative;
        }

        .modal-nav {
            cursor: pointer;
            overflow: hidden;
            background-color: white;
            border-right: 1px solid black;
            grid-area: sidebar;
        }

        .modal-nav > div {
            padding: 5px;
            text-align: center;
        }

        .modal-nav .nav-icon {
            width: 35px;
            height: 35px;
        }

        .modal-nav .active{
            background-color: var(--dbp-dark);;
            color: var(--dbp-light);;
        }

        .modal-content {
            padding: 10px 20px 20px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .modal-content .source-main {
            /*flex-grow: 1;*/
            /*justify-content: center;*/
            /*align-items: center;*/
            height: 100%;
            width: 100%;
            display:flex;
            align-items: flex-end;
        }

        .modal-content .source-main.hidden {
            display: none;
        }

        .modal-header{
            grid-area: header;
            display: flex;
            padding: 10px 20px 0px 20px;
            flex-direction: row-reverse;
            justify-content: space-between;
            align-items: center;
        }


        /**************************\\
         Picker Styles
       \\**************************/

        #nextcloud-file-picker {
            width: 100%;
            height: 100%;
            margin: var(--FUMargin, 0px);
            padding: var(--FUPadding, 20px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #fileElem {
            display: none;
        }

        #nextcloud-file-picker.hidden {
            display: none;
        }

        #modal-picker-content{
            grid-area: main;
        }


        /**************************\\
         Mobile Landscape Styles
       \\**************************/
        
        @media only screen
        and (orientation: landscape)
        and (max-device-width: 896px) {
            .modal-container {
                width: 100%;
                height: 100%;
                max-width: 100%;
            }
        }


        /**************************\\
         Tablett Portrait Styles
       \\**************************/
        
        @media only screen
        and (orientation: portrait)
        and (max-device-width: 800px) {

            .modal-nav{
                display: flex;
                justify-content: space-around;
                grid-area: nav;
                border: none;
                border-bottom: 1px solid black;
                border-top: 1px solid black;
            }

            .modal-content{
                grid-area: main;
            }

            .modal-container{
                grid-template-rows: 40px 55px auto;
                grid-template-areas: "header" "nav" "main";
                grid-template-columns: auto;
            }

            .modal-header{
                grid-area: header;
                padding: 5px;
            }

            .modal-nav > div{
                flex-grow: 1;
            }

            .modal-nav .nav-icon{
                height: 20px;
            }

            #nextcloud-file-picker{
                padding: 0px;
            }
        }

        /**************************\\
         Mobile Portrait Styles
        \\**************************/
        
        @media only screen
        and (orientation: portrait)
        and (max-device-width: 765px) {
            

            




        }
    
    `}

           

            p {
                margin-top: 0;
            }
            
            .block {
                margin-bottom: 10px;
            }
            
            #dropArea {
                border: var(--FUBorderWidth, 2px) var(--FUBorderStyle, dashed) var(--FUBBorderColor, black);
                border-radius: var(--FUBorderRadius, 0);
                width: auto;
                margin: var(--FUMargin, 0px);
                padding: var(--FUPadding, 20px);
                /*flex-grow: 1;*/
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
    
            #dropArea.highlight {
                border-color: var(--FUBorderColorHighlight, purple);
            }
            
            
             @media only screen
            and (orientation: portrait)
            and (max-device-width: 800px) {
                #dropArea{
                    height: 100%;
                }
            
            }
            
        `}render(){let e=this.allowedMimeTypes;return this.decompressZip&&(e+=",application/zip"),Me`
<!--
            <button class="button"
                ?disabled="${this.disabled}"
                @click="${()=>{this.openDialog()}}">${U.t("file-source.open-menu")}</button>
-->
            <div class="modal micromodal-slide" id="modal-picker" aria-hidden="true">
                <div class="modal-overlay" tabindex="-1" data-micromodal-close>
                    <div class="modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-picker-title">
                        <nav class="modal-nav">
                            <div title="${U.t("file-source.nav-local")}"
                                 @click="${()=>{this.activeSource="local"}}"
                                 class="${Ht({active:"local"===this.activeSource,hidden:!this.hasEnabledSource("local")})}">
                                <dbp-icon class="nav-icon" name="laptop"></dbp-icon>
                                <p>${U.t("file-source.nav-local")}</p>
                            </div>
                            <div title="Nextcloud"
                                 @click="${()=>{this.activeSource="nextcloud"}}"
                                 class="${Ht({active:"nextcloud"===this.activeSource,hidden:!this.hasEnabledSource("nextcloud")})}">
                                <dbp-icon class="nav-icon" name="cloud"></dbp-icon>
                                <p> ${this.nextcloudName} </p>
                            </div>
                            
                        </nav>
                        <div class="modal-header">
                            <button title="${U.t("file-source.modal-close")}" class="modal-close"  aria-label="Close modal"  @click="${()=>{this.closeDialog()}}">
                                    <dbp-icon name="close" class="close-icon"></dbp-icon>
                            </button>
                       
                            <p class="modal-context"> ${this.context}</p>
                        </div>
                        <main class="modal-content" id="modal-picker-content">
                            
                            <div class="source-main ${Ht({hidden:"local"!==this.activeSource})}">
                                <div id="dropArea">
                                    <div class="block">
                                        <p>${this.text||U.t("intro")}</p>
                                    </div>
                                    <input ?disabled="${this.disabled}"
                                           type="file"
                                           id="fileElem"
                                           multiple
                                           accept="${function(e){let t={"application/pdf":[".pdf"],"application/zip":[".zip"]},o=[];return e.split(",").forEach(e=>{o.push(e),e.trim()in t&&(o=o.concat(t[e.trim()]))}),o.join(",")}(e)}"
                                           name='file'>
                                    <label class="button is-primary" for="fileElem" ?disabled="${this.disabled}">
                                        ${this.buttonLabel||U.t("upload-label")}
                                    </label>
                                </div>
                            </div>
                            <div class="source-main ${Ht({hidden:"nextcloud"!==this.activeSource})}">
                                <dbp-nextcloud-file-picker id="nextcloud-file-picker"
                                       class="${Ht({hidden:""===this.nextcloudWebDavUrl||""===this.nextcloudAuthUrl})}"
                                       ?disabled="${this.disabled}"
                                       lang="${this.lang}"
                                       auth-url="${this.nextcloudAuthUrl}"
                                       web-dav-url="${this.nextcloudWebDavUrl}"
                                       nextcloud-name="${this.nextcloudName}"
                                       allowed-mime-types="${this.allowedMimeTypes}"
                                       @dbp-nextcloud-file-picker-file-downloaded="${e=>{this.sendFileEvent(e.detail.file)}}"></dbp-nextcloud-file-picker>
                            </div>
                        </main>
                    </div>
                </div>
            </div>
          `}}export{Xt as F,We as L,mt as S,Pt as a,_t as b,Ft as c,vt as d,Me as h,U as i,Ge as u};
//# sourceMappingURL=file-source.9a307312.es.js.map
